/**
 * Copyright (c) 2024 The Nuevodevel Team. All rights reserved.
 * VASTPro plugin for Video.js
 * Version 4.0.0
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(pt,ht){"use strict";pt.nuevovast={version:"1.0"};const i=(f,o,d)=>{var e,D,s,m,a,B,j,V,F,H,W,q,i,n,_,z,t,X,Q,Y={nonlinearRecall:ht.errorDisplay=!1,withCredentials:!1,timeout:6e3,resolveAll:!0,wrapperLimit:10,allowMultipleAds:!0,allowAdPods:!0,cancelAdPods:!1,clickthroughMethod:"player",closeNonlinearButton:!0,closeNonlinearTheme:"light",autoClose:!1,outstreamClose:!1,brandText:"",brandUrl:"",outstreamCloseTheme:"dark",autoplay:!1,skipTimer:!1,mode:"normal"},G=(e={},D=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"],s={track:function(e,t,i){le(e,t,i).forEach(function(e){null!=pt&&((new Image).src=e)})},resolveURLTemplates:le,extractURLsFromTemplates:ue,filterValidUrlTemplates:function(e){return Array.isArray(e)?e.filter(function(e){return de(e.hasOwnProperty("url")?e.url:e)}):de(e)},containsTemplateObject:pe,isTemplateObjectEqual:he,encodeURIComponentRFC3986:me,replaceUrlMacros:se,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function i(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?i(t):t)},[])},joinArrayOfUniqueTemplateObjs:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=Array.isArray(e)?e:[],t=Array.isArray(t)?t:[];return e.concat(t).reduce(function(e,t){return pe(t,e)||e.push(t),e},[])},isValidTimeValue:function(e){return Number.isFinite(e)&&-2<=e},addLeadingZeros:fe},m={childByName:function(e,t){var i,n=e.childNodes;for(i in n){var r=n[i];if(r.nodeName===t)return r}},childrenByName:function(e,t){var i,n=[],r=e.childNodes;for(i in r){var a=r[i];a.nodeName===t&&n.push(a)}return n},resolveVastAdTagURI:function(e,t){var i;return t?0===e.indexOf("//")?(i=location.protocol,"".concat(i).concat(e)):-1===e.indexOf("://")?(i=t.slice(0,t.lastIndexOf("/")),"".concat(i,"/").concat(e)):e:e},parseBoolean:ve,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,i){t=t.getAttribute(e);t&&i.setAttribute(e,t)},parseAttributes:function(e){for(var t=e.attributes,i={},n=0;n<t.length;n++)i[t[n].nodeName]=t[n].nodeValue;return i},parseDuration:ge,splitVAST:function(i){var n=[],r=null;return i.forEach(function(e,t){if(e.sequence&&(e.sequence=parseInt(e.sequence,10)),1<e.sequence){t=i[t-1];if(t&&t.sequence===e.sequence-1)return void(r&&r.push(e));delete e.sequence}r=[e],n.push(r)}),n},assignAttributes:function(e,t){if(e)for(var i in e){var n,i=e[i];i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)&&(n=i.nodeValue,"boolean"==typeof t[i.nodeName]&&(n=ve(n)),t[i.nodeName]=n)}},mergeWrapperAdData:function(e,n){e.errorURLTemplates=n.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=n.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=n.extensions.concat(e.extensions),0<n.viewableImpression.length&&(e.viewableImpression=[].concat(ne(e.viewableImpression),ne(n.viewableImpression))),e.followAdditionalWrappers=n.followAdditionalWrappers,e.allowMultipleAds=n.allowMultipleAds,e.fallbackOnNoAd=n.fallbackOnNoAd;var t=(n.creatives||[]).filter(function(e){return e&&"companion"===e.type}),r=t.reduce(function(t,e){return(e.variations||[]).forEach(function(e){(e.companionClickTrackingURLTemplates||[]).forEach(function(e){s.containsTemplateObject(e,t)||t.push(e)})}),t},[]),a=(e.creatives=t.concat(e.creatives),n.videoClickTrackingURLTemplates&&n.videoClickTrackingURLTemplates.length),o=n.videoCustomClickURLTemplates&&n.videoCustomClickURLTemplates.length;e.creatives.forEach(function(e){if(n.trackingEvents&&n.trackingEvents[e.type])for(var t in n.trackingEvents[e.type]){var i=n.trackingEvents[e.type][t];Array.isArray(e.trackingEvents[t])||(e.trackingEvents[t]=[]),e.trackingEvents[t]=e.trackingEvents[t].concat(i)}"linear"===e.type&&(a&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(n.videoClickTrackingURLTemplates)),o&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(n.videoCustomClickURLTemplates)),n.videoClickThroughURLTemplate)&&null==e.videoClickThroughURLTemplate&&(e.videoClickThroughURLTemplate=n.videoClickThroughURLTemplate),"companion"===e.type&&r.length&&(e.variations||[]).forEach(function(e){e.companionClickTrackingURLTemplates=s.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,r)})}),n.adVerifications&&(e.adVerifications=e.adVerifications.concat(n.adVerifications)),n.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(n.blockedAdCategories)),null!=(t=n.creatives)&&t.length&&(t=n.creatives.filter(function(e){var t;return(null==(t=e.icons)?void 0:t.length)&&!e.mediaFiles.length})).length&&(e.creatives=e.creatives.concat(t))}},a={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}},B={verifyRequiredValues:function e(t,i,n){if(t&&t.nodeName)if("InLine"===t.nodeName&&(n=!0),be(t,i),Re(t)){Ae(t,i,n);for(var r=0;r<t.children.length;r++)e(t.children[r],i,n)}else 0===m.parseNodeText(t).length&&l({name:t.nodeName,parentName:t.parentNode.nodeName},i)},hasSubElements:Re,emitMissingValueWarning:l,verifyRequiredAttributes:be,verifyRequiredSubElements:Ae},r(Ee,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(c(t)));if(e)return this._handlers.push({event:e,handler:t}),this;throw new TypeError("The event argument must be of type String. Received type ".concat(c(e)))}},{key:"once",value:function(e,t){return this.on(e,(n=this,r=e,a=t,(o={fired:!1,wrapFn:void 0}).wrapFn=i));function i(){o.fired||(n.off(r,o.wrapFn),o.fired=!0,a.bind(n).apply(void 0,arguments))}var n,r,a,o}},{key:"off",value:function(t,i){return this._handlers=this._handlers.filter(function(e){return e.event!==t||e.handler!==i}),this}},{key:"emit",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r=!1;return this._handlers.forEach(function(e){"*"===e.event&&(r=!0,e.handler.apply(e,[t].concat(i))),e.event===t&&(r=!0,e.handler.apply(e,i))}),r}},{key:"removeAllListeners",value:function(t){return this._handlers=t?this._handlers.filter(function(e){return e.event!==t}):[],this}},{key:"listenerCount",value:function(t){return this._handlers.filter(function(e){return e.event===t}).length}},{key:"listeners",value:function(i){return this._handlers.reduce(function(e,t){return t.event===i&&e.push(t.handler),e},[])}},{key:"eventNames",value:function(){return this._handlers.map(function(e){return e.event})}}]),j=function(e,t,i){i(new Error("Please bundle the library for node to use the node urlHandler"))},H=function(e,t,i){if("https:"===pt.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var n=xe();n.open("GET",e),n.timeout=t.timeout||12e4,n.withCredentials=t.withCredentials||!1,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onload=function(){var e,t;t=i,200===(e=n).status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):p(e,t,!1)},n.onerror=function(){return p(n,i,!1)},n.onabort=function(){return p(n,i,!1)},n.ontimeout=function(){return p(n,i,!0)},n.send()}catch(e){i(new Error("XHRURLHandler: Unexpected error"))}},W=function(){return!!xe()},q={get:function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),null==pt?j(e,t,i):W()?H(e,t,i):i(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},n=i=0,_={ERRORCODE:900,extensions:[]},J(v,R=Ee),F=ie(v),r(v,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];this.emit("VAST-error",Object.assign.apply(Object,[{},_,t].concat(n))),s.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return n}},{key:"fetchVAST",value:function(s){var c=this,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(a,o){c.URLTemplateFilters.forEach(function(e){s=e(s)});var l=Date.now();c.emit("VAST-resolving",{url:s,previousUrl:d,wrapperDepth:u,maxWrapperDepth:c.maxWrapperDepth,timeout:c.fetchingOptions.timeout,wrapperAd:e}),c.urlHandler.get(s,c.fetchingOptions,function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Math.round(Date.now()-l),r=Object.assign({url:s,previousUrl:d,wrapperDepth:u,error:e,duration:n},i);c.emit("VAST-resolved",r),Ie(i.byteLength,n),e?o(e):a(t)})})}},{key:"initParsingStatus",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||12e4,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||q,this.vastVersion=null,Ie(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;return 0===this.remainingAds.length?Promise.reject(new Error("No more ads are available for the given VAST")):(e=e?s.flatten(this.remainingAds):this.remainingAds.shift(),this.errorURLTemplates=[],this.resolveAds(e,{wrapperDepth:0,url:this.rootURL}).then(function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.URLTemplateFilters.forEach(function(e){t=e(t)}),this.rootURL=t,this.fetchVAST(t).then(function(e){return n.previousUrl=t,n.isRootVAST=!0,n.url=t,i.parse(e,n).then(function(e){return i.buildVASTResponse(e)})})}},{key:"parseVAST",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),i.isRootVAST=!0,this.parse(e,i).then(function(e){return t.buildVASTResponse(e)})}},{key:"buildVASTResponse",value:function(e){e={ads:(e={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:e.errorURLTemplates||[],version:e.version||null};return this.completeWrapperResolving(e),e}},{key:"parseVastXml",value:function(e,t){var i=t.isRootVAST,n=void 0!==i&&i,i=t.url,r=void 0===i?null:i,i=t.wrapperDepth,a=void 0===i?0:i,o=t.allowMultipleAds,l=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:r,wrapperDepth:a}),new Error("Invalid VAST XMLDocument");var s,c=[],u=e.documentElement.childNodes,d=e.documentElement.getAttribute("version");for(s in n&&d&&(this.vastVersion=d),u){var p=u[s];if("Error"===p.nodeName){var h=m.parseNodeText(p);(n?this.rootErrorURLTemplates:this.errorURLTemplates).push(h)}else if("Ad"===p.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)o=!0;else if(!1===o&&1<c.length)break;h=Le(p,this.emit.bind(this),{allowMultipleAds:o,followAdditionalWrappers:l});h.ad?(c.push(h.ad),this.emit("VAST-ad-parsed",{type:h.type,url:r,wrapperDepth:a,adIndex:c.length-1,vastVersion:d})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return c}},{key:"parse",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.url,i=void 0===i?null:i,n=t.resolveAll,n=void 0===n||n,r=t.wrapperSequence,r=void 0===r?null:r,a=t.previousUrl,a=void 0===a?null:a,o=t.wrapperDepth,o=void 0===o?0:o,l=t.isRootVAST,l=void 0!==l&&l,s=t.followAdditionalWrappers,t=t.allowMultipleAds,c=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&l&&(t=!0);try{c=this.parseVastXml(e,{isRootVAST:l,url:i,wrapperDepth:o,allowMultipleAds:t,followAdditionalWrappers:s})}catch(e){return Promise.reject(e)}return 1===c.length&&null!=r&&(c[0].sequence=r),!1===n&&(this.remainingAds=m.splitVAST(c),c=this.remainingAds.shift()),this.resolveAds(c,{wrapperDepth:o,previousUrl:a,url:i})}},{key:"resolveAds",value:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=t.wrapperDepth,r=t.url,a=[],o=r;return e.forEach(function(e){e=i.resolveWrappers(e,n,o);a.push(e)}),Promise.all(a).then(function(e){var t,e=s.flatten(e);return!e&&0<i.remainingAds.length?(t=i.remainingAds.shift(),i.resolveAds(t,{wrapperDepth:n,previousUrl:o,url:r})):e})}},{key:"resolveWrappers",value:function(r,a,o){var l=this;return new Promise(function(t){var e;if(a++,!r.nextWrapperURL)return delete r.nextWrapperURL,t(r);if(a>=l.maxWrapperDepth)return r.errorCode=302,delete r.nextWrapperURL,t(r);r.nextWrapperURL=m.resolveVastAdTagURI(r.nextWrapperURL,o),l.URLTemplateFilters.forEach(function(e){r.nextWrapperURL=e(r.nextWrapperURL)});var i=null!=(e=l.parsingOptions.allowMultipleAds)?e:r.allowMultipleAds,n=r.sequence;l.fetchVAST(r.nextWrapperURL,a,o,r).then(function(e){return l.parse(e,{url:r.nextWrapperURL,previousUrl:o,wrapperSequence:n,wrapperDepth:a,followAdditionalWrappers:r.followAdditionalWrappers,allowMultipleAds:i}).then(function(e){if(delete r.nextWrapperURL,0===e.length)return r.creatives=[],t(r);e.forEach(function(e){e&&m.mergeWrapperAdData(e,r)}),t(e)})}).catch(function(e){r.errorCode=301,r.errorMessage=e.message,t(r)})})}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;0<=t;t--){var i=e.ads[t];!i.errorCode&&0!==i.creatives.length||(this.trackVastError(i.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),e.ads.splice(t,1))}}}]),z=v,t=null,X={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},r(Ne,[{key:"initStorage",value:function(){if(!t){try{t=null!=pt?pt.localStorage||pt.sessionStorage:null}catch(e){t=null}t&&!this.isStorageDisabled(t)||(t=X).clear()}return t}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),Q=Ne,r(Ue,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return 0<this.vastParser.remainingAds.length}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(n){var r=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=Date.now();return(a=Object.assign({},this.defaultOptions,a)).hasOwnProperty("resolveAll")||(a.resolveAll=!1),this.totalCallsTimeout<o?(this.totalCalls=1,this.totalCallsTimeout=o+36e5):this.totalCalls++,new Promise(function(t,i){if(r.cappingFreeLunch>=r.totalCalls)return i(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(r.totalCalls,"/").concat(r.cappingFreeLunch)));var e=o-r.lastSuccessfulAd;if(e<0)r.lastSuccessfulAd=0;else if(e<r.cappingMinimumTimeInterval)return i(new Error("VAST call canceled – (".concat(r.cappingMinimumTimeInterval,")ms minimum interval reached")));r.vastParser.getAndParseVAST(n,a).then(function(e){return t(e)}).catch(function(e){return i(e)})})}}]),A=Ue,J(h,R),V=ie(h),r(h,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):"companionAd"===this.variation.adType&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){s.isValidTimeValue(e)&&(this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(s.isValidTimeValue(e)&&"object"===c(i)){var n=this.skipDelay||-1;if(-1===n||this.skippable||(e<n?this.emit("skip-countdown",n-e):(this.skippable=!0,this.emit("skip-countdown",0))),0<this.assetDuration){var r=Math.round(e/this.assetDuration*100),a=[];if(0<e){a.push("start");for(var o,l=this.lastPercentage;l<r;l++)a.push("progress-".concat(l+1,"%"));for(o in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(o,this.quartiles[o],e)&&(a.push(o),this._alreadyTriggeredQuartiles[o]=!0);this.lastPercentage=r}a.forEach(function(e){t.track(e,{macros:i,once:!0})}),e<this.progress&&this.track("rewind",{macros:i})}this.progress=e}}},{key:"isQuartileReached",value:function(e,t,i){var n=!1;return n=t<=i&&!this._alreadyTriggeredQuartiles[e]?!0:n}},{key:"setMuted",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===c(t)&&(this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e)}},{key:"setPaused",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===c(t)&&(this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e)}},{key:"setFullscreen",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===c(t)&&(this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e)}},{key:"setExpand",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===c(t)&&(this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e)}},{key:"setSkipDelay",value:function(e){s.isValidTimeValue(e)&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"!==c(e)||this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e}))}},{key:"trackViewableImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.viewable,i)})}},{key:"trackNotViewableImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.notViewable,i)})}},{key:"trackUndeterminedImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.viewUndetermined,i)})}},{key:"error",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"object"===c(e)&&"boolean"==typeof t&&this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&"boolean"==typeof t&&(this.error({ERRORCODE:e},t),console.log("The method errorWithCode is deprecated, please use vast tracker error method instead"))}},{key:"complete",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&(this.track("notUsed",{macros:e}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t&&"object"===c(e)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!t)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var i=this.ad.adVerifications.find(function(e){return e.vendor===t});if(!i)throw new Error("No associated verification element found for vendor: ".concat(t));var i=i.trackingEvents;i&&i.verificationNotExecuted&&(i=i.verificationNotExecuted,this.trackURLs(i,e),this.emit("verificationNotExecuted",{trackingURLTemplates:i}))}}},{key:"overlayViewDuration",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&"object"===c(t)&&(t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t}))}},{key:"close",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("skip",{macros:e})}},{key:"load",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===c(e)&&this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};null!==e&&"string"!=typeof e||"object"!==c(t)||(this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t),e=this.clickThroughURLTemplate||e,t=K({},t),e&&(this.progress&&(t.ADPLAYHEAD=this.progressFormatted()),e=s.resolveURLTemplates([e],t)[0],this.emit("clickthrough",e)))}},{key:"track",value:function(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.macros,r=void 0===r?{}:r,n=n.once,n=void 0!==n&&n;"object"===c(r)&&("closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close"),t=this.trackingEvents[e],i=-1<this.emitAlwaysEvents.indexOf(e),t?(this.emit(e,{trackingURLTemplates:t}),this.trackURLs(t,r)):i&&this.emit(e,null),n)&&(delete this.trackingEvents[e],i)&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1)}},{key:"trackURLs",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=s.filterValidUrlTemplates(e),i=K({},i);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(i.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress)&&(i.ADPLAYHEAD=this.progressFormatted()),null!=(t=this.creative)&&null!=(t=t.universalAdIds)&&t.length&&(i.UNIVERSALADID=this.creative.universalAdIds.map(function(e){return e.idRegistry.concat(" ",e.value)}).join(",")),this.ad&&(this.ad.sequence&&(i.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(i.ADTYPE=this.ad.adType),this.ad.adServingId&&(i.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(i.ADCATEGORIES=this.ad.categories.map(function(e){return e.value}).join(",")),this.ad.blockedAdCategories)&&this.ad.blockedAdCategories.length&&(i.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories),s.track(e,i,n)}},{key:"convertToTimecode",value:function(e){var t,i,n;return s.isValidTimeValue(e)?(e=1e3*e,t=Math.floor(e/36e5),i=Math.floor(e/6e4%60),n=Math.floor(e/1e3%60),e=Math.floor(e%1e3),"".concat(s.addLeadingZeros(t,2),":").concat(s.addLeadingZeros(i,2),":").concat(s.addLeadingZeros(n,2),".").concat(s.addLeadingZeros(e,3))):""}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),R=h,e.VASTClient=A,e.VASTParser=z,e.VASTTracker=R,e.parseDuration=ge,Object.defineProperty(e,"__esModule",{value:!0}),e);function $(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function K(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach(function(e){var t,i;t=n,i=r[e=e],(e=ae(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ae(n.key),n)}}function r(e,t,i){t&&Z(e.prototype,t),i&&Z(e,i),Object.defineProperty(e,"prototype",{writable:!1})}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ie(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ee(i),t=(e=n?(e=ee(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!=typeof e&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function ne(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?re(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?re(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ae(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}function oe(e){e=0<arguments.length&&void 0!==e?e:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}function le(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=[],o=ue(e);for(t in!n.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(n.ERRORCODE)||(n.ERRORCODE=900),n.CACHEBUSTING=fe(Math.round(1e8*Math.random())),n.TIMESTAMP=(new Date).toISOString(),n.RANDOM=n.random=n.CACHEBUSTING,n)n[t]=me(n[t]);for(i in o){var l=o[i];"string"==typeof l&&a.push(se(l,n))}return a}function se(e,t){var t=(e=ce(e,t)).match(/[^[\]]+(?=])/g);return!t||0===(t=t.filter(function(e){return-1<D.indexOf(e)})).length?e:ce(e,t=t.reduce(function(e,t){return e[t]=-1,e},{}))}function ce(e,t){var i,n=e;for(i in t)var r=t[i],n=n.replace(new RegExp("(?:\\[|%%)(".concat(i,")(?:\\]|%%)"),"g"),r);return n}function ue(e){return Array.isArray(e)?e.map(function(e){return e&&e.hasOwnProperty("url")?e.url:e}):e}function de(e){return/^(https?:\/\/|\/\/)/.test(e)}function pe(e,t){for(var i=0;i<t.length;i++)if(he(t[i],e))return!0;return!1}function he(e,t){var i,n;return!(!e||!t)&&(i=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t),i.length===n.length)&&e.id===t.id&&e.url===t.url}function me(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16))})}function fe(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,"0")}function ve(e){return-1!==["true","TRUE","True","1"].indexOf(e)}function ge(e){var t,i;return null==e?-1:s.isNumeric(e)?parseInt(e):3!==(e=e.split(":")).length||(i=e[2].split("."),t=parseInt(i[0]),2===i.length&&(t+=parseFloat("0.".concat(i[1]))),i=parseInt(60*e[1]),e=parseInt(60*e[0]*60),isNaN(e))||isNaN(i)||isNaN(t)||3600<i||60<t?-1:e+i+t}function ke(e,t){var n,o=function(e){e=oe(0<arguments.length&&void 0!==e?e:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t),t=(o.duration=m.parseDuration(m.parseNodeText(m.childByName(e,"Duration"))),e.getAttribute("skipoffset")),i=(null==t?o.skipDelay=null:"%"===t.charAt(t.length-1)&&-1!==o.duration?(i=parseInt(t,10),o.skipDelay=o.duration*(i/100)):o.skipDelay=m.parseDuration(t),m.childByName(e,"VideoClicks")),t=(i&&(t=m.childByName(i,"ClickThrough"),o.videoClickThroughURLTemplate=t?{id:t.getAttribute("id")||null,url:m.parseNodeText(t)}:null,m.childrenByName(i,"ClickTracking").forEach(function(e){o.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:m.parseNodeText(e)})}),m.childrenByName(i,"CustomClick").forEach(function(e){o.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:m.parseNodeText(e)})})),m.childByName(e,"AdParameters")),i=(t&&(o.adParameters={value:m.parseNodeText(t),xmlEncoded:t.getAttribute("xmlEncoded")||null}),m.childrenByName(e,"TrackingEvents").forEach(function(e){m.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),i=m.parseNodeText(e);if(t&&i){if("progress"===t){if(!(n=e.getAttribute("offset")))return;t="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(m.parseDuration(n)))}Array.isArray(o.trackingEvents[t])||(o.trackingEvents[t]=[]),o.trackingEvents[t].push(i)}})}),m.childrenByName(e,"MediaFiles").forEach(function(e){m.childrenByName(e,"MediaFile").forEach(function(e){var t,i;o.mediaFiles.push(((t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null}).id=(e=e).getAttribute("id"),t.fileURL=m.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0),(i=e.getAttribute("scalable"))&&"string"==typeof i&&(t.scalable=m.parseBoolean(i)),(i=e.getAttribute("maintainAspectRatio"))&&"string"==typeof i&&(t.maintainAspectRatio=m.parseBoolean(i)),t))});var t=m.childByName(e,"InteractiveCreativeFile"),t=(t&&(o.interactiveCreativeFile=(t=t,(a=function(e){e=0<arguments.length&&void 0!==e?e:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:m.parseBoolean(e.variableDuration),fileURL:null}}(m.parseAttributes(t))).fileURL=m.parseNodeText(t),a)),m.childByName(e,"ClosedCaptionFiles"));t&&m.childrenByName(t,"ClosedCaptionFile").forEach(function(e){var t=function(e){e=0<arguments.length&&void 0!==e?e:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(m.parseAttributes(e));t.fileURL=m.parseNodeText(e),o.closedCaptionFiles.push(t)});var i,n,r,a=m.childByName(e,"Mezzanine"),t=(i=a,r=!(n={}),["delivery","type","width","height"].forEach(function(e){i&&i.getAttribute(e)?n[e]=i.getAttribute(e):r=!0}),r?null:n);t&&((e={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"}).id=a.getAttribute("id"),e.fileURL=m.parseNodeText(a),e.delivery=t.delivery,e.codec=a.getAttribute("codec"),e.type=t.type,e.width=parseInt(t.width,10),e.height=parseInt(t.height,10),e.fileSize=parseInt(a.getAttribute("fileSize"),10),e.mediaType=a.getAttribute("mediaType")||"2D",o.mezzanine=e)}),m.childByName(e,"Icons"));return i&&m.childrenByName(i,"Icon").forEach(function(e){var t,i;o.icons.push(((t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null,iconClickFallbackImages:[]}).program=(e=e).getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=(i=e.getAttribute("xPosition"),-1!==["left","right"].indexOf(i)?i:parseInt(i||0)),t.yPosition=(i=e.getAttribute("yPosition"),-1!==["top","bottom"].indexOf(i)?i:parseInt(i||0)),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=m.parseDuration(e.getAttribute("offset")),t.duration=m.parseDuration(e.getAttribute("duration")),m.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=m.parseNodeText(e)}),m.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=m.parseNodeText(e)}),m.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=m.parseNodeText(e)}),(i=m.childByName(e,"IconClicks"))&&(t.iconClickThroughURLTemplate=m.parseNodeText(m.childByName(i,"IconClickThrough")),m.childrenByName(i,"IconClickTracking").forEach(function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:m.parseNodeText(e)})}),i=m.childByName(i,"IconClickFallbackImages"))&&m.childrenByName(i,"IconClickFallbackImage").forEach(function(e){t.iconClickFallbackImages.push({url:m.parseNodeText(e)||null,width:e.getAttribute("width")||null,height:e.getAttribute("height")||null})}),t.iconViewTrackingURLTemplate=m.parseNodeText(m.childByName(e,"IconViewTracking")),t))}),o}function Te(e){var t=[];return e.forEach(function(e){e=function e(t){if("#comment"===t.nodeName)return null;var i={name:null,value:null,attributes:{},children:[]},n=t.attributes,r=t.childNodes;if(i.name=t.nodeName,t.attributes)for(var a in n)n.hasOwnProperty(a)&&(a=n[a]).nodeName&&a.nodeValue&&(i.attributes[a.nodeName]=a.nodeValue);for(var o in r)r.hasOwnProperty(o)&&(o=e(r[o]))&&i.children.push(o);(0===i.children.length||1===i.children.length&&0<=["#cdata-section","#text"].indexOf(i.children[0].name))&&(""!==(t=m.parseNodeText(t))&&(i.value=t),i.children=[]);return null===(t=i).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:i}(e);e&&t.push(e)}),t}function ye(e){var u=[];return e.forEach(function(e){var t,i,n,r,a={id:e.getAttribute("id")||null,adId:(l=e).getAttribute("AdID")||l.getAttribute("adID")||l.getAttribute("adId")||null,sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},o=[],l=(m.childrenByName(e,"UniversalAdId").forEach(function(e){e={idRegistry:e.getAttribute("idRegistry")||"unknown",value:m.parseNodeText(e)};o.push(e)}),m.childByName(e,"CreativeExtensions"));for(i in l&&(t=Te(m.childrenByName(l,"CreativeExtension"))),e.childNodes){var s=e.childNodes[i],c=void 0;switch(s.nodeName){case"Linear":c=ke(s,a);break;case"NonLinearAds":c=function(e,t){var n=function(e){e=oe(0<arguments.length&&void 0!==e?e:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return m.childrenByName(e,"TrackingEvents").forEach(function(e){var t,i;m.childrenByName(e,"Tracking").forEach(function(e){t=e.getAttribute("event"),i=m.parseNodeText(e),t&&i&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(i))})}),m.childrenByName(e,"NonLinear").forEach(function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null},i=(t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=m.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=m.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=m.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),m.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=m.parseNodeText(e)}),m.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=m.parseNodeText(e)}),m.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=m.parseNodeText(e)}),m.childByName(e,"AdParameters"));i&&(t.adParameters={value:m.parseNodeText(i),xmlEncoded:i.getAttribute("xmlEncoded")||null}),t.nonlinearClickThroughURLTemplate=m.parseNodeText(m.childByName(e,"NonLinearClickThrough")),m.childrenByName(e,"NonLinearClickTracking").forEach(function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:m.parseNodeText(e)})}),n.variations.push(t)}),n}(s,a);break;case"CompanionAds":n=s,(r=function(e){e=oe(0<arguments.length&&void 0!==e?e:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"companion",required:null,variations:[]}}(r=a)).required=n.getAttribute("required")||null,r.variations=m.childrenByName(n,"Companion").map(function(e){var i=function(e){e=0<arguments.length&&void 0!==e?e:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotId:e.adSlotId||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(m.parseAttributes(e)),t=(i.htmlResources=m.childrenByName(e,"HTMLResource").reduce(function(e,t){t=m.parseNodeText(t);return t?e.concat(t):e},[]),i.iframeResources=m.childrenByName(e,"IFrameResource").reduce(function(e,t){t=m.parseNodeText(t);return t?e.concat(t):e},[]),i.staticResources=m.childrenByName(e,"StaticResource").reduce(function(e,t){var i=m.parseNodeText(t);return i?e.concat({url:i,creativeType:t.getAttribute("creativeType")||null}):e},[]),i.altText=m.parseNodeText(m.childByName(e,"AltText"))||null,m.childByName(e,"TrackingEvents")),t=(t&&m.childrenByName(t,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=m.parseNodeText(e);t&&e&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(e))}),i.companionClickTrackingURLTemplates=m.childrenByName(e,"CompanionClickTracking").map(function(e){return{id:e.getAttribute("id")||null,url:m.parseNodeText(e)}}),i.companionClickThroughURLTemplate=m.parseNodeText(m.childByName(e,"CompanionClickThrough"))||null,m.childByName(e,"AdParameters"));return t&&(i.adParameters={value:m.parseNodeText(t),xmlEncoded:t.getAttribute("xmlEncoded")||null}),i}),c=r}c&&(o&&(c.universalAdIds=o),t&&(c.creativeExtensions=t),u.push(c))}}),u}function be(t,e){var i;a[t.nodeName]&&a[t.nodeName].attributes&&0<(i=a[t.nodeName].attributes.filter(function(e){return!t.getAttribute(e)})).length&&l({name:t.nodeName,parentName:t.parentNode.nodeName,attributes:i},e)}function Ae(t,e,i){var n,r=a[t.nodeName];!r||!i&&"Wrapper"!==t.nodeName||(r.subElements&&0<(n=r.subElements.filter(function(e){return!m.childByName(t,e)})).length&&l({name:t.nodeName,parentName:t.parentNode.nodeName,subElements:n},e),!i)||!r.oneOfinLineResources||r.oneOfinLineResources.some(function(e){return m.childByName(t,e)})||l({name:t.nodeName,parentName:t.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},e)}function Re(e){return e.children&&0!==e.children.length}function l(e,t){var i=e.name,n=e.parentName,r=e.attributes,a=e.subElements,e=e.oneOfResources,i="Element '".concat(i,"'");t("VAST-warning",{message:i+=r?" missing required attribute(s) '".concat(r.join(", "),"' "):a?" missing required sub element(s) '".concat(a.join(", "),"' "):e?" must provide one of the following '".concat(e.join(", "),"' "):" is empty",parentElement:n,specVersion:4.1})}function Le(e,t,i){var n,i=2<arguments.length&&void 0!==i?i:{},r=i.allowMultipleAds,a=i.followAdditionalWrappers,o=e.childNodes;for(n in o){var l=o[n];if(-1!==["Wrapper","InLine"].indexOf(l.nodeName)&&("Wrapper"!==l.nodeName||!1!==a)){if(m.copyNodeAttribute("id",e,l),m.copyNodeAttribute("sequence",e,l),m.copyNodeAttribute("adType",e,l),"Wrapper"===l.nodeName)return{ad:function(e,t){var n=Ce(e,t),t=e.getAttribute("followAdditionalWrappers"),i=e.getAttribute("allowMultipleAds"),r=e.getAttribute("fallbackOnNoAd"),t=(n.followAdditionalWrappers=!t||m.parseBoolean(t),n.allowMultipleAds=!!i&&m.parseBoolean(i),n.fallbackOnNoAd=r?m.parseBoolean(r):null,m.childByName(e,"VASTAdTagURI"));if(t?n.nextWrapperURL=m.parseNodeText(t):(t=m.childByName(e,"VASTAdTagURL"))&&(n.nextWrapperURL=m.parseNodeText(m.childByName(t,"URL"))),n.creatives.forEach(function(i){if(-1!==["linear","nonlinear"].indexOf(i.type)){if(i.trackingEvents){n.trackingEvents||(n.trackingEvents={}),n.trackingEvents[i.type]||(n.trackingEvents[i.type]={});for(var e in i.trackingEvents)!function(t){var e=i.trackingEvents[t];Array.isArray(n.trackingEvents[i.type][t])||(n.trackingEvents[i.type][t]=[]),e.forEach(function(e){n.trackingEvents[i.type][t].push(e)})}(e)}i.videoClickTrackingURLTemplates&&(Array.isArray(n.videoClickTrackingURLTemplates)||(n.videoClickTrackingURLTemplates=[]),i.videoClickTrackingURLTemplates.forEach(function(e){n.videoClickTrackingURLTemplates.push(e)})),i.videoClickThroughURLTemplate&&(n.videoClickThroughURLTemplate=i.videoClickThroughURLTemplate),i.videoCustomClickURLTemplates&&(Array.isArray(n.videoCustomClickURLTemplates)||(n.videoCustomClickURLTemplates=[]),i.videoCustomClickURLTemplates.forEach(function(e){n.videoCustomClickURLTemplates.push(e)}))}}),n.nextWrapperURL)return n}(l,t),type:"WRAPPER"};if("InLine"===l.nodeName)return{ad:function(e,t){return!1===(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).allowMultipleAds&&e.getAttribute("sequence")?null:Ce(e,t)}(l,t,{allowMultipleAds:r}),type:"INLINE"}}}}function Ce(e,t){var i=[];t&&B.verifyRequiredValues(e,t);var n,r,a=e.childNodes,o=function(e){e=0<arguments.length&&void 0!==e?e:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(m.parseAttributes(e));for(r in a){var l=a[r];switch(l.nodeName){case"Error":o.errorURLTemplates.push(m.parseNodeText(l));break;case"Impression":o.impressionURLTemplates.push({id:l.getAttribute("id")||null,url:m.parseNodeText(l)});break;case"Creatives":o.creatives=ye(m.childrenByName(l,"Creative"));break;case"Extensions":var s=m.childrenByName(l,"Extension");o.extensions=Te(s),o.adVerifications.length||(i=function(e){var t=null,i=[];return e.some(function(e){return t=m.childByName(e,"AdVerifications")}),i=t?we(m.childrenByName(t,"Verification")):i}(s));break;case"AdVerifications":o.adVerifications=we(m.childrenByName(l,"Verification"));break;case"AdSystem":o.system={value:m.parseNodeText(l),version:l.getAttribute("version")||null};break;case"AdTitle":o.title=m.parseNodeText(l);break;case"AdServingId":o.adServingId=m.parseNodeText(l);break;case"Category":o.categories.push({authority:l.getAttribute("authority")||null,value:m.parseNodeText(l)});break;case"Expires":o.expires=parseInt(m.parseNodeText(l),10);break;case"ViewableImpression":o.viewableImpression.push((void 0,s=function(e,t){t=m.parseNodeText(t);return t&&e.push(t),e},{id:(n=l).getAttribute("id")||null,viewable:m.childrenByName(n,"Viewable").reduce(s,[]),notViewable:m.childrenByName(n,"NotViewable").reduce(s,[]),viewUndetermined:m.childrenByName(n,"ViewUndetermined").reduce(s,[])}));break;case"Description":o.description=m.parseNodeText(l);break;case"Advertiser":o.advertiser={id:l.getAttribute("id")||null,value:m.parseNodeText(l)};break;case"Pricing":o.pricing={value:m.parseNodeText(l),model:l.getAttribute("model")||null,currency:l.getAttribute("currency")||null};break;case"Survey":o.survey={value:m.parseNodeText(l),type:l.getAttribute("type")||null};break;case"BlockedAdCategories":o.blockedAdCategories.push({authority:l.getAttribute("authority")||null,value:m.parseNodeText(l)})}}return i.length&&(o.adVerifications=o.adVerifications.concat(i)),o}function we(e){var a=[];return e.forEach(function(e){var t,i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},n=e.childNodes;for(t in m.assignAttributes(e.attributes,i),n){var r=n[t];switch(r.nodeName){case"JavaScriptResource":case"ExecutableResource":i.resource=m.parseNodeText(r),m.assignAttributes(r.attributes,i);break;case"VerificationParameters":i.parameters=m.parseNodeText(r)}}e=m.childByName(e,"TrackingEvents");e&&m.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=m.parseNodeText(e);t&&e&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(e))}),a.push(i)}),a}function Ee(){u(this,Ee),this._handlers=[]}function xe(){try{var e=new pt.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function p(e,t,i){var n=i?408:e.status,i=(i?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms ("):"XHRURLHandler: ".concat(e.statusText," (")).concat(n,")");t(new Error(i),null,{statusCode:n})}function Ie(e,t){!e||!t||e<=0||t<=0||(n=(n*i+8*e/t)/++i)}function h(e,t,i){var n,r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];for(r in u(this,h),(n=V.call(this)).ad=t,n.creative=i,n.variation=a,n.muted=o,n.impressed=!1,n.skippable=!1,n.trackingEvents={},n.lastPercentage=0,n._alreadyTriggeredQuartiles={},n.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],n.creative.trackingEvents){var l=n.creative.trackingEvents[r];n.trackingEvents[r]=l.slice(0)}return"linear"!==n.creative.type?n._initVariationTracking():n._initLinearTracking(),e&&n.on("start",function(){e.lastSuccessfulAd=Date.now()}),n}function Ue(e,t,i){u(this,Ue),this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=t||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new z,this.storage=i||new Q,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}function Ne(){u(this,Ne),this.storage=this.initStorage()}function v(){var e;return u(this,v),(e=F.call(this)).remainingAds=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}function g(e){pt.console&&console.log(e)}if(o.options)try{d=ht.obj.merge(Y,o.options||{})}catch(e){d=ht.mergeOptions(Y,o.options||{})}else d=Y;let k,Se=0,T=!1;f.liveTime=function(){return Se};function Pe(){let e=!1;(e=y()?!0:e)?(Se+=.25,k=setTimeout(Pe,250)):(clearTimeout(k),T=!1)}function y(){try{return f.duration()===1/0?1:"8"===ht.browser.IOS_VERSION&&0===f.duration()}catch(e){}}f.on("pause",function(){clearTimeout(k),T=!1}),f.on("playing",function(){let e=!1;(e=y()?!0:e)&&!0!==f.isOffline&&!0!==T&&(T=!0,k=setTimeout(Pe,500))});var b=function(e,t,i,n){var r=document.createElement(e);return void 0!==t&&""!==t&&(r.className=t),void 0!==i&&Object.entries(i).forEach(e=>{var[e,t]=e;r.setAttribute(e,t)}),void 0!==n&&""!==n&&(r.innerHTML=n),r},A=b("style"),R=(A.innerHTML=".nv-skip-icon{margin-top:-4px;display:inline-block;fill:#fff;width:20px;height:25px;vertical-align:middle;margin-left:5px}.vjs-touch-inactive .nv-nonlinear{bottom:10px!important}.vjs-user-inactive:not(.vjs-paused) .nv-nonlinear{bottom:10px!important}.nv-recall:hover{opacity:1}.nv-triangle{width:0px;height:0px;border-style:solid;border-width:0 6px 8px 6px;border-color:transparent transparent #444 transparent;transform: rotate(0deg);position:absolute;top:2px;left:6px;}.nv-recall{opacity:.7;position:absolute;width:26px;height:14px;box-shadow:1px 1px 1px rgba(0,0,0,.7);background:rgba(255,255,255,.7);border:solid 1px rgba(255,255,255,.7);border-bottom: 0;bottom:0;left:50%;margin-left:-13px;cursor:pointer;}.nonlinear-close{position:absolute;right:5px;top:5px;z-index:5;width:25px;height:25px;cursor:pointer;background-color:#e5e5e5;border-style:outset;border-width:1px;line-height:24px;color:#222;font-size:24px}.nv-nonlinear{bottom:60px;max-width:95%;min-width:320px;position:absolute;background:transparent;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;cursor:pointer;text-align:center;border:0;opacity:0;-webkit-transition:bottom .5s ease,opacity .5s ease;transition:bottom .5s ease,opacity .5s ease;z-index:21474836}.nonlinear-close-narrow{top:auto;right:auto;bottom:5px;left:50%;width:80px;marginLeft:-40px;fontSize:14px;fontWeight:bold}.nv-visible{opacity:1;pointer-events:auto}.vjs-ad-playing .nv-nonlinear{opacity:0!important;pointer-events:none!important}.nv-nonlinear img(width:100%;height:auto)nv-nonlinear-close{}.nv-blocker{position:absolute;top:0;left:0;bottom:0;right:0;cursor:pointer}.nv-icon-bottom{bottom:80px}.nv-icon{transition:bottom .3s ease;animation: show 600ms ease forwards;opacity:0;transform: rotateX(-90deg);z-index:21474}@keyframes show {100%{opacity:1;transform:none}}.nv-skip{position:absolute;right:10px;bottom:70px;background: rgba(0,0,0,.66);color:#fff;font-family:Arial;font-size:16px;border: solid 2px transparent;border-radius:18px;padding:0 10px;line-height:35px}.nv-skip-active{cursor:pointer;pointer-events:auto}.nv-skip-active:hover{color:#fff;border-color:#999}.nv-nonlinear img {width:100%;height:auto}",f.el_.insertBefore(A,f.controlBar.el()),b("div","vjs-skin"));f.el_.appendChild(R);let L=getComputedStyle(R,":before").getPropertyValue("content");L=L.replace(/^["'](.+(?=["']$))["']$/,"$1");f.one("playing",function(){f.bigPlayButton.el_.style.display="none"}),S();var C=[],w={},E={lastPod:!0,preroll:!1,vmap:[],adStarted:!1,currentAdId:0,firstPlay:!1,adPlaying:!1,muted:!1,trackingEvents:[],skin:L,bottomIcons:[],snapshot:null,linear:[],nonlinear:[],companions:[],blocker:null,skip:-1,skipButton:null,currentPod:0,labelStyle:null,divLabel:null};function Me(e,t){let i=-1,n=-1,r=null;"linear"!==t&&"icon"!=t||(r=E.linear[E.currentPod-1]),"nonlinear"===t&&(r=E.nonlinear),null!==(r="companion"===t?E.companion:r)&&(n=function(t){let i="";if(t.universalAdIds)if(1<t.universalAdIds.length){for(let e=0;e<t.universalAdIds.length;e++)t.universalAdIds[e].idRegistry&&(i+=t.universalAdIds[e].idRegistry+" "+t.universalAdIds[e].value+",");i=i.slice(0,-1)}else 0<t.universalAdIds.length&&(i=t.universalAdIds[0].idRegistry+" "+t.universalAdIds[0].value);return i=""===i?-1:encodeURIComponent(i)}(r),r.adServingId)&&(i=r.adServingId);var a,o,l=new Date,s=l.getTime(),c=l.getTimezoneOffset()/60,l=6e4*l.getTimezoneOffset(),s=encodeURIComponent(new Date(s-l).toISOString().slice(0,-1)+(0<c?"-":"+")+("0"+c).slice(-2)),l=Math.random().toString().slice(2,10),c=encodeURIComponent(navigator.userAgent),u=encodeURIComponent(pt.location.hostname),d=encodeURIComponent("number"==typeof(a=f.currentTime())?(o=function(e,t){return("000"+e).slice(-1*t)},a=parseFloat(a).toFixed(3),d=Math.floor(a/60/60),h=Math.floor(a/60)%60,m=Math.floor(a-60*h),a=a.slice(-3),o(d,2)+":"+o(h,2)+":"+o(m,2)+"."+o(a,3)):-1);let p="-1";f.muted()&&(p+="muted"),f.isFullscreen()&&(p+=",fullscreen");var h=parseInt(f.el().offsetWidth)+","+parseInt(f.el().offsetHeight),m=encodeURIComponent(pt.location.href);return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("[CACHEBUSTING]",l)).replace("[TIMESTAMP]",s)).replace("[DEVICEUA]",c)).replace("[DOMAIN]",u)).replace("[PLAYERSTATE]",p)).replace("[PLAYERSIZE]",h)).replace("[CONTENTPLAYHEAD]",d)).replace("[ADPLAYHEAD]",d)).replace("[MEDIAPLAYHEAD]",d)).replace("[PAGEURL]",m)).replace("[ADSERVINGID]",i)).replace("[ADTYPE]",t)).replace("[UNIVERSALADID]",n)}ht.vastkey=!0,f.vast.request=function(e){f.off("timeupdate",We),C=[],w={},E.adPlaying&&O(),E={preroll:!1,vmap:[],adStarted:!1,currentAdId:0,firstPlay:!1,adPlaying:!1,muted:!1,trackingEvents:[],skin:L,bottomIcons:[],snapshot:null,linear:[],nonlinear:[],companions:[],blocker:null,skip:-1,skipButton:null,currentPod:0,labelStyle:null,divLabel:null},S(),o=e,je()},f.vast.reset=function(){if(E.preroll=!1,E.adStarted=!1,E.currentAdId=0,E.adPlaying=!1,E.skip=-1,E.currentPod=0,E.adPlaying&&O(),S(),0<C.length)for(let e=0;e<C.length;e++)C[e].used=!1;0<C.length&&0===C[0].timeOffset&&(E.outstream?(C[0].used=!0,E.preroll=!0,setTimeout(function(){N(0)},10)):f.one("playing",function(){C[0].used=!0,setTimeout(function(){N(0)},10)}))};function Oe(e){let t='<VAST version="4.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.iab.com/VAST">',i;if(t+='<Ad><InLine><AdSystem version="4.0">IAB TechLab</AdSystem>',e.trackingURL&&e.adId&&(t+='<Impression id="Impression-ID">'+e.trackingURL+"?action=impression&amp;id="+e.adId+"</Impression>"),e.trackingURL&&e.adId&&(t+="<Error>"+e.trackingURL+"?action=error&amp;id="+e.adId+"</Error>"),t=(t+="<Creatives>")+(e.adId?'<Creative adId="'+e.adId+'">':"<Creative>"),e.skip?(i=parseInt(e.skip),t+=0<i&&i<60?'<Linear skipoffset="00:00:'+i+'">':0<=i?'<Linear skipoffset="00:00:0'+i+'">':"<Linear>"):t+="<Linear>",t=(t=e.trackingURL&&e.adId?(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t+="<TrackingEvents>")+'<Tracking event="start">'+e.trackingURL+"?action=start&amp;id="+e.adId+"</Tracking>")+'<Tracking event="firstQuartile">'+e.trackingURL+"?action=firstQuartile&amp;id="+e.adId+"</Tracking>")+'<Tracking event="midpoint">'+e.trackingURL+"?action=midpoint&amp;id="+e.adId+"</Tracking>")+'<Tracking event="thirdQuartile">'+e.trackingURL+"?action=thirdQuartile&amp;id="+e.adId+"</Tracking>")+'<Tracking event="complete">'+e.trackingURL+"?action=complete&amp;id="+e.adId+"</Tracking>")+'<Tracking event="pause">'+e.trackingURL+"?action=pause&amp;id="+e.adId+"</Tracking>")+'<Tracking event="resume">'+e.trackingURL+"?action=resume&amp;id="+e.adId+"</Tracking>")+'<Tracking event="skip">'+e.trackingURL+"?action=skip&amp;id="+e.adId+"</Tracking>")+'<Tracking event="mute">'+e.trackingURL+"?action=mute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="unmute">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="fullscreen">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="exitFullscreen">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>")+'<Tracking event="clickthrough">'+e.trackingURL+"?action=clickthrough&amp;id="+e.adId+"</Tracking></TrackingEvents>":t)+(e.duration?"<Duration>"+e.duration+"</Duration>":"<Duration>00:00:00</Duration>")+"<MediaFiles>",Array.isArray(e.media))for(var n=0;n<e.media.length;n++)t=(t+='<MediaFile type="'+e.media[n].type+'" scalable="1" maintainAspectRatio="1">')+"<![CDATA["+e.media[n].src+"]]></MediaFile>";else t=(t+='<MediaFile type="'+e.media.type+'" scalable="1" maintainAspectRatio="1">')+"<![CDATA["+e.media.src+"]]></MediaFile>";return t=(t=(t=(t+="</MediaFiles>")+"<VideoClicks>"+'<ClickThrough id="blog">')+("<![CDATA["+e.clickthrough+"]]>"))+"</ClickThrough>"+"</VideoClicks>",t=(t=e.icon?(t=(t=(t=(t+="<Icons>")+'<Icon program="AdChoices" height="0" width="0" xPosition="10" yPosition="bottom"><StaticResource>')+"<![CDATA["+e.icon+"]]></StaticResource>")+"<IconClicks><IconClickThrough><![CDATA["+e.clickthrough+" ]]></IconClickThrough></IconClicks>")+"</Icon></Icons>":t)+"</Linear>"+"</Creative></Creatives></InLine></Ad></VAST>"}function x(e){setTimeout(function(){N(e)},20)}f.on("ended",function(){if(!E.fin&&f.el().className.indexOf("vjs-ad-playing")<0){S();for(let e=0;e<C.length;e++)"end"===C[e].timeOffset&&!0!==C[e].used&&(E.adPlaying=!0,C[e].used=!0,x(e))}});function I(e){var t={withCredentials:d.withCredentials,timeout:d.timeout,wrapperLimit:d.wrapperLimit,resolveAll:d.resolveAll,allowMultipleAds:d.allowMultipleAds,allowMultipleAdPods:d.allowMultipleAdPods,cancelAdPods:d.cancelAdPods,clickthroughMethod:d.clickthroughMethod,closeButton:d.closeNonlinearButton,closeTheme:d.closeNonlinearTheme,autoClose:d.autoClose,outstreamClose:d.outstreamClose,nonlinearRecall:!1,tagURL:null,fallbackURL:null,tagXML:null,used:!1,timeOffset:0};return e.options&&(e.options.withCredentials&&(t.withCredentials=e.options.withCredentials),e.options.timeout&&(t.timeout=e.options.timeout),e.options.wrapperLimit&&(t.wrapperLimit=e.options.wrapperLimit),e.options.resolveAll&&(t.resolveAll=e.options.resolveAll),e.allowMultipleAds&&(t.allowMultipleAds=e.options.allowMultipleAds),e.allowAdPods&&(t.allowAdPods=e.options.allowAdPods),e.options.cancelAdPods&&(t.cancelAdPods=e.options.cancelAdPods),e.options.clickthroughMethod&&(t.clickthroughMethod=e.options.clickthroughMethod),e.options.closeButton&&(t.closeButton=e.options.closeButton),e.options.closeTheme&&(t.closeTheme=e.options.closeTheme),e.options.autoClose&&(t.autoClose=e.options.autoClose),e.options.outstreamClose&&(t.outstreamClose=e.options.outstreamClose),e.options.nonlinearRecall&&(custom.options.nonlinearRecall=e.options.nonlinearRecall),e.options.closeNonlinearTheme)&&(t.closeNonlinearTheme=e.options.closeNonlinearTheme),e.withCredentials&&(t.withCredentials=e.withCredentials),e.timeout&&(t.timeout=e.timeout),e.wrapperLimit&&(t.wrapperLimit=e.wrapperLimit),e.allowMultipleAds&&(t.allowMultipleAds=e.allowMultipleAds),e.allowAdPods&&(t.allowAdPods=e.allowAdPods),e.cancelAdPods&&(t.cancelAdPods=e.cancelAdPods),e.clickthroughMethod&&(t.clickthroughMethod=e.clickthroughMethod),e.closeButton&&(t.closeButton=e.closeButton),e.closeTheme&&(t.closeTheme=e.closeTheme),e.autoClose&&(t.autoClose=e.autoClose),e.outstreamClose&&(t.outstreamClose=e.outstreamClose),e.nonlinearRecall&&(t.nonlinearRecall=e.nonlinearRecall),e.closeNonlinearTheme&&(t.closeNonlinearTheme=e.closeNonlinearTheme),e.tagURL&&(t.tagURL=e.tagURL),e.fallbackURL&&(t.fallbackURL=e.fallbackURL),e.xml&&(t.tagXML=e.xml),e.timeOffset&&(t.timeOffset=e.timeOffset),t}const De=function(){if(o.ads){var e=[];Array.isArray(o.ads)?e=o.ads:e.push(o.ads);for(var t=0;t<e.length;t++){var i,n,r=e[t];r.tagURL?(i=I(r),C.push(i)):r.media&&r.clickthrough&&(i=Oe(r),n=(new DOMParser).parseFromString(i,"text/xml"),r.xml=n,n=I(r),C.push(n))}}else{var a;let e=null,t=[];o.tagURL?(t=o.tagURL,o.fallbackURL&&(fallbackURL=o.fallbackURL),o.config&&(o.config.withCredentials&&(withCredentials=o.config.withCredentials),o.config.clickthroughMethod&&(clickthroughMethod=o.config.clickthroughMethod),o.config.timeout&&(timeout=o.config.timeout),o.config.resolveAll,o.config.wrapperLimit&&(wrapperLimit=o.config.wrapperLimit),o.config.allowMultipleAds&&(allowMultipleAds=!0),void 0!==o.config.closeNonlinearButton&&(closeButton=o.config.closeNonlinearButton),o.config.autoClose&&(autoClose=o.config.autoClose),void 0!==o.config.brandText&&(brandText=d.brandText=o.config.brandText),void 0!==o.config.brandUrl&&(brandUrl=d.brandUrl=o.config.brandUrl),o.config.outstreamClose&&(outstreamClose=o.config.outstreamClose),void 0!==o.config.outstreamCloseTheme&&(outstreamCloseTheme=alist.config.outstreamCloseTheme),o.config.closeNonlinearTheme&&(closeTheme=o.config.closeNonlinearTheme),o.config.nonlinearRecall)&&(nonlinearRecall=o.config.nonlinearRecall),o.withCredentials&&(withCredentials=o.withCredentials),o.autoplay&&(d.autoplay=o.autoplay),ad.tagURL=t,e=I(o)):o.tagXML?((t=[]).push(o.tagXML),e=op(o),e={tagXML:o.tagXML,used:!1,timeOffset:0,autoClose:autoClose,brandText:brandText,brandUrl:brandUrl,outstreamCloseTheme:outstreamCloseTheme,outstreamClose:outstreamClose,closeButton:closeButton,nonlinearRecall:nonlinearRecall,closeTheme:closeTheme,clickthroughMethod:clickthroughMethod}):o.media&&o.clickthrough&&(o.config&&(o.config.clickthroughMethod&&(clickthroughMethod=o.config.clickthroughMethod),o.config.autoClose&&(autoClose=o.config.autoClose),o.config.outstreamClose&&(outstreamClose=o.config.outstreamClose),void 0!==o.config.brandText&&(brandText=d.brandText=o.config.brandText),void 0!==o.config.brandUrl&&(brandUrl=d.brandUrl=o.config.brandUrl),void 0!==o.config.outstreamCloseTheme)&&(outstreamCloseTheme=o.config.outstreamCloseTheme),a=Oe(o),a=(new DOMParser).parseFromString(a,"text/xml"),I(o).tagXML=a,C.push,C.push({used:!1,tagXML:a,autoClose:autoClose,timeOffset:0,brandText:brandText,brandUrl:brandUrl,outstreamCloseTheme:outstreamCloseTheme,outstreamClose:outstreamClose,nonlinearRecall:nonlinearRecall,closeButton:closeButton,closeTheme:closeTheme,clickthroughMethod:clickthroughMethod})),e&&C.push(e)}};function Be(s){let t;var e=s.tagURL;let i=d.timeout,n=(s.timeout&&(i=s.timeout),d.withCredentials);s.withCredentials&&(n=s.withCredentials),"https:"===pt.location.protocol&&0===e.indexOf("http://")&&g("XHR URLHandler: Cannot go from HTTPS to HTTP.");try{const a=function(){try{var e=new pt.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}();a.open("GET",e),a.timeout=i,a.withCredentials=n,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.onload=()=>{var e=a;if(200===e.status)try{"VMAP"!==(t=e.responseXML).documentElement.localName?U(s):function(e){var t,i=[];for(t in e.documentElement.childNodes){var n=e.documentElement.childNodes[t];"AdBreak"==n.localName&&(n=function(e){var t,i={};for(t in i.timeOffset=e.getAttribute("timeOffset"),i.breakType=e.getAttribute("breakType"),i.breakId=e.getAttribute("breakId"),i.adSource=null,e.childNodes){var n=e.childNodes[t];"AdSource"===n.localName&&(n=function(e){var t,i={};for(t in i.id=e.getAttribute("id"),i.allowMultipleAds=e.getAttribute("allowMultipleAds"),i.followRedirects=e.getAttribute("followRedirects"),i.vastAdData=null,i.adTagURI=null,i.customData=null,e.childNodes){var n=e.childNodes[t];switch(n.localName){case"AdTagURI":i.adTagURI={templateType:n.getAttribute("templateType"),uri:(n.textContent||n.text||"").trim()},i.adTagURI=(n.textContent||n.text||"").trim();break;case"VASTAdData":for(i.vastAdData=n.firstChild;i.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":i.customData=n}}return i}(n),i.adSource=n.adTagURI,i.adId=n.id)}return i}(n),i.push(n))}var r=[];if(0<i.length){for(var a,o,l=0;l<i.length;l++)i[l].adSource&&!i[l].adSource.uri&&i[l].timeOffset&&("string"==typeof(a="string"==typeof(a=i[l].timeOffset)&&"start"!==a.toLowerCase()&&"end"!==a.toLowerCase()?function(e){var[e=0,t=0,i=0]=e.split(":").reverse();return 3600*+i+60*+t+ +e}(a):a)&&"start"===(a=a.toLowerCase())&&(a=0),o=i[l].adSource,o={tagURL:o,id:i[l].adId,timeOffset:a},s.withCredentials&&(o.widthCredentials=s.withCredentials),s.timeout&&(o.timeout=s.timeout),s.resolveAll&&(o.resolveAll=s.resolveAll),s.wrapperLimit&&(o.wrapperLimit=s.wrapperLimit),s.allowMultipleAds&&(o.allowMultipleAds=s.allowMultipleAds),s.clickthroughMethod&&(o.clickthroughMethod=s.clickthroughMethod),s.closeButton&&(o.closeButton=s.closeButton),s.closeTheme&&(o.closeTheme=s.closeTheme),s.nonlinearRecall&&(o.nonlinearRecall=s.nonlinearRecall),s.autoClose&&(o.autoClose=s.autoClose),s.outstreamClose&&(o.outstreamClose=s.outstreamClose),s.brandText&&(o.brandText=d.brandText=s.brandText),s.brandUrl&&(o.brandUrl=d.brandUrl=s.brandUrl),s.outstreamCloseTheme&&(o.outstreamCloseTheme=s.outstreamCloseTheme),r.push(o));U(r)}}(t)}catch(e){U(s)}else r(0,!1)},a.onerror=()=>r(a,!1),a.onabort=()=>r(a,!1),a.ontimeout=()=>r(a,!0),a.send()}catch(e){U(s)}function r(e,t){t&&g("XHR URLHandler: Request timed out after "+d.timeout+" +ms."),U(s)}}const U=function(e){if(0<e.length){let t=null;if(o.config&&(t=o.config),(o=[]).ads=e,t)for(let e=0;e<o.ads.length;e++)o.ads[e].config=t}else{o={};var t=[];t.push(e),o.ads=t}De(),0<C.length&&(!0!==d.allowMultipleAds&&((e=[]).push(C[0]),C=e),0===C[0].timeOffset)&&(E.outstream?C[0].used||(C[0].used=!0,E.adPlaying=!0,E.preroll=!0,setTimeout(function(){N(0)},10)):f.paused()?f.one("playing",function(){C[0].used||(E.adPlaying=!0,C[0].used=!0,setTimeout(function(){N(0)},10))}):C[0].used||(E.adPlaying=!0,C[0].used=!0,setTimeout(function(){N(0)},10)))};function je(){var e;f.on("timeupdate",We),o.tagURL?Be(o):(De(),0<C.length&&(!0!==d.allowMultipleAds&&((e=[]).push(C[0]),C=e),0===C[0].timeOffset)&&(E.outstream?(C[0].used=!0,E.preroll=!0,setTimeout(function(){N(0)},10)):f.one("playing",function(){C[0].used=!0,setTimeout(function(){N(0)},10)})))}je();function Ve(r,a){var e,t,i;function n(e){return 1<e.readyState()||void 0===e.seekable()||0<e.seekable().length}r.src()===a.src?(r.play(),E.snapshot=null):(e=r.el().querySelector(".vjs-tech"),t=20,"style"in a&&e.setAttribute("style",a.style||""),r.src(a.currentSource),Fe(!1),a.ended?(r.currentTime(a.duration),r.play()):(r.one("playing",function(){for(var e,t=r.textTracks?r.textTracks():[],i=0;i<t.length;i++){var n=t[i];e=a.suppressedTracks[i],n.mode=e.mode}}),r.one("canplay",function e(){r.play();if(!n(r)&&t--)setTimeout(e,50);else try{r.currentTime()!==a.currentTime?(a.playing&&r.one("seeked",function(){a.ended||r.play()}),0<r.seekable().length&&y()?r.one("playing",function(){r.currentTime(r.seekable().end(0)+a.currentTime)}):r.currentTime(a.currentTime)):a.playing&&r.play(),E.snapshot=null}catch(e){ht.log.warn("Failed to resume the content after an advertisement",e)}}),i=setTimeout(function(){r.trigger("canplay")},1e3),r.one("canplay",function(){clearTimeout(i)})))}const Fe=function(e){var t=f.el().querySelector(".vjs-replay-button"),i=f.el().querySelector(".vjs-sharing-overlay"),n=f.el().querySelector(".vjs-grid"),r=f.el().querySelector(".vjs-cend");function a(e,t){t?(e.style.visibility="hidden",e.style.pointerEvents="none"):e.removeAttribute("style")}t&&a(t,e),i&&a(i,e),n&&a(n,e),r&&a(r,e)},He=function(e){var t=e.el().querySelector(".vjs-tech"),i=e.textTracks?e.textTracks():[],n=[],r={ended:e.ended(),src:e.currentSrc(),currentTime:e.currentTime(),duration:e.duration(),currentSource:e.currentSource(),type:e.currentType(),playing:!e.paused(),suppressedTracks:[]};r.duration&&r.duration-r.currentTime<1&&(r.ended=!0),r.ended&&(r.currentTime=e.duration()+1),r.duration&&r.duration-r.currentTime<1&&(r.ended=!0);for(let e=0;e<i.length;e++){var a=i[e];n.push({track:a,mode:a.mode}),a.mode="disabled"}return r.suppressedTracks=n,0<e.seekable().length&&y()&&(r.currentTime=e.currentTime()-e.seekable().end(0)),t&&(r.nativePoster=t.poster,r.style=t.getAttribute("style")),Fe(!0),r};const N=function t(i){let n=C[i],r=(E.currentAdId=i,[]);var e;n.tagXML&&(new G.VASTParser).parseVAST(n.tagXML).then(e=>{(r=e).clickthroughMethod=n.clickthroughMethod,r.closeButton=n.closeButton,r.closeTheme=n.closeTheme,r.nonlinearRecall=n.nonlinearRecall,qe(r)}).catch(e=>{g(e.toString()),g("Ad cancelled")}),n.tagURL&&(e={withCredentials:n.withCredentials,timeout:d.timeout,resolveAll:!0,wrapperLimit:d.wrapperLimit,allowMultipleAds:!0},(new G.VASTParser).getAndParseVAST(n.tagURL,e).then(e=>{(r=e).clickthroughMethod=n.clickthroughMethod,r.closeButton=n.closeButton,r.closeTheme=n.closeTheme,r.nonlinearRecall=n.nonlinearRecall,r.autoClose=n.autoClose,r.brandText=n.brandText,r.brandUrl=n.brandUrl,r.outstreamCloseTheme=n.outstreamCloseTheme,r.oustreamClosePosition=n.oustreamClosePosition,r&&qe(r)}).catch(e=>{n.fallbackURL&&(n.tagURL=n.fallbackURL,n.fallbackURL=null,t(i)),g(e.toString()),g("Ad cancelled")}))};function We(){if(!0!==E.adPlaying){let i=f.currentTime();y()&&(i=f.liveTime());for(let t=0;t<C.length;t++){let e=C[t].timeOffset;var n=e.toString();if(n.includes("%")){if(y())return;e=f.duration()*parseInt(n)/100,e=parseInt(e)}if(d.skipTimer,!0!==C[t].used&&"end"!==C[t].timeOffset&&i>=e){E.currentAdId=t,E.adStarted=!0,C[t].used=!0,x(t);break}}}}function qe(o){E.currentAd=o,f.$(".vjs-tech").hasAttribute("outstream")&&(f.$(".vjs-tech").hasAttribute("outstreamvisit")&&f.el_.classList.add("vjs-set-visit"),d.mode="outstream",E.clickthrough="",f.muted(!0),f.el_.classList.contains("vjs-set-visit")||f.el_.classList.add("vjs-set-replay"));var t=o.ads,o=(t.length<1&&(g("Error. Empty VAST response."),g("Ad cancelled."),C[E.currentAdId].fallbackURL)&&(C[E.currentAdId].tagURL=C[E.currentAdId].fallbackURL,C[E.currentAdId].fallbackURL=null,N(E.currentAdId)),E.clickthrough=o.clickthroughMethod,E.closeButton=o.closeButton,E.closeButton=o.closeButton,E.closeTheme=o.closeTheme,E.nonlinearRecall=o.nonlinearRecall,d.mode);E.companions=[],E.linear=[],E.nonlinears=[];for(var i=0;i<t.length;i++)if(t[i].creatives)for(var n=0;n<t[i].creatives.length;n++){let e=!1;"linear"===t[i].creatives[n].type&&(t[i].impressionURLTemplates&&!e&&(e=!0,t[i].creatives[n].impressionURLTemplates=t[i].impressionURLTemplates),t[i].adServingId&&(t[i].creatives[n].adServingId=t[i].adServingId),E.linear.push(t[i].creatives[n])),"companion"==t[i].creatives[n].type&&(t[i].impressionURLTemplates&&!e&&(e=!0,t[i].creatives[n].impressionURLTemplates=t[i].impressionURLTemplates),t[i].adServingId&&(t[i].creatives[n].adServingId=t[i].adServingId),E.companions.push(t[i].creatives[n])),"nonlinear"===t[i].creatives[n].type&&(t[i].impressionURLTemplates&&!e&&(e=!0,t[i].creatives[n].impressionURLTemplates=t[i].impressionURLTemplates),t[i].adServingId&&(t[i].creatives[n].adServingId=t[i].adServingId),E.nonlinears.push(t[i].creatives[n]))}if("outstream"==o&&1<E.linear.length&&(E.linear.length=1),0<E.linear.length?(!0!==d.allowAdPods&&(E.linear.length=1),Xe(E.linear[0])):O(),0<E.nonlinears.length&&!0!==E.outstream){o=E.nonlinears[0];if(!E.outstream&&"outstream"!=d.mode&&(E.nonlinear=o).variations){var l=o,o=0;if(S(),E.nonlinear=l,E.nonlinearId=void 0,l.adId&&(E.nonlinearId=l.adId),"nonLinearAd"===l.variations[o].adType){let i=l.variations[o];var s,o="",c="";i.htmlResource?(o=i.htmlResource,c="html"):i.iframeResource?(o=i.iframeResource,contentType="iframe",c="iframe"):i.staticResource&&(o='<img style="cursor:pointer" src="'+i.staticResource+'"/>',c="static"),S();let t=b("div","nv-nonlinear"),n=b("div"),e=(i.width&&(l=t.style.width=P(i.width)),i.height&&(l=t.style.height="auto"),i.expandedWidth&&(t.style.maxWidth=P(i.expandedWidth)),i.expandedHeight&&(t.style.maxHeight=P(i.expandedHeight)),i.nonlinearClickThroughURLTemplate&&"static"==c&&(n.onclick=n.ontouchend=function(e){var t;e.stopPropagation(),pt.open(i.nonlinearClickThroughURLTemplate,"_blank"),i.nonlinearClickTrackingURLTemplates&&(t=i.nonlinearClickTrackingURLTemplates).forEach(function(){t.url&&M("clickthrough",t.url,"nonlinear")})}),b("div","nonlinear-close")),r=(i.minSuggestedDuration&&(e.className="nonlinear-close vjs-hidden"),e.setAttribute("role","button"),e.innerHTML="&times;","dark"===E.closeTheme&&(e.style.backgroundColor="#222",e.style.color="#e5e5e5",e.style.borderColor="#777",e.style.paddingLeft="2px"),t.style.bottom=ct()+"px",null);f.on("playerresize",ze),"iframe"===c?((s=b("iframe")).src=iframeResource,s.scrolling="no",s.style.width="100%",s.style.height="100%",s.style.border="none",s.style.overflow="hidden",s.appendChild(o),n.innerHTML=o,s.appendChild(n),t.appendChild(s)):(n.innerHTML=o,E.closeButton&&"static"==c&&n.appendChild(e),t.appendChild(n),E.nonlinearRecall&&"static"==c&&((r=b("div","nv-recall vjs-hidden")).setAttribute("role","button"),r.innerHTML='<div class="nv-triangle"></div>',t.appendChild(r))),r&&"static"==c&&(r.onclick=r.ontouchend=function(e){e.preventDefault(),e.stopImmediatePropagation(),r.classList.add("vjs-hidden"),n.removeAttribute("style")}),e&&"static"==c&&(e.onclick=e.ontouchend=function(e){e.preventDefault(),e.stopImmediatePropagation(),r?(n.style.opacity=0,n.style.pointerEvents="none",r.className="nv-recall"):t.parentNode.removeChild(t)});let a=!1;function u(){E.adPlaying||a||(a=!0,setTimeout(function(){f.el().appendChild(t),ze(),l.impressionURLTemplates&&l.impressionURLTemplates.forEach(function(e){e.url&&M("impression",e.url,"nonlinear")}),t.className="nv-nonlinear nv-visible",E.preroll=!1},1e3),e&&"static"==c&&i.minSuggestedDuration&&setTimeout(function(){e.className="nonlinear-close"},1e3*i.minSuggestedDuration+.3),f.off("timeupdate",u))}!0!==f.paused?f.on("timeupdate",u):f.one("playing",function(){f.on("timeupdate",u)})}}}0<E.companions.length&&!0!==E.outstream&&_e(E.companions[0])}const _e=function(e){if(!E.outstream&&"outstream"!=d.mode&&(E.companion=e).variations)for(var t=0;t<e.variations.length;t++)!function(t,e){E.companionId=void 0,t.adId&&(E.companionId=t.adId);let l=!1;function i(r){if("companionAd"===t.variations[e].adType){let e=t.variations[r],i="",n="";var a;if(0<e.htmlResources.length?(i=e.htmlResources[0],n="html"):0<e.iframeResources.length?(i=e.iframeResources[0],n="iframe"):0<e.staticResources.length&&e.staticResources[0].creativeType&&["image/gif","image/jpeg","image/png"].indexOf(e.staticResources[0].creativeType)&&(i=e.altText?'<img style="width:100%;height:100%;cursor:pointer" alt="'+e.altText+'" src="'+e.staticResources[0].url+'"/>':'<img style="width:100%;height:100%;cursor:pointer" src="'+e.staticResources[0].url+'"/>',n="static"),""!==i){let t=null;if(e.adSlotId&&(r=document.getElementById(e.adSlotId))&&((t=r).innerHTML=""),!t){var o=document.querySelectorAll(".vjs-companion");if(o)for(let e=0;e<o.length;e++)if(!o[e].className.includes("vjs-companion-ex")){o[e].classList.add("vjs-companion-ex"),(t=o[e]).innerHTML="";break}}t&&""===t.innerHTML&&(r=b("div","asset"),"iframe"===n?((a=b("iframe")).src=i,a.scrolling="no",a.style.width="100%",a.style.height="100%",a.style.border="none",a.style.overflow="hidden",r.appendChild(a)):"static"!==n&&"html"!==n||(r.innerHTML=i),t.appendChild(r),e.assetWidth&&(r.style.width=P(e.assetWidth)),e.assetHeight&&(r.style.height=P(e.assetHeight)),e.width&&(t.style.width=P(e.width)),e.height&&(t.style.height=P(e.height)),e.expandedWidth&&(t.style.maxWidth=P(e.expandedWidth)),e.expandedHeight&&(t.style.maxHeight=P(e.expandedHeight)),e.companionClickThroughURLTemplate&&"static"==n&&(t.onclick=function(){f.pause(),pt.open(e.companionClickThroughURLTemplate,"_blank"),e.companionClickTrackingURLTemplates&&(e.companionClickTrackingURLTemplates.forEach(function(e){e.url&&M("clickthrough",e.url,"ompanion")}),e.trackingEvents)&&e.trackingEvents.clickthrough&&M("clickthrough",e.trackingEvents.clickthrough,"companion")}),e.TrackingEvents&&e.TrackingEvents.creativeView&&M("view",e.TrackingEvents.creativeView,"companion"),E.companion.impressionURLTemplates)&&!0!==l&&(l=!0,E.companion.impressionURLTemplates.forEach(function(e){e.url&&M("impression",e.url,"companion")}))}}}f.paused()?f.one("playing",function(){i(e)}):i(e)}(e,t)};function S(){var e=f.el().querySelector(".nv-nonlinear"),e=(e&&e.parentNode.removeChild(e),f.el().querySelector(".nv-recall"));e&&e.parentNode.removeChild(e);try{f.off("playerresize",ze)}catch(e){}try{E.minSuggestedDuration=0}catch(e){}try{E.suggestedStart=0}catch(e){}}const ze=function(){var e,t,i=f.el().offsetWidth,n=f.el().offsetHeight,r=f.el().querySelector(".nv-nonlinear");r&&(e=ct()+r.offsetHeight,(t=r.querySelector(".nonlinear-close"))&&(n<e?(t.classList.add("nonlinear-close-narrow"),t.innerHTML=f.localize("EXIT")):(t.classList.remove("nonlinear-close-narrow"),t.innerHTML="&times;")),r.offsetWidth>i?(r.style.opacity=0,r.style.pointerEvents="none"):(r.style.bottom=ct()+"px",r.style.opacity=1,r.style.pointerEvents="auto"))};function P(e){let t=null;var i=/^\d+(\.\d+)?%$/.test(e);return t=i||"auto"==e?e:Number(e)+"px"}function Xe(t){E.linearId=void 0,t.adId&&(E.linearId=t.adId),0==E.currentPod&&(E.currentPod=1),E.firstPause=!1,E.trackingEvents=[],w={};var e,i;if(E.linearEvents=[],Object.keys({start:null,pause:null,resume:null,firstQuartile:null,midpoint:null,thirdQuartile:null,mute:null,unmute:null,fullscreen:null,exitFullscreen:null,complete:null,skip:null,clickthrough:null}).forEach(e=>{t.trackingEvents[e]&&t.trackingEvents[e][0]&&(E.linearEvents[e]=t.trackingEvents[e][0])}),t.mediaFiles&&(t.closedCaptionFiles&&(t.captions=t.closedCaptionFiles),e=t.mediaFiles,i=f.el().getBoundingClientRect().width,e.sort(function(e,t){return Math.abs(i-e.width)-Math.abs(i-t.width)}),(e=e)[0].mimeType?t.mediatoplay={src:e[0].fileURL,type:e[0].mimeType}:t.mediatoplay={src:e[0].fileURL}),t.mediatoplay.src){var o=t;if(E.lastPod=!0,1<E.linear.length)for(let e=0;e<E.linear.length;e++)E.linear[e]===o&&e<E.linear.length-1&&(E.lastPod=!1);setTimeout(function(){E.adPlaying=!0;var t=f.controlBar.el().querySelector(".vjs-vast-label"),i=f.el().querySelector(".outstream-label");if(i&&(t=i),null===E.snapshot&&(E.snapshot=He(f)),o.used=!0,f.src(o.mediatoplay),f.play(),f.$(".vjs-tech").hasAttribute("outstreamvisit"))o.videoClickThroughURLTemplate.url&&nt(o.videoClickThroughURLTemplate.url);else if(o.videoClickThroughURLTemplate&&"link"!==E.clickthrough&&o.videoClickThroughURLTemplate.url&&nt(o.videoClickThroughURLTemplate.url),"link"===E.clickthrough){E.currentPod;var n=o.videoClickThroughURLTemplate.url;i=f.controlBar.el().querySelector(".vjs-vast-label");i&&i.classList.add("vjs-hidden");E.labelStyle||(E.labelStyle=b("style"),E.labelStyle.innerHTML=".nv-vast-div{position: absolute;font-size:12px;left:10px;top:-20px;color:#e5e5e5;text-shadow:1px 1px 1px #000;font-weight:normal}.nv-vast-div .nv-vast-timer{padding:0 10px 0 5px;}.nv-vast-div .nv-vast-pod {padding:0 5px;}.nv-vast-div .nv-label-icon{width:18px;height:16px;display:inline-block;padding:1px;margin-left:5px;opacity:.8;vertical-align:middle;margin-top:-2px}.nv-vast-div a{cursor: pointer;color: #e5e5e5;text-decoration:none}",f.controlBar.el().appendChild(E.labelStyle));E.divLabel||(E.divLabel=b("div","nv-vast-div"));i="";1<E.linear.length?(r=(r=(r=f.localize("Ad %%NUM%% of %%TOTAL%%")).replace("%%NUM%%",E.currentPod.toString())).replace("%%TOTAL%%",E.linear.length.toString()),i='<span class="nv-vast-pod">'+r+"</span>"):i+=f.localize("Ad");let e=n.replace(/^https?:\/\//,"");20<(e=(e=e.replace(/:\d+/,"")).replace("www.","")).length&&(e=e.substring(0,20)+"...");var r='<span class="nv-label-icon"><svg fill="#fff" height="100%" version="1.1" viewBox="0 0 48 48" width="100%"><path d="M0 0h48v48H0z" fill="none"></path><path d="M38 38H10V10h14V6H10c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V24h-4v14zM28 6v4h7.17L15.51 29.66l2.83 2.83L38 12.83V20h4V6H28z"></path></svg></span>'+e,a=b("span");a.style.cursor="pointer",a.innerHTML=r,E.divLabel.innerHTML=i,E.divLabel.appendChild(a),E.divLabel.style.top=dt()+"px",a.onclick=a.ontouchend=function(e){e.stopImmediatePropagation(),pt.open(n,"_blank"),M("clickthrough",E.linearEvents.clickthrough,"linear"),E.linear[E.currentPod-1].videoClickTrackingURLTemplates&&(e=E.linear[E.currentPod-1].videoClickTrackingURLTemplates)&&e.forEach(function(e){e.url&&M("clickthrough",e.url,"linear")}),f.paused()||f.pause()},(E.outstream?f.el().querySelector(".outstream-controls"):f.controlBar.el()).appendChild(E.divLabel)}else if(t){t.classList.remove("vjs-hidden");let e=f.el_.offsetWidth<480?f.localize("Ad"):f.localize("Advertisement");1<E.linear.length&&"outstream"!==E.mode&&(e+=" ("+E.currentPod+"/"+E.linear.length+")"),t.innerHTML=e}at();E.error=!1,f.on("timeupdate",$e),f.one("ended",it),f.one("playing",function(){var i,e;E.error?E.error=!1:(ht.adinfo&&!(i=f.el_.querySelector(".vjs-ainfo"))&&((e=b("style")).innerHTML=".vjs-ainfo{position: absolute;top:10px;left:10px;opacity:.8;cursor:pointer;height:18px;display:none;}.vjs-ad-playing .vjs-ainfo{display:inline-block}.vjs-ainfo .vjs-ico-block {height:18px;width:18px;display:inline-block;float:left;filter:drop-shadow(1px 1px 1px #000);}.vjs-ainfo .vjs-label {line-height:18px;float:left;height:18px;transition:all .25s ease;filter:drop-shadow(1px 1px 1px #000);margin-left:5px;max-width:0;font-size:13px;overflow:hidden;display:inline-block;margin-right:5px;}.vjs-ainfo:hover .vjs-label {max-width:200px}.vjs-ad-playing .vjs-ainfo-right {right:10px;left:auto;top:auto;bottom:15px}.vjs-ad-playing .vjs-ainfo-right .vjs-ico-block {float:right}",f.el_.appendChild(e),setTimeout(function(){i=b("div","vjs-ainfo");var e=b("div","vjs-ico-block"),t=(e.innerHTML='<svg fill="none" viewBox="0 0 24 24"><path fill-rule="evenodd" fill="white" d="M2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12ZM13 16V18H11V16H13ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM8 10C8 7.79 9.79 6 12 6C14.21 6 16 7.79 16 10C16 11.28 15.21 11.97 14.44 12.64C13.71 13.28 13 13.90 13 15H11C11 13.17 11.94 12.45 12.77 11.82C13.42 11.32 14 10.87 14 10C14 8.9 13.1 8 12 8C10.9 8 10 8.9 10 10H8Z"></path></svg>',b("div","vjs-label"));t.innerHTML=f.localize("Information"),i.appendChild(e),i.appendChild(t),f.el_.appendChild(i),f.$(".vjs-tech").hasAttribute("outstreamvisit")&&"always"===ht.outstreamClose&&(i.style.left="40px",i.style.top="13px"),i.onclick=()=>{f.pause(),pt.open(ht.adinfo,"_blank")}},100)),lt(),E.firstPlay=!0,f.el_.classList.add("vjs-ad-playing"),o.impressionURLTemplates&&o.impressionURLTemplates.forEach(function(e){e.url&&M("impression",e.url,"linear")}),M("start",E.linearEvents.start,"linear"),o.skipDelay&&(E.skip=o.skipDelay,rt(),st()),Qe(o))}),f.on("playerresize",Ge),f.on("volumechange",Je),f.on("play",Ke),f.on("pause",Ze),f.on("fullscreenchange",et),f.on("error",Ye),E.preroll||(E.preroll=!0,f.play()),E.preroll=!1},150)}else O()}f.one("play",function(){var e,t;f.$(".vjs-tech").hasAttribute("outstreamvisit")&&(e=b("style"),t=".video-js .vjs-tech{opacity:1!important}",e.textContent=".video-js .vjs-tech{opacity:1!important}.vjs-visit-blocker{background:rgba(0, 0, 0, .77);bottom:auto;right:10px!important;left:auto!important;top:10px!important;display:table!important;width:auto!important;height:auto!important;color:#fff!important;padding:4px 6px!important;border-radius:8px;border:solid 2px rgba(255, 255, 255, .8)!important}.vjs-visit-blocker:hover{border:solid 2px rgba(255, 255, 255, 1)!important}.vjs-visit-block{position:absolute;transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);top:45%;left:50%;text-align:center;color:#fff}.btn-visit{cursor:pointer;font-size:16px;text-transform:uppercase;background:#383838;display:table;margin-bottom:10px;-webkit-border-radius:50%;border-radius:50%;width:60px;height:60px;line-height:60px;}.btn-visit:hover{background:#484848}.btn-visit-replay{cursor:pointer;display:table;padding:4px 6px;margin:0 auto;border:solid 1px #999}.video-js .vjs-bg-bar{height:0!important}.btn-visit-replay:hover{border-color:#fff}",t=f.$(".vjs-tech"),f.el_.insertBefore(e,t))});const Qe=function(e){if(!E.outstream&&"outstream"!=d.mode&&(E.icons=[],e.icons)&&0<e.icons.length)for(var t=0;t<e.icons.length;t++){var i,n=e.icons[t],r="",a=(n.staticResource?r='<img src="'+n.staticResource+'">':n.htmlResource?r=n.htmlResource:n.iframeResource&&(r=n.iframeResource),"left"),o=0,l="top",s=0,c=(n&&"left"===n.xPosition&&(a="left",o=0),n&&"right"===n.xPosition&&(a="right",o=0),n&&0<=Number(n.xPosition)&&(a="left",o=n.xPosition),n&&"bottom"===n.yPosition&&(l="bottom",s=0),n&&"top"===n.yPosition&&(l="top",s=0,s+=0),n&&0<=Number(n.yPosition)&&(l="top",s=Number(n.yPosition),s+=0),b("div","nv-icon"));c.setAttribute("name","adicon"),f.el().appendChild(c),"bottom"===n.yPosition&&(c.style.bottom=ut()+"px",E.bottomIcons.push(c),f.on("useractive",()=>{c.style.bottom=ut()+"px"}),f.on("userinactive",()=>{!f.paused()&&f.el_.classList.contains("vjs-has-mouse")&&(c.style.bottom="5px")})),c.id="adicon_"+n.program,"iframe"===n.type?((i=b("iframe")).src=n.content,i.scrolling="no",i.style.width="100%",i.style.height="100%",i.style.border="none",i.style.overflow="hidden",c.appendChild(i)):c.innerHTML=r,c.style.position="absolute",n&&"center"===n.xPosition?(c.style.left="50%",c.style.webkitTransform="translateX(-50%)",c.style.transform="translateX(-50%)"):c.style[a]=o+"px",n&&"center"===n.yPosition?(c.style.top="50%",n&&"center"===n.xPosition?(c.style.webkitTransform="translate(-50%,-50%)",c.style.transform="translate(-50%,-50%)"):(c.style.transform="translateY(-50%)",c.style.webkitTransform="translateY(-50%)")):"bottom"!==n.yPosition&&(c.style[l]=s+"px"),n.origY=s,n.iconClickThroughURLTemplate&&(c.style.cursor="pointer",c.onclick=n.ontouchend=function(e){e.stopImmediatePropagation(),pt.open(n.iconClickThroughURLTemplate,"_blank"),n.iconClickTrackingURLTemplates&&n.iconClickTrackingURLTemplates.forEach(function(e){e.url&&M("clickthrough",e.url,"icon")})}),n.iconViewTrackingURLTemplate&&M("view",n.iconViewTrackingURLTemplate,"icon")}};function Ye(){E.error=!0,g("Media Error.Ad Cancelled"),E.preroll=!0,E.lastPod&&f.one("playing",function(){var e=f.textTracks?f.textTracks():[];if(0<e.length)for(var t=0;t<e.length;t++){var i=e[t],n=E.snapshot.suppressedTracks[t];i.mode=n.mode}}),document.getElementById("cpt").innerHTML="ad error",tt(),setTimeout(function(){var e=f.el().querySelectorAll(".nv-icon");if(e)for(var t=0;t<e.length;t++)e[t].remove();at(),ot(),f.el().classList.remove("vjs-ad-playing")},0)}function M(i,e,n){if(e){let t;"linear"==n&&(t=E.linearId),"nonlinear"==n&&(t=E.nonlinearId),"companion"==n&&(t=E.companionId),Array.isArray(e)?e.forEach(function(e){(new Image).src=Me(e,n),f.trigger("vastEvent",{eventName:i,adType:n,adId:t})}):((new Image).src=Me(e,n),f.trigger("vastEvent",{eventName:i,adType:n,adId:t}))}}const Ge=function(){var t=f.el().offsetWidth;if(E.divLabel&&(E.divLabel.style.top=dt()+"px"),0<E.bottomIcons.length)for(var e=0;e<E.bottomIcons.length;e++){var i=ut();E.bottomIcons[e].style.bottom=i+"px"}st();var n=f.controlBar.el().querySelector(".vjs-vast-label");if(n){let e=n.innerHTML.split(f.localize("Advertisement")).join("");e=e.split(f.localize("Ad")).join(""),n.innerHTML=t<480?f.localize("Ad")+e:f.localize("Advertisement")+e}},$e=function(){var e=parseInt(f.currentTime()),t=parseInt(f.duration());if(0<t&&(e>parseInt(t/4)&&!w.firstQuartile&&(w.firstQuartile=!0,M("firstQuartile",E.linearEvents.firstQuartile,"linear")),e>parseInt(t/2)&&!w.midpoint&&(w.midpoint=!0,M("midpoint",E.linearEvents.midpoint,"linear")),e>parseInt(.75*t))&&!w.thirdQuartile&&(w.thirdQuartile=!0,M("thirdQuartile",E.linearEvents.thirdQuartile,"linear")),0<E.skip&&E.skipButton){let t=!1;e=parseInt(E.skip-f.currentTime());0<e?E.skipButton.innerHTML=f.localize("Skip Ad in")+" "+e:(E.skipButton.innerHTML=f.localize("Skip Ad")+'<span class="nv-skip-icon"><svg viewBox="0 0 32 32"><path d="M7 24l12.75-9-12.75-9v18zM22 6v18h3v-18h-3z"></path></svg></span>',E.skipButton.classList.add("nv-skip-active"),t=!0),E.skipButton.onclick=E.skipButton.ontouchend=function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!t)return!1;M("skip",E.linearEvents.skip,"linear"),d.cancelAdPods&&(E.linear.length=1),tt()}}};const Ke=function(){E.firstPause&&M("resume",E.linearEvents.resume,"linear")},Ze=function(){E.firstPause=!0,M("pause",E.linearEvents.pause,"linear")},Je=function(){f.muted()&&0==E.muted&&(E.muted=!0,M("mute",E.linearEvents.mute,"linear")),!0!==f.muted()&&E.muted&&(E.muted=!1,M("unmute",E.linearEvents.unmute,"linear"))},et=function(){f.isFullscreen()?M("fullscreen",E.linearEvents.fullscreen,"linear"):M("exitFullscreen",E.linearEvents.exitFullscreen,"linear")},tt=function(){f.off("ended",it),f.off("timeupdate",$e),f.off("playerresize",Ge),f.off("volumechange",Je),f.off("play",Ke),f.off("pause",Ze),f.off("fullscreenchange",et);var e=f.el().querySelectorAll(".nv-icon");if(e)for(var t=0;t<e.length;t++)e[t].remove();at(),ot();let i=E.skip=0,n=!1;if(1<E.linear.length){for(var r=0;r<E.linear.length;r++)if(!0!==E.linear[r].used){i=r;break}if(0<i&&"outstream"!==E.mode)f.loadingSpinner.el_.style.display="none",E.currentPod=E.currentPod+1,Xe(E.linear[i]);else{if(!E.outstream&&"outstream"!=d.mode||(C=[],O(),f.trigger("adsCompleted"),n=!0),!0!==n)for(let e=E.currentAdId;e<C.length;e++)if(!1===C[e].used&&C[e].timeOffset==C[E.currentAdId].timeOffset){n=!0,f.loadingSpinner.el_.style.display="none",E.currentAdId=e,E.adPlaying=!0,C[e].used=!0,x(e);break}if(!0!==n){let t=!0;for(let e=E.currentAdId;e<C.length;e++)C[e].used||(t=!1);(t||E.outstrem)&&f.trigger("adsCompleted"),O()}}}else{!E.outstream&&"outstream"!=d.mode||(C=[],O(),n=!0);for(let e=E.currentAdId;e<C.length;e++)if(!0!==C[e].used&&C[e].timeOffset==C[E.currentAdId].timeOffset){n=!0,E.currentAdId=e,E.adPlaying=!0,C[e].used=!0,x(e);break}let t=!0;for(let e=E.currentAdId;e<C.length;e++)C[e].used||(t=!1);(t||E.outstrem)&&f.trigger("adsCompelted"),!0!==n&&O()}},it=function(){tt()},O=function e(){if(E.adPlaying=!1,E.adStarted=!1,E.outstream||"outstream"==d.mode){for(let e=E.currentAdId;e<C.length;e++)0<e&&(C[e].used=!0);var t,i,n,r,a;if(E.currentAdId=0,f.one("ended",e),E.fin=!0,f.$(".vjs-tech").hasAttribute("outstreamvisit"))return t=E.blocker.getAttribute("data-url"),i=b("div"),f.el().appendChild(i),a=b("div"),n=b("div"),r=b("div"),i.className="vjs-overlay",a.class="vjs-block",a.className="vjs-visit-block",n.className="btn-visit",r.className="btn-visit-replay",i.appendChild(a),n.innerHTML="VISIT",r.innerHTML="Replay",a.appendChild(n),a.appendChild(r),(a=f.el_.querySelector(".vjs-ainfo"))&&a.parentNode.removeChild(a),n.onclick=function(){pt.open(t,"_blank")},void(r.onclick=function(){f.play(),f.el().removeChild(i)});E.autoClose&&(f.pause(),E.fin=!0,f.el().parentNode.removeChild(f.el()))}E.currentAdId=0,f.loadingSpinner.el_.removeAttribute("style"),f.off("ended",it),f.off("error",Ye);try{E.blocker&&f.el_.removeChild(E.blocker)}catch(e){}try{E.skipButton&&E.skipButton.remove()}catch(e){}"outstream"!==E.mode&&f.el_.classList.remove("vjs-ad-playing"),E.snapshot&&!0!==E.fin&&Ve(f,E.snapshot),E.adPlaying=!1},nt=function(t){null==E.blocker&&(E.blocker=b("div","nv-blocker"),f.$(".vjs-tech").hasAttribute("outstreamvisit"))&&(E.blocker.className="nv-blocker vjs-visit-blocker",E.blocker.innerHTML=f.localize("VISIT"),E.blocker.setAttribute("data-url",t)),E.blocker.onclick=E.blocker.ontouchend=function(e){E.firstPlay?(e.stopPropagation(),pt.open(t,"_blank"),M("clickthrough",E.linearEvents.clickthrough,"linear"),E.linear[E.currentPod-1].videoClickTrackingURLTemplates&&(e=E.linear[E.currentPod-1].videoClickTrackingURLTemplates)&&e.forEach(function(e){e.url&&M("clickthrough",e.url,"linear")}),f.paused()||f.pause()):f.paused()&&f.play()},f.el().insertBefore(E.blocker,f.controlBar.el())};const rt=function(){E.skipButton&&E.skipButton.remove(),E.skipButton=b("div");let e="nv-skip",t=f.localize("Skip Ad in")+" "+E.skip;0===E.skip&&(e="nv-skip nv-skip-active",t=f.localize("Skip Ad")),E.skipButton.className=e,E.skipButton.innerHTML=t,f.el().appendChild(E.skipButton)},at=function(){E.skipButton&&(E.skipButton.parentNode.removeChild(E.skipButton),E.skipButton=null,E.skip=-1)},ot=function(){E.labelStyle&&(E.labelStyle.parentNode.removeChild(E.labelStyle),E.labelStyle=null),E.divLabel&&(E.divLabel.parentNode.removeChild(E.divLabel),E.divLabel=null)};const lt=function(){setTimeout(function(){var t=f.textTracks?f.textTracks():[];for(let e=0;e<t.length;e++)t[e].mode="disabled"},200)};const st=function(){if(E.skipButton){var t=f.el().offsetWidth;let e=70;switch(E.skin){case"slategrey":case"shaka":case"roundal":case"jwlike":1080<t&&(e=90);break;case"treso":e=70,1080<t&&(e=90);break;case"mockup":1080<t&&(e=100)}E.outstream&&(e=60),E.skipButton.style.bottom=e+"px"}},ct=function(){var e=f.el().offsetWidth;let t=60;switch(E.skin){case"treso":t=60;break;case"slategrey":t=65,1080<e&&(t=70);break;case"pinko":case"party":case"nuevo":t=55,1080<e&&(t=60);break;case"mockup":t=55,1080<e&&(t=70);break;case"jwlike":1080<e&&(t=70);break;case"flow":t=55,1080<e&&(t=60)}return t},ut=function(){var e=f.el().offsetWidth;let t=60;switch(E.skin){case"party":e<1080&&(t=50);break;case"treso":t=70;break;case"chrome":t=50,e<480&&(t=60);break;case"mockup":t=70,1080<e&&(t=90);break;case"flow":t=50,1080<e&&(t=60);break;case"jwlike":1080<e&&(t=70);break;case"nuevo":t=50,1080<e&&(t=60);break;case"roundal":e<480&&(t=50);break;case"slategrey":case"shaka":case"party":1080<e&&(t=70)}return E.outstream&&(t=45),"link"===E.clickthrough&&(t+=30),t},dt=function(){let e=-30;var t=f.el().offsetWidth;switch(E.skin){case"treso":e=-50;break;case"mockup":e=-60,1080<t&&(e=-70);break;case"jwlike":e=-40}return e=E.outstream?-25:e}};function e(e,t){this.ready(function(){i(this,e,t)})}var t=ht.getPlugin||ht.plugin;return void 0!==t("vast")&&"undefined"!==t("vast")||ht.registerPlugin("vast",e),e});
