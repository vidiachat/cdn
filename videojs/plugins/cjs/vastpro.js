/**
 * Copyright (c) 2025 The Nuevodevel Team. All rights reserved.
 * VastPro plugin for Video.js
 * Version 4.5.0
 */
/* eslint-disable *//* eslint-env node */function _interopDefault(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var videojs=_interopDefault(require("video.js"));

const factory=(y,r,u)=>{var t={nonlinearRecall:videojs.errorDisplay=!1,withCredentials:!1,timeout:6e3,resolveAll:!0,wrapperLimit:10,allowMultipleAds:!0,allowAdPods:!0,cancelAdPods:!1,clickthroughMethod:"player",closeNonlinearButton:!0,closeNonlinearTheme:"light",autoClose:!1,outstreamClose:!1,brandText:"",brandUrl:"",outstreamCloseTheme:"dark",autoplay:!1,skipTimer:!1,mode:"normal"},o=function(e){"use strict";function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach(function(e){D(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function t(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t,i){return(t=f(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e=o(i);if(n)var t=o(this).constructor,t=Reflect.construct(e,arguments,t);else t=e.apply(this,arguments);return j(this,t)}}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e);else{if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(e,t)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var B=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function m(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=[],o=k(e);for(t in!n.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(n.ERRORCODE)||(n.ERRORCODE=900),n.CACHEBUSTING=V(Math.round(1e8*Math.random())),n.TIMESTAMP=(new Date).toISOString(),n.RANDOM=n.random=n.CACHEBUSTING,n)n[t]=A(n[t]);for(i in o){var l=o[i];"string"==typeof l&&a.push(v(l,n))}return a}function v(e,t){t=(e=g(e,t)).match(/[^[\]]+(?=])/g);if(t){t=t.filter(function(e){return-1<B.indexOf(e)});return 0===t.length?e:g(e,t=t.reduce(function(e,t){return e[t]=-1,e},{}))}return e}function g(e,t){var i,n=e;for(i in t)var r=t[i],n=n.replace(new RegExp("(?:\\[|%%)(".concat(i,")(?:\\]|%%)"),"g"),r);return n}function k(e){return Array.isArray(e)?e.map(function(e){return e&&e.hasOwnProperty("url")?e.url:e}):e}function T(e){return/^(https?:\/\/|\/\/)/.test(e)}function y(e,t){for(var i=0;i<t.length;i++)if(b(t[i],e))return!0;return!1}function b(e,t){if(e&&t){var i=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t);return i.length===n.length&&(e.id===t.id&&e.url===t.url)}return!1}function A(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16))})}function V(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,"0")}var R={track:function(e,t,i){m(e,t,i).forEach(function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)})},resolveURLTemplates:m,extractURLsFromTemplates:k,filterValidUrlTemplates:function(e){return Array.isArray(e)?e.filter(function(e){return T(e.hasOwnProperty("url")?e.url:e)}):T(e)},containsTemplateObject:y,isTemplateObjectEqual:b,encodeURIComponentRFC3986:A,replaceUrlMacros:v,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function i(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?i(t):t)},[])},joinArrayOfUniqueTemplateObjs:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=Array.isArray(e)?e:[],t=Array.isArray(t)?t:[];return e.concat(t).reduce(function(e,t){return y(t,e)||e.push(t),e},[])},isValidTimeValue:function(e){return Number.isFinite(e)&&-2<=e},addLeadingZeros:V};function F(e){return-1!==["true","TRUE","True","1"].indexOf(e)}function H(e){if(null==e)return-1;if(R.isNumeric(e))return parseInt(e);e=e.split(":");if(3!==e.length)return-1;else{var t=e[2].split("."),i=parseInt(t[0]),t=(2===t.length&&(i+=parseFloat("0.".concat(t[1]))),parseInt(60*e[1])),e=parseInt(60*e[0]*60);return isNaN(e)||isNaN(t)||isNaN(i)||3600<t||60<i?-1:e+t+i}}var L={childByName:function(e,t){var i,n=e.childNodes;for(i in n){var r=n[i];if(r.nodeName===t)return r}},childrenByName:function(e,t){var i,n=[],r=e.childNodes;for(i in r){var a=r[i];a.nodeName===t&&n.push(a)}return n},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var i=location.protocol;return"".concat(i).concat(e)}if(-1!==e.indexOf("://"))return e;else{i=t.slice(0,t.lastIndexOf("/"));return"".concat(i,"/").concat(e)}},parseBoolean:F,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,i){t=t.getAttribute(e);t&&i.setAttribute(e,t)},parseAttributes:function(e){for(var t=e.attributes,i={},n=0;n<t.length;n++)i[t[n].nodeName]=t[n].nodeValue;return i},parseDuration:H,splitVAST:function(i){var n=[],r=null;return i.forEach(function(e,t){if(e.sequence&&(e.sequence=parseInt(e.sequence,10)),1<e.sequence){t=i[t-1];if(t&&t.sequence===e.sequence-1)return void(r&&r.push(e));delete e.sequence}r=[e],n.push(r)}),n},assignAttributes:function(e,t){if(e)for(var i in e){i=e[i];if(i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)){var n=i.nodeValue;"boolean"==typeof t[i.nodeName]&&(n=F(n)),t[i.nodeName]=n}}},mergeWrapperAdData:function(e,n){e.errorURLTemplates=n.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=n.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=n.extensions.concat(e.extensions),0<n.viewableImpression.length&&(e.viewableImpression=[].concat(d(e.viewableImpression),d(n.viewableImpression))),e.followAdditionalWrappers=n.followAdditionalWrappers,e.allowMultipleAds=n.allowMultipleAds,e.fallbackOnNoAd=n.fallbackOnNoAd;var t=(n.creatives||[]).filter(function(e){return e&&"companion"===e.type}),r=t.reduce(function(t,e){return(e.variations||[]).forEach(function(e){(e.companionClickTrackingURLTemplates||[]).forEach(function(e){R.containsTemplateObject(e,t)||t.push(e)})}),t},[]),a=(e.creatives=t.concat(e.creatives),n.videoClickTrackingURLTemplates&&n.videoClickTrackingURLTemplates.length),o=n.videoCustomClickURLTemplates&&n.videoCustomClickURLTemplates.length;if(e.creatives.forEach(function(e){if(n.trackingEvents&&n.trackingEvents[e.type])for(var t in n.trackingEvents[e.type]){var i=n.trackingEvents[e.type][t];Array.isArray(e.trackingEvents[t])||(e.trackingEvents[t]=[]),e.trackingEvents[t]=e.trackingEvents[t].concat(i)}"linear"===e.type&&(a&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(n.videoClickTrackingURLTemplates)),o&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(n.videoCustomClickURLTemplates)),!n.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=n.videoClickThroughURLTemplate)),"companion"===e.type&&r.length&&(e.variations||[]).forEach(function(e){e.companionClickTrackingURLTemplates=R.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,r)})}),n.adVerifications&&(e.adVerifications=e.adVerifications.concat(n.adVerifications)),n.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(n.blockedAdCategories)),null!=(t=n.creatives)&&t.length){t=n.creatives.filter(function(e){var t;return(null==(t=e.icons)?void 0:t.length)&&!e.mediaFiles.length});t.length&&(e.creatives=e.creatives.concat(t))}}};function W(e,t){t=function(){var e=h(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"companion",required:null,variations:[]}}(t);return t.required=e.getAttribute("required")||null,t.variations=L.childrenByName(e,"Companion").map(function(e){var i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotId:e.adSlotId||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(L.parseAttributes(e)),t=(i.htmlResources=L.childrenByName(e,"HTMLResource").reduce(function(e,t){t=L.parseNodeText(t);return t?e.concat(t):e},[]),i.iframeResources=L.childrenByName(e,"IFrameResource").reduce(function(e,t){t=L.parseNodeText(t);return t?e.concat(t):e},[]),i.staticResources=L.childrenByName(e,"StaticResource").reduce(function(e,t){var i=L.parseNodeText(t);return i?e.concat({url:i,creativeType:t.getAttribute("creativeType")||null}):e},[]),i.altText=L.parseNodeText(L.childByName(e,"AltText"))||null,L.childByName(e,"TrackingEvents")),t=(t&&L.childrenByName(t,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=L.parseNodeText(e);t&&e&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(e))}),i.companionClickTrackingURLTemplates=L.childrenByName(e,"CompanionClickTracking").map(function(e){return{id:e.getAttribute("id")||null,url:L.parseNodeText(e)}}),i.companionClickThroughURLTemplate=L.parseNodeText(L.childByName(e,"CompanionClickThrough"))||null,L.childByName(e,"AdParameters"));return t&&(i.adParameters={value:L.parseNodeText(t),xmlEncoded:t.getAttribute("xmlEncoded")||null}),i}),t}function q(e,t){var n,o=function(){var e=h(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t),t=(o.duration=L.parseDuration(L.parseNodeText(L.childByName(e,"Duration"))),e.getAttribute("skipoffset"));if(null==t)o.skipDelay=null;else if("%"===t.charAt(t.length-1)&&-1!==o.duration){var i=parseInt(t,10);o.skipDelay=o.duration*(i/100)}else o.skipDelay=L.parseDuration(t);i=L.childByName(e,"VideoClicks");if(i){t=L.childByName(i,"ClickThrough");o.videoClickThroughURLTemplate=t?{id:t.getAttribute("id")||null,url:L.parseNodeText(t)}:null,L.childrenByName(i,"ClickTracking").forEach(function(e){o.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})}),L.childrenByName(i,"CustomClick").forEach(function(e){o.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})})}t=L.childByName(e,"AdParameters"),i=(t&&(o.adParameters={value:L.parseNodeText(t),xmlEncoded:t.getAttribute("xmlEncoded")||null}),L.childrenByName(e,"TrackingEvents").forEach(function(e){L.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),i=L.parseNodeText(e);if(t&&i){if("progress"===t){if(!(n=e.getAttribute("offset")))return;t="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(L.parseDuration(n)))}Array.isArray(o.trackingEvents[t])||(o.trackingEvents[t]=[]),o.trackingEvents[t].push(i)}})}),L.childrenByName(e,"MediaFiles").forEach(function(e){L.childrenByName(e,"MediaFile").forEach(function(e){o.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null},i=(t.id=e.getAttribute("id"),t.fileURL=L.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0),e.getAttribute("scalable")),i=(i&&"string"==typeof i&&(t.scalable=L.parseBoolean(i)),e.getAttribute("maintainAspectRatio"));i&&"string"==typeof i&&(t.maintainAspectRatio=L.parseBoolean(i));return t}(e))});var t=L.childByName(e,"InteractiveCreativeFile"),t=(t&&(o.interactiveCreativeFile=(t=t,(a=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:L.parseBoolean(e.variableDuration),fileURL:null}}(L.parseAttributes(t))).fileURL=L.parseNodeText(t),a)),L.childByName(e,"ClosedCaptionFiles"));t&&L.childrenByName(t,"ClosedCaptionFile").forEach(function(e){var t=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(L.parseAttributes(e));t.fileURL=L.parseNodeText(e),o.closedCaptionFiles.push(t)});var i,n,r,a=L.childByName(e,"Mezzanine"),t=(i=a,r=!(n={}),["delivery","type","width","height"].forEach(function(e){i&&i.getAttribute(e)?n[e]=i.getAttribute(e):r=!0}),r?null:n);if(t){e={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};e.id=a.getAttribute("id"),e.fileURL=L.parseNodeText(a),e.delivery=t.delivery,e.codec=a.getAttribute("codec"),e.type=t.type,e.width=parseInt(t.width,10),e.height=parseInt(t.height,10),e.fileSize=parseInt(a.getAttribute("fileSize"),10),e.mediaType=a.getAttribute("mediaType")||"2D",o.mezzanine=e}}),L.childByName(e,"Icons"));return i&&L.childrenByName(i,"Icon").forEach(function(e){o.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null,iconClickFallbackImages:[]},i=(t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){if(-1!==["left","right"].indexOf(e))return e;else return parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){if(-1!==["top","bottom"].indexOf(e))return e;else return parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=L.parseDuration(e.getAttribute("offset")),t.duration=L.parseDuration(e.getAttribute("duration")),L.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=L.parseNodeText(e)}),L.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=L.parseNodeText(e)}),L.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=L.parseNodeText(e)}),L.childByName(e,"IconClicks"));if(i){t.iconClickThroughURLTemplate=L.parseNodeText(L.childByName(i,"IconClickThrough")),L.childrenByName(i,"IconClickTracking").forEach(function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})});i=L.childByName(i,"IconClickFallbackImages");i&&L.childrenByName(i,"IconClickFallbackImage").forEach(function(e){t.iconClickFallbackImages.push({url:L.parseNodeText(e)||null,width:e.getAttribute("width")||null,height:e.getAttribute("height")||null})})}return t.iconViewTrackingURLTemplate=L.parseNodeText(L.childByName(e,"IconViewTracking")),t}(e))}),o}function _(e,t){var n=function(){var e=h(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return L.childrenByName(e,"TrackingEvents").forEach(function(e){var t,i;L.childrenByName(e,"Tracking").forEach(function(e){t=e.getAttribute("event"),i=L.parseNodeText(e),t&&i&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(i))})}),L.childrenByName(e,"NonLinear").forEach(function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null},i=(t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=L.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=L.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=L.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),L.childrenByName(e,"HTMLResource").forEach(function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=L.parseNodeText(e)}),L.childrenByName(e,"IFrameResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=L.parseNodeText(e)}),L.childrenByName(e,"StaticResource").forEach(function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=L.parseNodeText(e)}),L.childByName(e,"AdParameters"));i&&(t.adParameters={value:L.parseNodeText(i),xmlEncoded:i.getAttribute("xmlEncoded")||null}),t.nonlinearClickThroughURLTemplate=L.parseNodeText(L.childByName(e,"NonLinearClickThrough")),L.childrenByName(e,"NonLinearClickTracking").forEach(function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:L.parseNodeText(e)})}),n.variations.push(t)}),n}function z(e){var t=[];return e.forEach(function(e){e=X(e);e&&t.push(e)}),t}function X(e){if("#comment"===e.nodeName)return null;var t,i={name:null,value:null,attributes:{},children:[]},n=e.attributes,r=e.childNodes;if(i.name=e.nodeName,e.attributes)for(var a in n)if(n.hasOwnProperty(a)){a=n[a];a.nodeName&&a.nodeValue&&(i.attributes[a.nodeName]=a.nodeValue)}for(t in r)if(r.hasOwnProperty(t)){var o=X(r[t]);o&&i.children.push(o)}if(0===i.children.length||1===i.children.length&&0<=["#cdata-section","#text"].indexOf(i.children[0].name)){var e=L.parseNodeText(e);""!==e&&(i.value=e),i.children=[]}return null===(e=i).value&&0===Object.keys(e.attributes).length&&0===e.children.length?null:i}function Q(e){var s=[];return e.forEach(function(e){var t,i,n={id:e.getAttribute("id")||null,adId:Y(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},r=[],a=(L.childrenByName(e,"UniversalAdId").forEach(function(e){e={idRegistry:e.getAttribute("idRegistry")||"unknown",value:L.parseNodeText(e)};r.push(e)}),L.childByName(e,"CreativeExtensions"));for(i in a&&(t=z(L.childrenByName(a,"CreativeExtension"))),e.childNodes){var o=e.childNodes[i],l=void 0;switch(o.nodeName){case"Linear":l=q(o,n);break;case"NonLinearAds":l=_(o,n);break;case"CompanionAds":l=W(o,n)}l&&(r&&(l.universalAdIds=r),t&&(l.creativeExtensions=t),s.push(l))}}),s}function Y(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var w={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function G(t,e){if(w[t.nodeName]&&w[t.nodeName].attributes){var i=w[t.nodeName].attributes.filter(function(e){return!t.getAttribute(e)});0<i.length&&C({name:t.nodeName,parentName:t.parentNode.nodeName,attributes:i},e)}}function $(t,e,i){var n=w[t.nodeName],r=!i&&"Wrapper"!==t.nodeName;if(n&&!r){if(n.subElements){r=n.subElements.filter(function(e){return!L.childByName(t,e)});0<r.length&&C({name:t.nodeName,parentName:t.parentNode.nodeName,subElements:r},e)}if(i&&n.oneOfinLineResources)n.oneOfinLineResources.some(function(e){return L.childByName(t,e)})||C({name:t.nodeName,parentName:t.parentNode.nodeName,oneOfResources:n.oneOfinLineResources},e)}}function K(e){return e.children&&0!==e.children.length}function C(e,t){var i=e.name,n=e.parentName,r=e.attributes,a=e.subElements,e=e.oneOfResources,i="Element '".concat(i,"'");t("VAST-warning",{message:i+=r?" missing required attribute(s) '".concat(r.join(", "),"' "):a?" missing required sub element(s) '".concat(a.join(", "),"' "):e?" must provide one of the following '".concat(e.join(", "),"' "):" is empty",parentElement:n,specVersion:4.1})}var Z={verifyRequiredValues:function e(t,i,n){if(t&&t.nodeName)if("InLine"===t.nodeName&&(n=!0),G(t,i),K(t)){$(t,i,n);for(var r=0;r<t.children.length;r++)e(t.children[r],i,n)}else 0===L.parseNodeText(t).length&&C({name:t.nodeName,parentName:t.parentNode.nodeName},i)},hasSubElements:K,emitMissingValueWarning:C,verifyRequiredAttributes:G,verifyRequiredSubElements:$};function J(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.allowMultipleAds,a=n.followAdditionalWrappers,o=e.childNodes;for(i in o){var l=o[i];if(-1!==["Wrapper","InLine"].indexOf(l.nodeName)&&("Wrapper"!==l.nodeName||!1!==a)){if(L.copyNodeAttribute("id",e,l),L.copyNodeAttribute("sequence",e,l),L.copyNodeAttribute("adType",e,l),"Wrapper"===l.nodeName)return{ad:ie(l,t),type:"WRAPPER"};if("InLine"===l.nodeName)return{ad:ee(l,t,{allowMultipleAds:r}),type:"INLINE"}}}}function ee(e,t){return!1===(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).allowMultipleAds&&e.getAttribute("sequence")?null:te(e,t)}function te(e,t){var i=[];t&&Z.verifyRequiredValues(e,t);var n,r,a=e.childNodes,o=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(L.parseAttributes(e));for(r in a){var l=a[r];switch(l.nodeName){case"Error":o.errorURLTemplates.push(L.parseNodeText(l));break;case"Impression":o.impressionURLTemplates.push({id:l.getAttribute("id")||null,url:L.parseNodeText(l)});break;case"Creatives":o.creatives=Q(L.childrenByName(l,"Creative"));break;case"Extensions":var s=L.childrenByName(l,"Extension");o.extensions=z(s),o.adVerifications.length||(i=re(s));break;case"AdVerifications":o.adVerifications=ne(L.childrenByName(l,"Verification"));break;case"AdSystem":o.system={value:L.parseNodeText(l),version:l.getAttribute("version")||null};break;case"AdTitle":o.title=L.parseNodeText(l);break;case"AdServingId":o.adServingId=L.parseNodeText(l);break;case"Category":o.categories.push({authority:l.getAttribute("authority")||null,value:L.parseNodeText(l)});break;case"Expires":o.expires=parseInt(L.parseNodeText(l),10);break;case"ViewableImpression":o.viewableImpression.push((void 0,s=function(e,t){t=L.parseNodeText(t);return t&&e.push(t),e},{id:(n=l).getAttribute("id")||null,viewable:L.childrenByName(n,"Viewable").reduce(s,[]),notViewable:L.childrenByName(n,"NotViewable").reduce(s,[]),viewUndetermined:L.childrenByName(n,"ViewUndetermined").reduce(s,[])}));break;case"Description":o.description=L.parseNodeText(l);break;case"Advertiser":o.advertiser={id:l.getAttribute("id")||null,value:L.parseNodeText(l)};break;case"Pricing":o.pricing={value:L.parseNodeText(l),model:l.getAttribute("model")||null,currency:l.getAttribute("currency")||null};break;case"Survey":o.survey={value:L.parseNodeText(l),type:l.getAttribute("type")||null};break;case"BlockedAdCategories":o.blockedAdCategories.push({authority:l.getAttribute("authority")||null,value:L.parseNodeText(l)})}}return i.length&&(o.adVerifications=o.adVerifications.concat(i)),o}function ie(e,t){var n=te(e,t),t=e.getAttribute("followAdditionalWrappers"),i=e.getAttribute("allowMultipleAds"),r=e.getAttribute("fallbackOnNoAd"),t=(n.followAdditionalWrappers=!t||L.parseBoolean(t),n.allowMultipleAds=!!i&&L.parseBoolean(i),n.fallbackOnNoAd=r?L.parseBoolean(r):null,L.childByName(e,"VASTAdTagURI"));if(t?n.nextWrapperURL=L.parseNodeText(t):(t=L.childByName(e,"VASTAdTagURL"))&&(n.nextWrapperURL=L.parseNodeText(L.childByName(t,"URL"))),n.creatives.forEach(function(i){if(-1!==["linear","nonlinear"].indexOf(i.type)){if(i.trackingEvents){n.trackingEvents||(n.trackingEvents={}),n.trackingEvents[i.type]||(n.trackingEvents[i.type]={});var e,t=function(t){var e=i.trackingEvents[t];Array.isArray(n.trackingEvents[i.type][t])||(n.trackingEvents[i.type][t]=[]),e.forEach(function(e){n.trackingEvents[i.type][t].push(e)})};for(e in i.trackingEvents)t(e)}i.videoClickTrackingURLTemplates&&(Array.isArray(n.videoClickTrackingURLTemplates)||(n.videoClickTrackingURLTemplates=[]),i.videoClickTrackingURLTemplates.forEach(function(e){n.videoClickTrackingURLTemplates.push(e)})),i.videoClickThroughURLTemplate&&(n.videoClickThroughURLTemplate=i.videoClickThroughURLTemplate),i.videoCustomClickURLTemplates&&(Array.isArray(n.videoCustomClickURLTemplates)||(n.videoCustomClickURLTemplates=[]),i.videoCustomClickURLTemplates.forEach(function(e){n.videoCustomClickURLTemplates.push(e)}))}}),n.nextWrapperURL)return n}function ne(e){var a=[];return e.forEach(function(e){var t,i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},n=e.childNodes;for(t in L.assignAttributes(e.attributes,i),n){var r=n[t];switch(r.nodeName){case"JavaScriptResource":case"ExecutableResource":i.resource=L.parseNodeText(r),L.assignAttributes(r.attributes,i);break;case"VerificationParameters":i.parameters=L.parseNodeText(r)}}e=L.childByName(e,"TrackingEvents");e&&L.childrenByName(e,"Tracking").forEach(function(e){var t=e.getAttribute("event"),e=L.parseNodeText(e);t&&e&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(e))}),a.push(i)}),a}function re(e){var t=null,i=[];return e.some(function(e){return t=L.childByName(e,"AdVerifications")}),i=t?ne(L.childrenByName(t,"Verification")):i}t(x,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(s(t)));if(e)return this._handlers.push({event:e,handler:t}),this;throw new TypeError("The event argument must be of type String. Received type ".concat(s(e)))}},{key:"once",value:function(e,t){return this.on(e,(n=this,r=e,a=t,(o={fired:!1,wrapFn:void 0}).wrapFn=i));function i(){o.fired||(n.off(r,o.wrapFn),o.fired=!0,a.bind(n).apply(void 0,arguments))}var n,r,a,o}},{key:"off",value:function(t,i){return this._handlers=this._handlers.filter(function(e){return e.event!==t||e.handler!==i}),this}},{key:"emit",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r=!1;return this._handlers.forEach(function(e){"*"===e.event&&(r=!0,e.handler.apply(e,[t].concat(i))),e.event===t&&(r=!0,e.handler.apply(e,i))}),r}},{key:"removeAllListeners",value:function(t){return t?(this._handlers=this._handlers.filter(function(e){return e.event!==t}),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(t){return this._handlers.filter(function(e){return e.event===t}).length}},{key:"listeners",value:function(i){return this._handlers.reduce(function(e,t){return t.event===i&&e.push(t.handler),e},[])}},{key:"eventNames",value:function(){return this._handlers.map(function(e){return e.event})}}]);var E=x;function x(){c(this,x),this._handlers=[]}var ae={get:function(e,t,i){i(new Error("Please bundle the library for node to use the node urlHandler"))}},oe=12e4;function le(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function I(e,t,i){var n=i?408:e.status,i=i?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms (").concat(n,")"):"XHRURLHandler: ".concat(e.statusText," (").concat(n,")");t(new Error(i),null,{statusCode:n})}var se,ce,ue={get:function(e,t,i){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var n=le();n.open("GET",e),n.timeout=t.timeout||oe,n.withCredentials=t.withCredentials||!1,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onload=function(){t=i,200===(e=n).status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):I(e,t,!1);var e,t},n.onerror=function(){return I(n,i,!1)},n.onabort=function(){return I(n,i,!1)},n.ontimeout=function(){return I(n,i,!0)},n.send()}catch(e){i(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!le()}},de={get:function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),"undefined"==typeof window||null===window?ae.get(e,t,i):ue.supported()?ue.get(e,t,i):i(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},pe=0,U=0,fe=function(e,t){!e||!t||e<=0||t<=0||(U=(U*pe+8*e/t)/++pe)},he={ERRORCODE:900,extensions:[]},me=(ce=(i(O,E),u(O)),t(O,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];this.emit("VAST-error",Object.assign.apply(Object,[{},he,t].concat(n))),R.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return U}},{key:"fetchVAST",value:function(s){var c=this,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(a,o){c.URLTemplateFilters.forEach(function(e){s=e(s)});var l=Date.now();c.emit("VAST-resolving",{url:s,previousUrl:d,wrapperDepth:u,maxWrapperDepth:c.maxWrapperDepth,timeout:c.fetchingOptions.timeout,wrapperAd:e}),c.urlHandler.get(s,c.fetchingOptions,function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Math.round(Date.now()-l),r=Object.assign({url:s,previousUrl:d,wrapperDepth:u,error:e,duration:n},i);c.emit("VAST-resolved",r),fe(i.byteLength,n),e?o(e):a(t)})})}},{key:"initParsingStatus",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||oe,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||de,this.vastVersion=null,fe(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));else{e=e?R.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.resolveAds(e,{wrapperDepth:0,url:this.rootURL}).then(function(e){return t.buildVASTResponse(e)})}}},{key:"getAndParseVAST",value:function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.URLTemplateFilters.forEach(function(e){t=e(t)}),this.rootURL=t,this.fetchVAST(t).then(function(e){return n.previousUrl=t,n.isRootVAST=!0,n.url=t,i.parse(e,n).then(function(e){return i.buildVASTResponse(e)})})}},{key:"parseVAST",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),i.isRootVAST=!0,this.parse(e,i).then(function(e){return t.buildVASTResponse(e)})}},{key:"buildVASTResponse",value:function(e){e={ads:(e={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:e.errorURLTemplates||[],version:e.version||null};return this.completeWrapperResolving(e),e}},{key:"parseVastXml",value:function(e,t){var i=t.isRootVAST,n=void 0!==i&&i,i=t.url,r=void 0===i?null:i,i=t.wrapperDepth,a=void 0===i?0:i,o=t.allowMultipleAds,l=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:r,wrapperDepth:a}),new Error("Invalid VAST XMLDocument");var s,c=[],u=e.documentElement.childNodes,d=e.documentElement.getAttribute("version");for(s in n&&d&&(this.vastVersion=d),u){var p=u[s];if("Error"===p.nodeName){var f=L.parseNodeText(p);n?this.rootErrorURLTemplates.push(f):this.errorURLTemplates.push(f)}else if("Ad"===p.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)o=!0;else if(!1===o&&1<c.length)break;f=J(p,this.emit.bind(this),{allowMultipleAds:o,followAdditionalWrappers:l});f.ad?(c.push(f.ad),this.emit("VAST-ad-parsed",{type:f.type,url:r,wrapperDepth:a,adIndex:c.length-1,vastVersion:d})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return c}},{key:"parse",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.url,i=void 0===i?null:i,n=t.resolveAll,n=void 0===n||n,r=t.wrapperSequence,r=void 0===r?null:r,a=t.previousUrl,a=void 0===a?null:a,o=t.wrapperDepth,o=void 0===o?0:o,l=t.isRootVAST,l=void 0!==l&&l,s=t.followAdditionalWrappers,t=t.allowMultipleAds,c=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&l&&(t=!0);try{c=this.parseVastXml(e,{isRootVAST:l,url:i,wrapperDepth:o,allowMultipleAds:t,followAdditionalWrappers:s})}catch(e){return Promise.reject(e)}return 1===c.length&&null!=r&&(c[0].sequence=r),!1===n&&(this.remainingAds=L.splitVAST(c),c=this.remainingAds.shift()),this.resolveAds(c,{wrapperDepth:o,previousUrl:a,url:i})}},{key:"resolveAds",value:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=t.wrapperDepth,r=t.previousUrl,a=t.url,o=[],r=a;return e.forEach(function(e){e=i.resolveWrappers(e,n,r);o.push(e)}),Promise.all(o).then(function(e){e=R.flatten(e);if(!e&&0<i.remainingAds.length){var t=i.remainingAds.shift();return i.resolveAds(t,{wrapperDepth:n,previousUrl:r,url:a})}return e})}},{key:"resolveWrappers",value:function(r,a,o){var l=this;return new Promise(function(t){var e;if(a++,!r.nextWrapperURL)return delete r.nextWrapperURL,t(r);if(a>=l.maxWrapperDepth)return r.errorCode=302,delete r.nextWrapperURL,t(r);r.nextWrapperURL=L.resolveVastAdTagURI(r.nextWrapperURL,o),l.URLTemplateFilters.forEach(function(e){r.nextWrapperURL=e(r.nextWrapperURL)});var i=null!=(e=l.parsingOptions.allowMultipleAds)?e:r.allowMultipleAds,n=r.sequence;l.fetchVAST(r.nextWrapperURL,a,o,r).then(function(e){return l.parse(e,{url:r.nextWrapperURL,previousUrl:o,wrapperSequence:n,wrapperDepth:a,followAdditionalWrappers:r.followAdditionalWrappers,allowMultipleAds:i}).then(function(e){if(delete r.nextWrapperURL,0===e.length)return r.creatives=[],t(r);e.forEach(function(e){e&&L.mergeWrapperAdData(e,r)}),t(e)})}).catch(function(e){r.errorCode=301,r.errorMessage=e.message,t(r)})})}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;0<=t;t--){var i=e.ads[t];!i.errorCode&&0!==i.creatives.length||(this.trackVastError(i.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),e.ads.splice(t,1))}}}]),O),N=null,ve={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ge=(t(M,[{key:"initStorage",value:function(){if(N);else{try{N="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){N=null}N&&!this.isStorageDisabled(N)||(N=ve).clear()}return N}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),M),ke=(t(P,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return 0<this.vastParser.remainingAds.length}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(n){var r=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=Date.now();return(a=Object.assign({},this.defaultOptions,a)).hasOwnProperty("resolveAll")||(a.resolveAll=!1),this.totalCallsTimeout<o?(this.totalCalls=1,this.totalCallsTimeout=o+36e5):this.totalCalls++,new Promise(function(t,i){if(r.cappingFreeLunch>=r.totalCalls)return i(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(r.totalCalls,"/").concat(r.cappingFreeLunch)));var e=o-r.lastSuccessfulAd;if(e<0)r.lastSuccessfulAd=0;else if(e<r.cappingMinimumTimeInterval)return i(new Error("VAST call canceled – (".concat(r.cappingMinimumTimeInterval,")ms minimum interval reached")));r.vastParser.getAndParseVAST(n,a).then(function(e){return t(e)}).catch(function(e){return i(e)})})}}]),P),E=(se=(i(S,E),u(S)),t(S,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):"companionAd"===this.variation.adType&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){R.isValidTimeValue(e)&&(this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(R.isValidTimeValue(e)&&"object"===s(i)){var n=this.skipDelay||-1;if(-1===n||this.skippable||(e<n?this.emit("skip-countdown",n-e):(this.skippable=!0,this.emit("skip-countdown",0))),0<this.assetDuration){var r=Math.round(e/this.assetDuration*100),a=[];if(0<e){a.push("start");for(var o,l=this.lastPercentage;l<r;l++)a.push("progress-".concat(l+1,"%"));for(o in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(o,this.quartiles[o],e)&&(a.push(o),this._alreadyTriggeredQuartiles[o]=!0);this.lastPercentage=r}a.forEach(function(e){t.track(e,{macros:i,once:!0})}),e<this.progress&&this.track("rewind",{macros:i})}this.progress=e}}},{key:"isQuartileReached",value:function(e,t,i){var n=!1;return n=t<=i&&!this._alreadyTriggeredQuartiles[e]?!0:n}},{key:"setMuted",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e)}},{key:"setPaused",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e)}},{key:"setFullscreen",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e)}},{key:"setExpand",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===s(t)&&(this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e)}},{key:"setSkipDelay",value:function(e){R.isValidTimeValue(e)&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"!==s(e)||this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e}))}},{key:"trackViewableImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.viewable,i)})}},{key:"trackNotViewableImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.notViewable,i)})}},{key:"trackUndeterminedImpression",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(i)&&this.ad.viewableImpression.forEach(function(e){t.trackURLs(e.viewUndetermined,i)})}},{key:"error",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"object"===s(e)&&"boolean"==typeof t&&this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&"boolean"==typeof t&&(this.error({ERRORCODE:e},t),console.log("The method errorWithCode is deprecated, please use vast tracker error method instead"))}},{key:"complete",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&(this.track("notUsed",{macros:e}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t&&"object"===s(e)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!t)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var i=this.ad.adVerifications.find(function(e){return e.vendor===t});if(!i)throw new Error("No associated verification element found for vendor: ".concat(t));i=i.trackingEvents;if(i&&i.verificationNotExecuted){i=i.verificationNotExecuted;this.trackURLs(i,e),this.emit("verificationNotExecuted",{trackingURLTemplates:i})}}}},{key:"overlayViewDuration",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&"object"===s(t)&&(t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t}))}},{key:"close",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("skip",{macros:e})}},{key:"load",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"object"===s(e)&&this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if((null===e||"string"==typeof e)&&"object"===s(t)){this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);e=this.clickThroughURLTemplate||e,t=r({},t);if(e){this.progress&&(t.ADPLAYHEAD=this.progressFormatted());e=R.resolveURLTemplates([e],t)[0];this.emit("clickthrough",e)}}}},{key:"track",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.macros,i=void 0===i?{}:i,t=t.once,t=void 0!==t&&t;if("object"===s(i)){"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var n=this.trackingEvents[e],r=-1<this.emitAlwaysEvents.indexOf(e);n?(this.emit(e,{trackingURLTemplates:n}),this.trackURLs(n,i)):r&&this.emit(e,null),t&&(delete this.trackingEvents[e],r&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}}},{key:"trackURLs",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=R.filterValidUrlTemplates(e),i=r({},i);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(i.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(i.ADPLAYHEAD=this.progressFormatted())),null!=(t=this.creative)&&null!==(t=t.universalAdIds)&&void 0!==t&&t.length&&(i.UNIVERSALADID=this.creative.universalAdIds.map(function(e){return e.idRegistry.concat(" ",e.value)}).join(",")),this.ad&&(this.ad.sequence&&(i.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(i.ADTYPE=this.ad.adType),this.ad.adServingId&&(i.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(i.ADCATEGORIES=this.ad.categories.map(function(e){return e.value}).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(i.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),R.track(e,i,n)}},{key:"convertToTimecode",value:function(e){if(R.isValidTimeValue(e)){var e=1e3*e,t=Math.floor(e/36e5),i=Math.floor(e/6e4%60),n=Math.floor(e/1e3%60),e=Math.floor(e%1e3);return"".concat(R.addLeadingZeros(t,2),":").concat(R.addLeadingZeros(i,2),":").concat(R.addLeadingZeros(n,2),".").concat(R.addLeadingZeros(e,3))}return""}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),S);function S(e,t,i){var n,r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];for(r in c(this,S),(n=se.call(this)).ad=t,n.creative=i,n.variation=a,n.muted=o,n.impressed=!1,n.skippable=!1,n.trackingEvents={},n.lastPercentage=0,n._alreadyTriggeredQuartiles={},n.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],n.creative.trackingEvents){var l=n.creative.trackingEvents[r];n.trackingEvents[r]=l.slice(0)}return"linear"!==n.creative.type?n._initVariationTracking():n._initLinearTracking(),e&&n.on("start",function(){e.lastSuccessfulAd=Date.now()}),n}function P(e,t,i){c(this,P),this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=t||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new me,this.storage=i||new ge,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}function M(){c(this,M),this.storage=this.initStorage()}function O(){var e;return c(this,O),(e=ce.call(this)).remainingAds=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return e.VASTClient=ke,e.VASTParser=me,e.VASTTracker=E,e.parseDuration=H,Object.defineProperty(e,"__esModule",{value:!0}),e}({});function d(e){if(window.console)console.log(e)}if(r.options)try{u=videojs.obj.merge(t,r.options||{})}catch(e){u=videojs.mergeOptions(t,r.options||{})}else u=t;let i,n=0,a=!1;y.liveTime=function(){return n};var l=function(){let e=!1;if(s())e=!0;if(!e){clearTimeout(i);a=!1}else{n+=.25;i=setTimeout(l,250)}};y.on("pause",function(){clearTimeout(i);a=!1});y.on("playing",function(){let e=!1;if(s())e=!0;if(e&&!0!==y.isOffline&&!0!==a){a=!0;i=setTimeout(l,500)}});function s(){try{if(y.duration()===1/0)return!0;else if("8"===videojs.browser.IOS_VERSION&&0===y.duration())return!0;return!1}catch(e){return!1}}var p=function(e,t,i,n){var r=document.createElement(e);if(void 0!==t)if(""!==t)r.className=t;if(void 0!==i)Object.entries(i).forEach(e=>{const[t,i]=e;r.setAttribute(t,i)});if(void 0!==n)if(""!==n)r.innerHTML=n;return r};let e=".nv-skip-icon{margin-top:0;display:inline-block;fill:#fff;width:22px;height:25px;vertical-align:middle;margin-left:5px}.vjs-touch-inactive .nv-nonlinear{bottom:10px!important}.vjs-user-inactive:not(.vjs-paused) .nv-nonlinear{bottom:10px!important}.nv-recall:hover{opacity:1}.nv-triangle{width:0px;height:0px;border-style:solid;border-width:0 6px 8px 6px;border-color:transparent transparent #444 transparent;transform: rotate(0deg);position:absolute;top:2px;left:6px;}.nv-recall{opacity:.7;position:absolute;width:26px;height:14px;box-shadow:1px 1px 1px rgba(0,0,0,.7);background:rgba(255,255,255,.7);border:solid 1px rgba(255,255,255,.7);border-bottom: 0;bottom:0;left:50%;margin-left:-13px;cursor:pointer;}.nonlinear-close{position:absolute;right:5px;top:5px;z-index:5;width:25px;height:25px;cursor:pointer;background-color:#e5e5e5;border-style:outset;border-width:1px;line-height:24px;color:#222;font-size:24px}.nv-nonlinear{bottom:60px;max-width:95%;min-width:320px;position:absolute;background:transparent;-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;cursor:pointer;text-align:center;border:0;opacity:0;-webkit-transition:bottom .5s ease,opacity .5s ease;transition:bottom .5s ease,opacity .5s ease;z-index:21474836}.nonlinear-close-narrow{top:auto;right:auto;bottom:5px;left:50%;width:80px;marginLeft:-40px;fontSize:14px;fontWeight:bold}.nv-visible{opacity:1;pointer-events:auto}.vjs-ad-playing .nv-nonlinear{opacity:0!important;pointer-events:none!important}.nv-nonlinear img(width:100%;height:auto)nv-nonlinear-close{}.nv-blocker{position:absolute;top:0;left:0;bottom:0;right:0;cursor:pointer}.nv-icon-bottom{bottom:80px}.nv-icon{transition:bottom .3s ease;animation: show 600ms ease forwards;opacity:0;display:table;transform: rotateX(-90deg);z-index:21474}@keyframes show {100%{opacity:1;transform:none}}.nv-skip{position:absolute;right:10px;bottom:70px;background: rgba(0,0,0,.66);color:#fff;font-family:Arial;font-size:16px;border: solid 2px transparent;border-radius:18px;padding:0 10px;line-height:35px}.nv-skip-active{cursor:pointer;pointer-events:auto}.nv-skip-active:hover{color:#fff;border-color:#999}",c=(e+=".nv-nonlinear img {width:100%;height:auto}",p("style"));c.innerHTML=e;y.el_.insertBefore(c,y.controlBar.el());let f=p("div","vjs-skin"),h=(y.el_.appendChild(f),getComputedStyle(f,":before").getPropertyValue("content"));h=h.replace(/^["'](.+(?=["']$))["']$/,"$1");y.one("playing",function(){y.bigPlayButton.el_.style.display="none"});C();var m=[],v={},b={lastPod:!0,preroll:!1,vmap:[],adStarted:!1,currentAdId:0,firstPlay:!1,adPlaying:!1,muted:!1,trackingEvents:[],skin:h,bottomIcons:[],snapshot:null,linear:[],nonlinear:[],companions:[],blocker:null,skip:-1,skipButton:null,currentPod:0,labelStyle:null,divLabel:null};y.vast.request=function(e){y.off("timeupdate",z);m=[];v={};if(b.adPlaying)S();b={preroll:!1,vmap:[],adStarted:!1,currentAdId:0,firstPlay:!1,adPlaying:!1,muted:!1,trackingEvents:[],skin:h,bottomIcons:[],snapshot:null,linear:[],nonlinear:[],companions:[],blocker:null,skip:-1,skipButton:null,currentPod:0,labelStyle:null,divLabel:null};C();r=e;F()};y.vast.reset=function(){b.preroll=!1;b.adStarted=!1;b.currentAdId=0;b.adPlaying=!1;b.skip=-1;b.currentPod=0;if(b.adPlaying)S();C();if(0<m.length)for(let e=0;e<m.length;e++)m[e].used=!1;if(0<m.length)if(0===m[0].timeOffset)if(b.outstream){m[0].used=!0;b.preroll=!0;setTimeout(function(){w(0)},10)}else y.one("playing",function(){m[0].used=!0;setTimeout(function(){w(0)},10)})};function D(t){let i="";if(t.universalAdIds)if(1<t.universalAdIds.length){for(let e=0;e<t.universalAdIds.length;e++)if(t.universalAdIds[e].idRegistry)i+=t.universalAdIds[e].idRegistry+" "+t.universalAdIds[e].value+",";i=i.slice(0,-1)}else if(0<t.universalAdIds.length)i=t.universalAdIds[0].idRegistry+" "+t.universalAdIds[0].value;if(""===i)i=-1;else i=encodeURIComponent(i);return i}function g(e,t){let i=-1,n=-1,r=null;if("linear"===t||"icon"==t)r=b.linear[b.currentPod-1];if("nonlinear"===t)r=b.nonlinear;if("companion"===t)r=b.companion;if(null!==r){n=D(r);if(r.adServingId)i=r.adServingId}function a(e){if("number"==typeof e){var t=function(e,t){return("000"+e).slice(-1*t)},e=parseFloat(e).toFixed(3),i=Math.floor(e/60/60),n=Math.floor(e/60)%60,r=Math.floor(e-60*n),e=e.slice(-3);return t(i,2)+":"+t(n,2)+":"+t(r,2)+"."+t(e,3)}else return-1}const o=new Date,l=o.getTime(),s=o.getTimezoneOffset()/60,c=6e4*o.getTimezoneOffset();let u=encodeURIComponent(new Date(l-c).toISOString().slice(0,-1)+(0<s?"-":"+")+("0"+s).slice(-2)),d=Math.random().toString().slice(2,10),p=encodeURIComponent(navigator.userAgent),f=encodeURIComponent(window.location.hostname),h=encodeURIComponent(a(y.currentTime())),m="-1";if(y.muted())m+="muted";if(y.isFullscreen())m+=",fullscreen";let v=parseInt(y.el().offsetWidth),g=parseInt(y.el().offsetHeight),k=v+","+g,T=encodeURIComponent(window.location.href);return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("[CACHEBUSTING]",d)).replace("[TIMESTAMP]",u)).replace("[DEVICEUA]",p)).replace("[DOMAIN]",f)).replace("[PLAYERSTATE]",m)).replace("[PLAYERSIZE]",k)).replace("[CONTENTPLAYHEAD]",h)).replace("[ADPLAYHEAD]",h)).replace("[MEDIAPLAYHEAD]",h)).replace("[PAGEURL]",T)).replace("[ADSERVINGID]",i)).replace("[ADTYPE]",t)).replace("[UNIVERSALADID]",n)}const k=function(e){let t='<VAST version="4.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.iab.com/VAST">';t+='<Ad><InLine><AdSystem version="4.0">IAB TechLab</AdSystem>';if(e.trackingURL&&e.adId)t+='<Impression id="Impression-ID">'+e.trackingURL+"?action=impression&amp;id="+e.adId+"</Impression>";if(e.trackingURL&&e.adId)t+="<Error>"+e.trackingURL+"?action=error&amp;id="+e.adId+"</Error>";t+="<Creatives>";if(e.adId)t+='<Creative adId="'+e.adId+'">';else t+="<Creative>";if(e.skip){var i=parseInt(e.skip);if(0<i&&i<60)t+='<Linear skipoffset="00:00:'+i+'">';else if(0<=i)t+='<Linear skipoffset="00:00:0'+i+'">';else t+="<Linear>"}else t+="<Linear>";if(e.trackingURL&&e.adId)t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t+="<TrackingEvents>")+('<Tracking event="start">'+e.trackingURL+"?action=start&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="firstQuartile">'+e.trackingURL+"?action=firstQuartile&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="midpoint">'+e.trackingURL+"?action=midpoint&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="thirdQuartile">'+e.trackingURL+"?action=thirdQuartile&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="complete">'+e.trackingURL+"?action=complete&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="pause">'+e.trackingURL+"?action=pause&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="resume">'+e.trackingURL+"?action=resume&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="skip">'+e.trackingURL+"?action=skip&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="mute">'+e.trackingURL+"?action=mute&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="unmute">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="fullscreen">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="exitFullscreen">'+e.trackingURL+"?action=unmute&amp;id="+e.adId+"</Tracking>"))+('<Tracking event="clickthrough">'+e.trackingURL+"?action=clickthrough&amp;id="+e.adId+"</Tracking>")+"</TrackingEvents>";if(e.duration)t+="<Duration>"+e.duration+"</Duration>";else t+="<Duration>00:00:00</Duration>";t+="<MediaFiles>";if(Array.isArray(e.media))for(var n=0;n<e.media.length;n++)t=(t+='<MediaFile type="'+e.media[n].type+'" scalable="1" maintainAspectRatio="1">')+("<![CDATA["+e.media[n].src+"]]>")+"</MediaFile>";else t=(t+='<MediaFile type="'+e.media.type+'" scalable="1" maintainAspectRatio="1">')+("<![CDATA["+e.media.src+"]]>")+"</MediaFile>";t=(t=(t=(t+="</MediaFiles>")+"<VideoClicks>"+'<ClickThrough id="blog">')+("<![CDATA["+e.clickthrough+"]]>"))+"</ClickThrough>"+"</VideoClicks>";if(e.icon)t=(t=(t=(t=(t+="<Icons>")+'<Icon program="AdChoices" height="0" width="0" xPosition="10" yPosition="bottom">'+"<StaticResource>")+("<![CDATA["+e.icon+"]]>")+"</StaticResource>")+("<IconClicks><IconClickThrough><![CDATA["+e.clickthrough+" ]]></IconClickThrough></IconClicks>"))+"</Icon>"+"</Icons>";return t=t+"</Linear>"+"</Creative></Creatives></InLine></Ad></VAST>"};y.on("ended",function(){if(b.fin);else{let e=y.el().className;if(e.indexOf("vjs-ad-playing")<0){C();for(let e=0;e<m.length;e++)if("end"===m[e].timeOffset&&!0!==m[e].used){b.adPlaying=!0;m[e].used=!0;T(e,20)}}}});function T(e,t){setTimeout(function(){w(e)},20)}const A=function(e){let t={withCredentials:u.withCredentials,timeout:u.timeout,wrapperLimit:u.wrapperLimit,resolveAll:u.resolveAll,allowMultipleAds:u.allowMultipleAds,allowMultipleAdPods:u.allowMultipleAdPods,cancelAdPods:u.cancelAdPods,clickthroughMethod:u.clickthroughMethod,closeButton:u.closeNonlinearButton,closeTheme:u.closeNonlinearTheme,autoClose:u.autoClose,outstreamClose:u.outstreamClose,nonlinearRecall:!1,tagURL:null,fallbackURL:null,tagXML:null,used:!1,timeOffset:0};if(e.options){if(e.options.withCredentials)t.withCredentials=e.options.withCredentials;if(e.options.timeout)t.timeout=e.options.timeout;if(e.options.wrapperLimit)t.wrapperLimit=e.options.wrapperLimit;if(e.options.resolveAll)t.resolveAll=e.options.resolveAll;if(e.allowMultipleAds)t.allowMultipleAds=e.options.allowMultipleAds;if(e.allowAdPods)t.allowAdPods=e.options.allowAdPods;if(e.options.cancelAdPods)t.cancelAdPods=e.options.cancelAdPods;if(e.options.clickthroughMethod)t.clickthroughMethod=e.options.clickthroughMethod;if(e.options.closeButton)t.closeButton=e.options.closeButton;if(e.options.closeTheme)t.closeTheme=e.options.closeTheme;if(e.options.autoClose)t.autoClose=e.options.autoClose;if(e.options.outstreamClose)t.outstreamClose=e.options.outstreamClose;if(e.options.nonlinearRecall)custom.options.nonlinearRecall=e.options.nonlinearRecall;if(e.options.closeNonlinearTheme)t.closeNonlinearTheme=e.options.closeNonlinearTheme}if(e.withCredentials)t.withCredentials=e.withCredentials;if(e.timeout)t.timeout=e.timeout;if(e.wrapperLimit)t.wrapperLimit=e.wrapperLimit;if(e.allowMultipleAds)t.allowMultipleAds=e.allowMultipleAds;if(e.allowAdPods)t.allowAdPods=e.allowAdPods;if(e.cancelAdPods)t.cancelAdPods=e.cancelAdPods;if(e.clickthroughMethod)t.clickthroughMethod=e.clickthroughMethod;if(e.closeButton)t.closeButton=e.closeButton;if(e.closeTheme)t.closeTheme=e.closeTheme;if(e.autoClose)t.autoClose=e.autoClose;if(e.outstreamClose)t.outstreamClose=e.outstreamClose;if(e.nonlinearRecall)t.nonlinearRecall=e.nonlinearRecall;if(e.closeNonlinearTheme)t.closeNonlinearTheme=e.closeNonlinearTheme;if(e.tagURL)t.tagURL=e.tagURL;if(e.fallbackURL)t.fallbackURL=e.fallbackURL;if(e.xml)t.tagXML=e.xml;if(e.timeOffset)t.timeOffset=e.timeOffset;return t},R=function(){if(r.ads){var e=[];if(!Array.isArray(r.ads))e.push(r.ads);else e=r.ads;for(var t=0;t<e.length;t++){let n=e[t];if(n.tagURL){let e=A(n);m.push(e)}else if(n.media&&n.clickthrough){let e=k(n),t=(new DOMParser).parseFromString(e,"text/xml"),i=(n.xml=t,A(n));m.push(i)}}}else{let n=0,e=null,t=[];if(r.tagURL){t=r.tagURL;if(r.fallbackURL)fallbackURL=r.fallbackURL;if(r.config){if(r.config.withCredentials)withCredentials=r.config.withCredentials;if(r.config.clickthroughMethod)clickthroughMethod=r.config.clickthroughMethod;if(r.config.timeout)timeout=r.config.timeout;if(r.config.resolveAll);if(r.config.wrapperLimit)wrapperLimit=r.config.wrapperLimit;if(r.config.allowMultipleAds)allowMultipleAds=!0;if(void 0!==r.config.closeNonlinearButton)closeButton=r.config.closeNonlinearButton;if(r.config.autoClose)autoClose=r.config.autoClose;if(void 0!==r.config.brandText)brandText=u.brandText=r.config.brandText;if(void 0!==r.config.brandUrl)brandUrl=u.brandUrl=r.config.brandUrl;if(r.config.outstreamClose)outstreamClose=r.config.outstreamClose;if(void 0!==r.config.outstreamCloseTheme)outstreamCloseTheme=alist.config.outstreamCloseTheme;if(r.config.closeNonlinearTheme)closeTheme=r.config.closeNonlinearTheme;if(r.config.nonlinearRecall)nonlinearRecall=r.config.nonlinearRecall}if(r.withCredentials)withCredentials=r.withCredentials;if(r.autoplay)u.autoplay=r.autoplay;ad.tagURL=t;e=A(r)}else if(r.tagXML){(t=[]).push(r.tagXML);e=op(r);e={tagXML:r.tagXML,used:!1,timeOffset:0,autoClose:autoClose,brandText:brandText,brandUrl:brandUrl,outstreamCloseTheme:outstreamCloseTheme,outstreamClose:outstreamClose,closeButton:closeButton,nonlinearRecall:nonlinearRecall,closeTheme:closeTheme,clickthroughMethod:clickthroughMethod}}else if(r.media&&r.clickthrough){if(r.config){if(r.config.clickthroughMethod)clickthroughMethod=r.config.clickthroughMethod;if(r.config.autoClose)autoClose=r.config.autoClose;if(r.config.outstreamClose)outstreamClose=r.config.outstreamClose;if(void 0!==r.config.brandText)brandText=u.brandText=r.config.brandText;if(void 0!==r.config.brandUrl)brandUrl=u.brandUrl=r.config.brandUrl;if(void 0!==r.config.outstreamCloseTheme)outstreamCloseTheme=r.config.outstreamCloseTheme}let e=k(r),t=(new DOMParser).parseFromString(e,"text/xml"),i=A(r);i.tagXML=t;m.push,i;m.push({used:!1,tagXML:t,autoClose:autoClose,timeOffset:n,brandText:brandText,brandUrl:brandUrl,outstreamCloseTheme:outstreamCloseTheme,outstreamClose:outstreamClose,nonlinearRecall:nonlinearRecall,closeButton:closeButton,closeTheme:closeTheme,clickthroughMethod:clickthroughMethod})}if(e)m.push(e)}};function j(s){let t=null;function e(){try{const e=new window.XMLHttpRequest;if("withCredentials"in e)return e;else return null}catch(e){return null}}let i=s.tagURL,n=u.timeout;if(s.timeout)n=s.timeout;let r=u.withCredentials;if(s.withCredentials)r=s.withCredentials;if("https:"===window.location.protocol&&0===i.indexOf("http://"))d("XHR URLHandler: Cannot go from HTTPS to HTTP.");try{const c=e();c.open("GET",i);c.timeout=n;c.withCredentials=r;c.overrideMimeType&&c.overrideMimeType("text/xml");c.onload=()=>o(c);c.onerror=()=>a(c,!1);c.onabort=()=>a(c,!1);c.ontimeout=()=>a(c,!0);c.send()}catch(e){L(s)}function a(e,t){if(t)d("XHR URLHandler: Request timed out after "+u.timeout+" +ms.");L(s)}function o(e){if(200===e.status)try{if("VMAP"!==(t=e.responseXML).documentElement.localName)L(s);else l(t)}catch(e){L(s)}else a(e,!1)}function l(e){var t,i=[];for(t in e.documentElement.childNodes){var n=e.documentElement.childNodes[t];if("AdBreak"==n.localName){n=B(n);i.push(n)}}function r(e){let[t=0,i=0,n=0]=e.split(":").reverse();return 3600*+n+60*+i+ +t}let a=[];if(0<i.length){for(var o=0;o<i.length;o++)if(i[o].adSource&&!i[o].adSource.uri&&i[o].timeOffset){var l=i[o].timeOffset;if("string"==typeof l&&"start"!==l.toLowerCase()&&"end"!==l.toLowerCase())l=r(l);if("string"==typeof l)if("start"===(l=l.toLowerCase()))l=0;let e=i[o].adSource;l={tagURL:e,id:i[o].adId,timeOffset:l};if(s.withCredentials)l.widthCredentials=s.withCredentials;if(s.timeout)l.timeout=s.timeout;if(s.resolveAll)l.resolveAll=s.resolveAll;if(s.wrapperLimit)l.wrapperLimit=s.wrapperLimit;if(s.allowMultipleAds)l.allowMultipleAds=s.allowMultipleAds;if(s.clickthroughMethod)l.clickthroughMethod=s.clickthroughMethod;if(s.closeButton)l.closeButton=s.closeButton;if(s.closeTheme)l.closeTheme=s.closeTheme;if(s.nonlinearRecall)l.nonlinearRecall=s.nonlinearRecall;if(s.autoClose)l.autoClose=s.autoClose;if(s.outstreamClose)l.outstreamClose=s.outstreamClose;if(s.brandText)l.brandText=u.brandText=s.brandText;if(s.brandUrl)l.brandUrl=u.brandUrl=s.brandUrl;if(s.outstreamCloseTheme)l.outstreamCloseTheme=s.outstreamCloseTheme;a.push(l)}L(a)}}}function B(e){var t,i={};i.timeOffset=e.getAttribute("timeOffset");i.breakType=e.getAttribute("breakType");i.breakId=e.getAttribute("breakId");i.adSource=null;for(t in e.childNodes){var n=e.childNodes[t];switch(n.localName){case"AdSource":var r=a(n);i.adSource=r.adTagURI;i.adId=r.id}}function a(e){var t,i={};i.id=e.getAttribute("id");i.allowMultipleAds=e.getAttribute("allowMultipleAds");i.followRedirects=e.getAttribute("followRedirects");i.vastAdData=null;i.adTagURI=null;i.customData=null;for(t in e.childNodes){var n=e.childNodes[t];switch(n.localName){case"AdTagURI":i.adTagURI={templateType:n.getAttribute("templateType"),uri:(n.textContent||n.text||"").trim()};i.adTagURI=(n.textContent||n.text||"").trim();break;case"VASTAdData":i.vastAdData=n.firstChild;for(;i.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":i.customData=n}}return i}return i}function V(){var e=p("style"),t=".video-js .vjs-tech{opacity:1!important}";e.textContent=t=(t=(t=(t=t+".vjs-visit-blocker{background:rgba(0, 0, 0, .77);bottom:auto;right:10px!important;left:auto!important;top:10px!important;display:table!important;width:auto!important;height:auto!important;color:#fff!important;padding:4px 6px!important;border-radius:8px;border:solid 2px rgba(255, 255, 255, .8)!important}"+".vjs-visit-blocker:hover{border:solid 2px rgba(255, 255, 255, 1)!important}")+".vjs-visit-block{position:absolute;transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);top:45%;left:50%;text-align:center;color:#fff}"+".btn-visit{cursor:pointer;font-size:16px;text-transform:uppercase;background:#383838;display:table;margin-bottom:10px;-webkit-border-radius:50%;border-radius:50%;width:60px;height:60px;line-height:60px;}")+".btn-visit:hover{background:#484848}"+".btn-visit-replay{cursor:pointer;display:table;padding:4px 6px;margin:0 auto;border:solid 1px #999}")+".video-js .vjs-bg-bar{height:0!important}"+".btn-visit-replay:hover{border-color:#fff}";let i=y.$(".vjs-tech");y.el_.insertBefore(e,i)}const L=function(i){if(0<i.length){let t=null;if(r.config)t=r.config;(r=[]).ads=i;if(t)for(let e=0;e<r.ads.length;e++)r.ads[e].config=t}else{r={};let e=[];e.push(i);r.ads=e}R();if(0<m.length){if(!0!==u.allowMultipleAds){let e=[];e.push(m[0]);m=e}if(0===m[0].timeOffset)if(b.outstream){if(!m[0].used){m[0].used=!0;b.adPlaying=!0;b.preroll=!0;setTimeout(function(){w(0)},10)}}else{let e=y.paused();if(!e){if(!m[0].used){b.adPlaying=!0;m[0].used=!0;setTimeout(function(){w(0)},10)}}else y.one("playing",function(){if(!m[0].used){b.adPlaying=!0;m[0].used=!0;setTimeout(function(){w(0)},10)}})}}};F();function F(){y.on("timeupdate",z);if(r.tagURL)j(r);else{R();if(0<m.length){if(!0!==u.allowMultipleAds){let e=[];e.push(m[0]);m=e}if(0===m[0].timeOffset)if(b.outstream){m[0].used=!0;b.preroll=!0;setTimeout(function(){w(0)},10)}else y.one("playing",function(){m[0].used=!0;setTimeout(function(){w(0)},10)})}}}const H=function(e){let t=y.el().querySelector(".vjs-replay-button"),i=y.el().querySelector(".vjs-sharing-overlay"),n=y.el().querySelector(".vjs-grid"),r=y.el().querySelector(".vjs-cend");if(t)a(t,e);if(i)a(i,e);if(n)a(n,e);if(r)a(r,e);function a(e,t){if(t){e.style.visibility="hidden";e.style.pointerEvents="none"}else e.removeAttribute("style")}},W=function(e){const t=e.el().querySelector(".vjs-tech"),i=e.textTracks?e.textTracks():[],n=[],r={ended:e.ended(),src:e.currentSrc(),currentTime:e.currentTime(),duration:e.duration(),currentSource:e.currentSource(),type:e.currentType(),playing:!e.paused(),suppressedTracks:[]};if(r.duration)if(r.duration-r.currentTime<1)r.ended=!0;if(r.ended)r.currentTime=e.duration()+1;if(r.duration)if(r.duration-r.currentTime<1)r.ended=!0;for(let e=0;e<i.length;e++){const a=i[e];n.push({track:a,mode:a.mode});a.mode="disabled"}r.suppressedTracks=n;if(0<e.seekable().length&&s())r.currentTime=e.currentTime()-e.seekable().end(0);if(t){r.nativePoster=t.poster;r.style=t.getAttribute("style")}H(!0);return r},q=function(r,a){if(r.src()===a.src){r.play();b.snapshot=null}else{var e=r.el().querySelector(".vjs-tech"),t=20;if("style"in a)e.setAttribute("style",a.style||"");r.src(a.currentSource);H(!1);if(a.ended){r.currentTime(a.duration);r.play()}else{r.one("playing",i);r.one("canplay",o);n()}}function i(){for(var e=r.textTracks?r.textTracks():[],t=0;t<e.length;t++){var i=e[t],n=a.suppressedTracks[t];i.mode=n.mode}}function n(){var e=setTimeout(function(){r.trigger("canplay")},1e3);r.one("canplay",function(){clearTimeout(e)})}function o(){r.play();if(!l(r)&&t--)setTimeout(o,50);else try{if(r.currentTime()!==a.currentTime){if(a.playing)r.one("seeked",function(){if(!a.ended)r.play()});if(0<r.seekable().length&&s())r.one("playing",function(){r.currentTime(r.seekable().end(0)+a.currentTime)});else r.currentTime(a.currentTime)}else if(a.playing)r.play();b.snapshot=null}catch(e){videojs.log.warn("Failed to resume the content after an advertisement",e)}}function l(e){if(1<e.readyState())return!0;if(void 0===e.seekable()||0<e.seekable().length)return!0;else return!1}};const w=function t(i){let n=m[i],r=(b.currentAdId=i,[]);if(n.tagXML){const e=new o.VASTParser;e.parseVAST(n.tagXML).then(e=>{(r=e).clickthroughMethod=n.clickthroughMethod;r.closeButton=n.closeButton;r.closeTheme=n.closeTheme;r.nonlinearRecall=n.nonlinearRecall;X(r)}).catch(e=>{d(e.toString());d("Ad cancelled")})}if(n.tagURL){let e={withCredentials:n.withCredentials,timeout:u.timeout,resolveAll:!0,wrapperLimit:u.wrapperLimit,allowMultipleAds:!0};const a=new o.VASTParser;a.getAndParseVAST(n.tagURL,e).then(e=>{(r=e).clickthroughMethod=n.clickthroughMethod;r.closeButton=n.closeButton;r.closeTheme=n.closeTheme;r.nonlinearRecall=n.nonlinearRecall;r.autoClose=n.autoClose;r.brandText=n.brandText;r.brandUrl=n.brandUrl;r.outstreamCloseTheme=n.outstreamCloseTheme;r.oustreamClosePosition=n.oustreamClosePosition;if(r)X(r)}).catch(e=>{if(n.fallbackURL){n.tagURL=n.fallbackURL;n.fallbackURL=null;t(i)}d(e.toString());d("Ad cancelled")})}};function _(){if(videojs.adinfo){var i=y.el_.querySelector(".vjs-ainfo");if(!i){let e=p("style"),t=".vjs-ainfo{position: absolute;top:10px;left:10px;opacity:.8;cursor:pointer;height:18px;display:none;}.vjs-ad-playing .vjs-ainfo{display:inline-block}";t=(t+=".vjs-ainfo .vjs-ico-block {height:18px;width:18px;display:inline-block;float:left;filter:drop-shadow(1px 1px 1px #000);}")+".vjs-ainfo .vjs-label {line-height:18px;float:left;height:18px;transition:all .25s ease;filter:drop-shadow(1px 1px 1px #000);margin-left:5px;max-width:0;font-size:13px;overflow:hidden;display:inline-block;margin-right:5px;}"+".vjs-ainfo:hover .vjs-label {max-width:200px}.vjs-ad-playing .vjs-ainfo-right {right:10px;left:auto;top:auto;bottom:15px}.vjs-ad-playing .vjs-ainfo-right .vjs-ico-block {float:right}";e.innerHTML=t;y.el_.appendChild(e);setTimeout(function(){i=p("div","vjs-ainfo");var e=p("div","vjs-ico-block"),t=(e.innerHTML='<svg fill="none" viewBox="0 0 24 24"><path fill-rule="evenodd" fill="white" d="M2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12ZM13 16V18H11V16H13ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM8 10C8 7.79 9.79 6 12 6C14.21 6 16 7.79 16 10C16 11.28 15.21 11.97 14.44 12.64C13.71 13.28 13 13.90 13 15H11C11 13.17 11.94 12.45 12.77 11.82C13.42 11.32 14 10.87 14 10C14 8.9 13.1 8 12 8C10.9 8 10 8.9 10 10H8Z"></path></svg>',p("div","vjs-label"));t.innerHTML=y.localize("Information");i.appendChild(e);i.appendChild(t);y.el_.appendChild(i);if(y.$(".vjs-tech").hasAttribute("outstreamvisit"))if("always"===videojs.outstreamClose){i.style.left="40px";i.style.top="13px"}i.onclick=()=>{y.pause();window.open(videojs.adinfo,"_blank")}},100)}}}function z(){if(!0!==b.adPlaying){let n=y.currentTime();if(s())n=y.liveTime();for(let i=0;i<m.length;i++){let e=m[i].timeOffset,t=e.toString();if(t.includes("%")){if(s())return;e=y.duration()*parseInt(t)/100;e=parseInt(e)}if(u.skipTimer){if(!0!==m[i].used&&"end"!==m[i].timeOffset&&n>=e){b.currentAdId=i;b.adStarted=!0;m[i].used=!0;T(i,20);break}}else if(!0!==m[i].used&&"end"!==m[i].timeOffset&&n>=e){b.currentAdId=i;b.adStarted=!0;m[i].used=!0;T(i,20);break}}}}function X(e){b.currentAd=e;if(y.$(".vjs-tech").hasAttribute("outstream")){if(y.$(".vjs-tech").hasAttribute("outstreamvisit"))y.el_.classList.add("vjs-set-visit");u.mode="outstream";b.clickthrough="";y.muted(!0);if(!y.el_.classList.contains("vjs-set-visit"))y.el_.classList.add("vjs-set-replay")}var t=e.ads;if(t.length<1){d("Error. Empty VAST response.");d("Ad cancelled.");if(m[b.currentAdId].fallbackURL){m[b.currentAdId].tagURL=m[b.currentAdId].fallbackURL;m[b.currentAdId].fallbackURL=null;w(b.currentAdId)}}b.clickthrough=e.clickthroughMethod;b.closeButton=e.closeButton;b.closeButton=e.closeButton;b.closeTheme=e.closeTheme;b.nonlinearRecall=e.nonlinearRecall;let i=u.mode;b.companions=[];b.linear=[];b.nonlinears=[];for(var n=0;n<t.length;n++)if(t[n].creatives)for(var r=0;r<t[n].creatives.length;r++){let e=!1;if("linear"===t[n].creatives[r].type){if(t[n].impressionURLTemplates&&!e){e=!0;t[n].creatives[r].impressionURLTemplates=t[n].impressionURLTemplates}if(t[n].adServingId)t[n].creatives[r].adServingId=t[n].adServingId;b.linear.push(t[n].creatives[r])}if("companion"==t[n].creatives[r].type){if(t[n].impressionURLTemplates&&!e){e=!0;t[n].creatives[r].impressionURLTemplates=t[n].impressionURLTemplates}if(t[n].adServingId)t[n].creatives[r].adServingId=t[n].adServingId;b.companions.push(t[n].creatives[r])}if("nonlinear"===t[n].creatives[r].type){if(t[n].impressionURLTemplates&&!e){e=!0;t[n].creatives[r].impressionURLTemplates=t[n].impressionURLTemplates}if(t[n].adServingId)t[n].creatives[r].adServingId=t[n].adServingId;b.nonlinears.push(t[n].creatives[r])}}if("outstream"==i&&1<b.linear.length)b.linear.length=1;if(0<b.linear.length){if(!0!==u.allowAdPods)b.linear.length=1;K(b.linear[0])}else S();if(0<b.nonlinears.length&&!0!==b.outstream)Q(b.nonlinears[0]);if(0<b.companions.length&&!0!==b.outstream)Y(b.companions[0])}function Q(e){if(b.outstream||"outstream"==u.mode);else if((b.nonlinear=e).variations)G(e,0)}const Y=function(e){if(b.outstream||"outstream"==u.mode);else if((b.companion=e).variations)for(var t=0;t<e.variations.length;t++)$(e,t)};function C(){var e=y.el().querySelector(".nv-nonlinear");if(e)e.parentNode.removeChild(e);e=y.el().querySelector(".nv-recall");if(e)e.parentNode.removeChild(e);try{y.off("playerresize",E)}catch(e){}try{b.minSuggestedDuration=0}catch(e){}try{b.suggestedStart=0}catch(e){}}const E=function(){var i=y.el().offsetWidth,n=y.el().offsetHeight,r=y.el().querySelector(".nv-nonlinear");if(r){let e=M()+r.offsetHeight,t=r.querySelector(".nonlinear-close");if(t)if(e>n){t.classList.add("nonlinear-close-narrow");t.innerHTML=y.localize("EXIT")}else{t.classList.remove("nonlinear-close-narrow");t.innerHTML="&times;"}if(r.offsetWidth>i){r.style.opacity=0;r.style.pointerEvents="none"}else{r.style.bottom=M()+"px";r.style.opacity=1;r.style.pointerEvents="auto"}}};function G(o,l){C();b.nonlinear=o;b.nonlinearId=void 0;if(o.adId)b.nonlinearId=o.adId;if("nonLinearAd"===o.variations[l].adType){let i=o.variations[l];var l="",s="";if(i.htmlResource){l=i.htmlResource;s="html"}else if(i.iframeResource){l=i.iframeResource;contentType="iframe";s="iframe"}else if(i.staticResource){l='<img style="cursor:pointer" src="'+i.staticResource+'"/>';s="static"}C();let t=p("div","nv-nonlinear"),n=p("div");if(i.width)o=t.style.width=x(i.width);if(i.height)o=t.style.height="auto";if(i.expandedWidth)t.style.maxWidth=x(i.expandedWidth);if(i.expandedHeight)t.style.maxHeight=x(i.expandedHeight);if(i.nonlinearClickThroughURLTemplate&&"static"==s)n.onclick=n.ontouchend=function(e){e.stopPropagation();window.open(i.nonlinearClickThroughURLTemplate,"_blank");if(i.nonlinearClickTrackingURLTemplates){var t=i.nonlinearClickTrackingURLTemplates;t.forEach(function(){if(t.url)I("clickthrough",t.url,"nonlinear")})}};let e=p("div","nonlinear-close");if(i.minSuggestedDuration)e.className="nonlinear-close vjs-hidden";e.setAttribute("role","button");e.innerHTML="&times;";if("dark"===b.closeTheme){e.style.backgroundColor="#222";e.style.color="#e5e5e5";e.style.borderColor="#777";e.style.paddingLeft="2px"}t.style.bottom=M()+"px";let r=null;y.on("playerresize",E);if("iframe"===s){let e=p("iframe");e.src=iframeResource;e.scrolling="no";e.style.width="100%";e.style.height="100%";e.style.border="none";e.style.overflow="hidden";e.appendChild(l);n.innerHTML=l;e.appendChild(n);t.appendChild(e)}else{n.innerHTML=l;if(b.closeButton&&"static"==s)n.appendChild(e);t.appendChild(n);if(b.nonlinearRecall&&"static"==s){(r=p("div","nv-recall vjs-hidden")).setAttribute("role","button");r.innerHTML='<div class="nv-triangle"></div>';t.appendChild(r)}}if(r&&"static"==s)r.onclick=r.ontouchend=function(e){e.preventDefault();e.stopImmediatePropagation();r.classList.add("vjs-hidden");n.removeAttribute("style")};if(e&&"static"==s)e.onclick=e.ontouchend=function(e){e.preventDefault();e.stopImmediatePropagation();if(r){n.style.opacity=0;n.style.pointerEvents="none";r.className="nv-recall"}else t.parentNode.removeChild(t)};function c(){setTimeout(function(){y.el().appendChild(t);E();if(o.impressionURLTemplates)o.impressionURLTemplates.forEach(function(e){if(e.url)I("impression",e.url,"nonlinear")});t.className="nv-nonlinear nv-visible";b.preroll=!1},1e3);if(e&&"static"==s)if(i.minSuggestedDuration)setTimeout(function(){e.className="nonlinear-close"},1e3*i.minSuggestedDuration+.3)}let a=!1;function u(){if(!b.adPlaying&&!a){a=!0;c();y.off("timeupdate",u)}}function d(){y.on("timeupdate",u)}if(!0!==y.paused)y.on("timeupdate",u);else y.one("playing",d)}}function x(e){let t=null,i=/^\d+(\.\d+)?%$/.test(e);if(i||"auto"==e)t=e;else t=Number(e)+"px";return t}function $(t,i){b.companionId=void 0;if(t.adId)b.companionId=t.adId;let l=!1;function e(e){if("companionAd"===t.variations[i].adType){let n=t.variations[e],r="",a="";if(0<n.htmlResources.length){r=n.htmlResources[0];a="html"}else if(0<n.iframeResources.length){r=n.iframeResources[0];a="iframe"}else if(0<n.staticResources.length)if(n.staticResources[0].creativeType){let e=["image/gif","image/jpeg","image/png"];if(e.indexOf(n.staticResources[0].creativeType)){if(n.altText)r='<img style="width:100%;height:100%;cursor:pointer" alt="'+n.altText+'" src="'+n.staticResources[0].url+'"/>';else r='<img style="width:100%;height:100%;cursor:pointer" src="'+n.staticResources[0].url+'"/>';a="static"}}if(""!==r){let i=null;if(n.adSlotId){let e=document.getElementById(n.adSlotId);if(e)(i=e).innerHTML=""}if(!i){var o=document.querySelectorAll(".vjs-companion");if(o)for(let t=0;t<o.length;t++){let e=o[t].className;if(!e.includes("vjs-companion-ex")){o[t].classList.add("vjs-companion-ex");(i=o[t]).innerHTML="";break}}}if(i&&""===i.innerHTML){let t=p("div","asset");if("iframe"===a){let e=p("iframe");e.src=r;e.scrolling="no";e.style.width="100%";e.style.height="100%";e.style.border="none";e.style.overflow="hidden";t.appendChild(e)}else if("static"===a||"html"===a)t.innerHTML=r;i.appendChild(t);if(n.assetWidth)t.style.width=x(n.assetWidth);if(n.assetHeight)t.style.height=x(n.assetHeight);if(n.width)i.style.width=x(n.width);if(n.height)i.style.height=x(n.height);if(n.expandedWidth)i.style.maxWidth=x(n.expandedWidth);if(n.expandedHeight)i.style.maxHeight=x(n.expandedHeight);if(n.companionClickThroughURLTemplate&&"static"==a)i.onclick=function(){y.pause();window.open(n.companionClickThroughURLTemplate,"_blank");if(n.companionClickTrackingURLTemplates){n.companionClickTrackingURLTemplates.forEach(function(e){if(e.url)I("clickthrough",e.url,"ompanion")});if(n.trackingEvents)if(n.trackingEvents.clickthrough)I("clickthrough",n.trackingEvents.clickthrough,"companion")}};if(n.TrackingEvents)if(n.TrackingEvents.creativeView)I("view",n.TrackingEvents.creativeView,"companion");if(b.companion.impressionURLTemplates&&!0!==l){l=!0;b.companion.impressionURLTemplates.forEach(function(e){if(e.url)I("impression",e.url,"companion")})}}}}}if(!y.paused())e(i);else y.one("playing",function(){e(i)})}function K(t){b.linearId=void 0;if(t.adId)b.linearId=t.adId;if(0==b.currentPod)b.currentPod=1;b.firstPause=!1;b.trackingEvents=[];v={};let e={start:null,pause:null,resume:null,firstQuartile:null,midpoint:null,thirdQuartile:null,mute:null,unmute:null,fullscreen:null,exitFullscreen:null,complete:null,skip:null,clickthrough:null};b.linearEvents=[];Object.keys(e).forEach(e=>{if(t.trackingEvents[e])if(t.trackingEvents[e][0])b.linearEvents[e]=t.trackingEvents[e][0]});if(t.mediaFiles){if(t.closedCaptionFiles)t.captions=t.closedCaptionFiles;let e=ne(t.mediaFiles);if(e[0].mimeType)t.mediatoplay={src:e[0].fileURL,type:e[0].mimeType};else t.mediatoplay={src:e[0].fileURL}}if(t.mediatoplay.src)J(t);else S()}y.one("play",function(){if(y.$(".vjs-tech").hasAttribute("outstreamvisit"))V()});const Z=function(e){if(b.outstream||"outstream"==u.mode);else{b.icons=[];if(e.icons)if(0<e.icons.length)for(var t=0;t<e.icons.length;t++){var i=e.icons[t],n="";if(i.staticResource)n='<img src="'+i.staticResource+'">';else if(i.htmlResource)n=i.htmlResource;else if(i.iframeResource)n=i.iframeResource;var r="left",a=0,o="top",l=0,s=0;if(i&&"left"===i.xPosition){r="left";a=0}if(i&&"right"===i.xPosition){r="right";a=0}if(i&&0<=Number(i.xPosition)){r="left";a=i.xPosition}if(i&&"bottom"===i.yPosition){o="bottom";l=0}if(i&&"top"===i.yPosition){o="top";l=0;l+=s}if(i&&0<=Number(i.yPosition)){o="top";l=Number(i.yPosition);l+=s}var c=p("div","nv-icon");c.setAttribute("name","adicon");y.el().appendChild(c);if("bottom"===i.yPosition){c.style.bottom=O()+"px";b.bottomIcons.push(c);y.on("useractive",()=>{c.style.bottom=O()+"px"});y.on("userinactive",()=>{if(!y.paused()&&y.el_.classList.contains("vjs-has-mouse"))c.style.bottom="5px"})}c.id="adicon_"+i.program;if("iframe"===i.type){s=p("iframe");s.src=i.content;s.scrolling="no";s.style.width="100%";s.style.height="100%";s.style.border="none";s.style.overflow="hidden";c.appendChild(s)}else c.innerHTML=n;c.style.position="absolute";if(i&&"center"===i.xPosition){c.style.left="50%";c.style.webkitTransform="translateX(-50%)";c.style.transform="translateX(-50%)"}else c.style[r]=a+"px";if(i&&"center"===i.yPosition){c.style.top="50%";if(i&&"center"===i.xPosition){c.style.webkitTransform="translate(-50%,-50%)";c.style.transform="translate(-50%,-50%)"}else{c.style.transform="translateY(-50%)";c.style.webkitTransform="translateY(-50%)"}}else if("bottom"!==i.yPosition)c.style[o]=l+"px";i.origY=l;if(i.iconClickThroughURLTemplate){c.style.cursor="pointer";c.onclick=i.ontouchend=function(e){e.stopImmediatePropagation();window.open(i.iconClickThroughURLTemplate,"_blank");if(i.iconClickTrackingURLTemplates)i.iconClickTrackingURLTemplates.forEach(function(e){if(e.url)I("clickthrough",e.url,"icon")})}}if(i.iconViewTrackingURLTemplate)I("view",i.iconViewTrackingURLTemplate,"icon")}}};function J(n){b.lastPod=!0;if(1<b.linear.length)for(let e=0;e<b.linear.length;e++)if(b.linear[e]===n)if(e<b.linear.length-1)b.lastPod=!1;setTimeout(function(){b.adPlaying=!0;var t=y.controlBar.el().querySelector(".vjs-vast-label"),e=y.el().querySelector(".outstream-label");if(e)t=e;if(null===b.snapshot)b.snapshot=W(y);n.used=!0;y.src(n.mediatoplay);y.play();if(y.$(".vjs-tech").hasAttribute("outstreamvisit")){if(n.videoClickThroughURLTemplate.url)se(n.videoClickThroughURLTemplate.url)}else{if(n.videoClickThroughURLTemplate&&"link"!==b.clickthrough)if(n.videoClickThroughURLTemplate.url)se(n.videoClickThroughURLTemplate.url);if("link"===b.clickthrough)fe(b.currentPod,n.videoClickThroughURLTemplate.url);else if(t){t.classList.remove("vjs-hidden");let e=de();if(1<b.linear.length&&"outstream"!==b.mode)e+=" ("+b.currentPod+"/"+b.linear.length+")";t.innerHTML=e}}P();const i=function(){if(b.error)b.error=!1;else{_();pe();b.firstPlay=!0;y.el_.classList.add("vjs-ad-playing");if(n.impressionURLTemplates)n.impressionURLTemplates.forEach(function(e){if(e.url)I("impression",e.url,"linear")});I("start",b.linearEvents.start,"linear");if(n.skipDelay){b.skip=n.skipDelay;ce();he()}Z(n)}};b.error=!1;y.on("timeupdate",ie);y.one("ended",N);y.one("playing",i);y.on("playerresize",te);y.on("volumechange",oe);y.on("play",re);y.on("pause",ae);y.on("fullscreenchange",le);y.on("error",ee);if(!b.preroll){b.preroll=!0;y.play()}b.preroll=!1},150)}function ee(){b.error=!0;d("Media Error.Ad Cancelled");b.preroll=!0;if(b.lastPod)y.one("playing",function(){var e=y.textTracks?y.textTracks():[];if(0<e.length)for(var t=0;t<e.length;t++){var i=e[t],n=b.snapshot.suppressedTracks[t];i.mode=n.mode}});document.getElementById("cpt").innerHTML="ad error";U();setTimeout(function(){let e=y.el().querySelectorAll(".nv-icon");if(e)for(var t=0;t<e.length;t++)e[t].remove();P();ue();y.el().classList.remove("vjs-ad-playing")},0)}function I(n,t,r){if(!t);else{let i;if("linear"==r)i=b.linearId;if("nonlinear"==r)i=b.nonlinearId;if("companion"==r)i=b.companionId;if(Array.isArray(t))t.forEach(function(e){let t=new Image;t.src=g(e,r);y.trigger("vastEvent",{eventName:n,adType:r,adId:i})});else{let e=new Image;e.src=g(t,r);y.trigger("vastEvent",{eventName:n,adType:r,adId:i})}}}const te=function(){let i=y.el().offsetWidth;if(b.divLabel)b.divLabel.style.top=me()+"px";if(0<b.bottomIcons.length)for(var n=0;n<b.bottomIcons.length;n++){let e=O(),t=b.bottomIcons[n];t.style.bottom=e+"px"}he();let r=y.controlBar.el().querySelector(".vjs-vast-label");if(r){let e=r.innerHTML,t=e.split(y.localize("Advertisement")).join("");t=t.split(y.localize("Ad")).join("");if(i<480)r.innerHTML=y.localize("Ad")+t;else r.innerHTML=y.localize("Advertisement")+t}},ie=function(){let e=parseInt(y.currentTime()),t=parseInt(y.duration());if(0<t){if(e>parseInt(t/4)&&!v.firstQuartile){v.firstQuartile=!0;I("firstQuartile",b.linearEvents.firstQuartile,"linear")}if(e>parseInt(t/2)&&!v.midpoint){v.midpoint=!0;I("midpoint",b.linearEvents.midpoint,"linear")}if(e>parseInt(.75*t)&&!v.thirdQuartile){v.thirdQuartile=!0;I("thirdQuartile",b.linearEvents.thirdQuartile,"linear")}}if(0<b.skip&&b.skipButton){let t=!1,e=parseInt(b.skip-y.currentTime());if(0<e)b.skipButton.innerHTML=y.localize("Skip Ad in")+" "+e;else{b.skipButton.innerHTML=y.localize("Skip Ad")+'<span class="nv-skip-icon"><svg viewBox="0 0 32 32"><path d="M7 24l12.75-9-12.75-9v18zM22 6v18h3v-18h-3z"></path></svg></span>';b.skipButton.classList.add("nv-skip-active");t=!0}b.skipButton.onclick=b.skipButton.ontouchend=function(e){e.preventDefault();e.stopImmediatePropagation();if(t){I("skip",b.linearEvents.skip,"linear");if(u.cancelAdPods)b.linear.length=1;U()}else return!1}}};function ne(e){var i=y.el().getBoundingClientRect().width;e.sort(function(e,t){return Math.abs(i-e.width)-Math.abs(i-t.width)});return e}const re=function(){if(b.firstPause)I("resume",b.linearEvents.resume,"linear")},ae=function(){b.firstPause=!0;I("pause",b.linearEvents.pause,"linear")},oe=function(){if(y.muted()&&0==b.muted){b.muted=!0;I("mute",b.linearEvents.mute,"linear")}if(!0!==y.muted()&&b.muted){b.muted=!1;I("unmute",b.linearEvents.unmute,"linear")}},le=function(){if(y.isFullscreen())I("fullscreen",b.linearEvents.fullscreen,"linear");else I("exitFullscreen",b.linearEvents.exitFullscreen,"linear")},U=function(){y.off("ended",N);y.off("timeupdate",ie);y.off("playerresize",te);y.off("volumechange",oe);y.off("play",re);y.off("pause",ae);y.off("fullscreenchange",le);let e=y.el().querySelectorAll(".nv-icon");if(e)for(var t=0;t<e.length;t++)e[t].remove();P();ue();let i=b.skip=0,n=!1;if(1<b.linear.length){for(var r=0;r<b.linear.length;r++)if(!0!==b.linear[r].used){i=r;break}if(0<i&&"outstream"!==b.mode){y.loadingSpinner.el_.style.display="none";b.currentPod=b.currentPod+1;K(b.linear[i])}else{if(b.outstream||"outstream"==u.mode){m=[];S();y.trigger("adsCompleted");n=!0}if(!0!==n)for(let e=b.currentAdId;e<m.length;e++)if(!1===m[e].used&&m[e].timeOffset==m[b.currentAdId].timeOffset){n=!0;y.loadingSpinner.el_.style.display="none";b.currentAdId=e;b.adPlaying=!0;m[e].used=!0;T(e,200);break}if(!0!==n){let t=!0;for(let e=b.currentAdId;e<m.length;e++)if(!m[e].used)t=!1;if(t||b.outstrem)y.trigger("adsCompleted");S()}}}else{if(b.outstream||"outstream"==u.mode){m=[];S();n=!0}for(let e=b.currentAdId;e<m.length;e++)if(!0!==m[e].used&&m[e].timeOffset==m[b.currentAdId].timeOffset){n=!0;b.currentAdId=e;b.adPlaying=!0;m[e].used=!0;T(e,200);break}let t=!0;for(let e=b.currentAdId;e<m.length;e++)if(!m[e].used)t=!1;if(t||b.outstrem)y.trigger("adsCompelted");if(!0!==n)S()}},N=function(){U()},S=function e(){b.adPlaying=!1;b.adStarted=!1;if(b.outstream||"outstream"==u.mode){for(let e=b.currentAdId;e<m.length;e++)if(0<e)m[e].used=!0;b.currentAdId=0;y.one("ended",e);b.fin=!0;if(y.$(".vjs-tech").hasAttribute("outstreamvisit")){var t=b.blocker.getAttribute("data-url"),i=p("div"),n=(y.el().appendChild(i),p("div")),r=p("div"),a=p("div");i.className="vjs-overlay";n.class="vjs-block";n.className="vjs-visit-block";r.className="btn-visit";a.className="btn-visit-replay";i.appendChild(n);r.innerHTML="VISIT";a.innerHTML="Replay";n.appendChild(r);n.appendChild(a);let e=y.el_.querySelector(".vjs-ainfo");if(e)e.parentNode.removeChild(e);r.onclick=function(){window.open(t,"_blank")};a.onclick=function(){y.play();y.el().removeChild(i)};return}else if(b.autoClose){y.pause();b.fin=!0;y.el().parentNode.removeChild(y.el())}}b.currentAdId=0;y.loadingSpinner.el_.removeAttribute("style");y.off("ended",N);y.off("error",ee);try{if(b.blocker)y.el_.removeChild(b.blocker)}catch(e){}try{if(b.skipButton)b.skipButton.remove()}catch(e){}if("outstream"!==b.mode)y.el_.classList.remove("vjs-ad-playing");if(b.snapshot&&!0!==b.fin)q(y,b.snapshot);b.adPlaying=!1},se=function(t){if(null==b.blocker){b.blocker=p("div","nv-blocker");if(y.$(".vjs-tech").hasAttribute("outstreamvisit")){b.blocker.className="nv-blocker vjs-visit-blocker";b.blocker.innerHTML=y.localize("VISIT");b.blocker.setAttribute("data-url",t)}}b.blocker.onclick=b.blocker.ontouchend=function(e){if(b.firstPlay){e.stopPropagation();window.open(t,"_blank");I("clickthrough",b.linearEvents.clickthrough,"linear");if(b.linear[b.currentPod-1].videoClickTrackingURLTemplates){let e=b.linear[b.currentPod-1].videoClickTrackingURLTemplates;if(e)e.forEach(function(e){if(e.url)I("clickthrough",e.url,"linear")})}if(!y.paused())y.pause()}else if(y.paused())y.play()};y.el().insertBefore(b.blocker,y.controlBar.el())},ce=function(){if(b.skipButton)b.skipButton.remove();b.skipButton=p("div");let e="nv-skip",t=y.localize("Skip Ad in")+" "+b.skip;if(0===b.skip){e="nv-skip nv-skip-active";t=y.localize("Skip Ad")}b.skipButton.className=e;b.skipButton.innerHTML=t;y.el().appendChild(b.skipButton)},P=function(){if(b.skipButton){b.skipButton.parentNode.removeChild(b.skipButton);b.skipButton=null;b.skip=-1}},ue=function(){if(b.labelStyle){b.labelStyle.parentNode.removeChild(b.labelStyle);b.labelStyle=null}if(b.divLabel){b.divLabel.parentNode.removeChild(b.divLabel);b.divLabel=null}};function de(){if(y.el_.offsetWidth<480)return y.localize("Ad");else return y.localize("Advertisement")}const pe=function(){setTimeout(function(){const t=y.textTracks?y.textTracks():[];for(let e=0;e<t.length;e++){const i=t[e];i.mode="disabled"}},200)};function fe(e,t){let i=y.controlBar.el().querySelector(".vjs-vast-label");if(i)i.classList.add("vjs-hidden");if(!b.labelStyle){let e=".nv-vast-div{position: absolute;font-size:12px;left:10px;top:-20px;color:#e5e5e5;text-shadow:1px 1px 1px #000;font-weight:normal}.nv-vast-div .nv-vast-timer{padding:0 10px 0 5px;}.nv-vast-div .nv-vast-pod {padding:0 5px;}.nv-vast-div .nv-label-icon{width:18px;height:16px;display:inline-block;padding:1px;margin-left:5px;opacity:.8;vertical-align:middle;margin-top:-2px}.nv-vast-div a{cursor: pointer;color: #e5e5e5;text-decoration:none}";b.labelStyle=p("style");b.labelStyle.innerHTML=e;y.controlBar.el().appendChild(b.labelStyle)}if(!b.divLabel)b.divLabel=p("div","nv-vast-div");var n="";if(1<b.linear.length)var r=y.localize("Ad %%NUM%% of %%TOTAL%%"),n='<span class="nv-vast-pod">'+(r=(r=r.replace("%%NUM%%",b.currentPod.toString())).replace("%%TOTAL%%",b.linear.length.toString()))+"</span>";else n+=y.localize("Ad");let a=t.replace(/^https?:\/\//,"");if(20<(a=(a=a.replace(/:\d+/,"")).replace("www.","")).length)a=a.substring(0,20)+"...";let o='<span class="nv-label-icon"><svg fill="#fff" height="100%" version="1.1" viewBox="0 0 48 48" width="100%"><path d="M0 0h48v48H0z" fill="none"></path><path d="M38 38H10V10h14V6H10c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V24h-4v14zM28 6v4h7.17L15.51 29.66l2.83 2.83L38 12.83V20h4V6H28z"></path></svg></span>'+a,l=p("span");l.style.cursor="pointer";l.innerHTML=o;b.divLabel.innerHTML=n;b.divLabel.appendChild(l);b.divLabel.style.top=me()+"px";l.onclick=l.ontouchend=function(e){e.stopImmediatePropagation();window.open(t,"_blank");I("clickthrough",b.linearEvents.clickthrough,"linear");if(b.linear[b.currentPod-1].videoClickTrackingURLTemplates){let e=b.linear[b.currentPod-1].videoClickTrackingURLTemplates;if(e)e.forEach(function(e){if(e.url)I("clickthrough",e.url,"linear")})}if(!y.paused())y.pause()};if(b.outstream)y.el().querySelector(".outstream-controls").appendChild(b.divLabel);else y.controlBar.el().appendChild(b.divLabel)}const he=function(){if(b.skipButton){let e=y.el().offsetWidth,t=70;switch(b.skin){case"slategrey":case"shaka":case"roundal":case"jwlike":if(1080<e)t=90;break;case"treso":t=70;if(1080<e)t=90;break;case"mockup":if(1080<e)t=100}if(b.outstream)t=60;b.skipButton.style.bottom=t+"px"}},M=function(){let e=y.el().offsetWidth,t=60;switch(b.skin){case"treso":t=60;break;case"slategrey":t=65;if(1080<e)t=70;break;case"pinko":case"party":case"nuevo":t=55;if(1080<e)t=60;break;case"mockup":t=55;if(1080<e)t=70;break;case"jwlike":if(1080<e)t=70;break;case"flow":t=55;if(1080<e)t=60}return t},O=function(){let e=y.el().offsetWidth,t=60;switch(b.skin){case"party":if(e<1080)t=50;break;case"treso":t=70;break;case"chrome":t=50;if(e<480)t=60;break;case"mockup":t=70;if(1080<e)t=90;break;case"flow":t=50;if(1080<e)t=60;break;case"jwlike":if(1080<e)t=70;break;case"nuevo":t=50;if(1080<e)t=60;break;case"roundal":if(e<480)t=50;break;case"slategrey":case"shaka":case"party":if(1080<e)t=70}if(b.outstream)t=45;if("link"===b.clickthrough)t+=30;if(y.options_.nativeControlsForTouch)t=80;return t},me=function(){let e=-30,t=y.el().offsetWidth;switch(b.skin){case"treso":e=-50;break;case"mockup":e=-60;if(1080<t)e=-70;break;case"jwlike":e=-40}if(b.outstream)e=-25;if(y.options_.nativeControlsForTouch)e=-20;return e};return this};var vast=function(e,t){this.ready(function(){factory(this,e,t)})},getPlugin=videojs.getPlugin||videojs.plugin,registerPlugin=videojs.registerPlugin||videojs.plugin;if(void 0===getPlugin("vast")||"undefined"===getPlugin("vast"))registerPlugin("vast",vast);;module.exports=vast;

