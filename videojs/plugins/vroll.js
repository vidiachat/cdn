
!function(t){var e;"undefined"!=typeof window&&window.videojs?t(window.videojs):"function"==typeof define&&define.amd?define("vroll",["video.js"],function(e){return t(e.default||e)}):"undefined"!=typeof module&&module.exports&&(e=require("video.js"),module.exports=t(e.default||e))}(function(te){((te=te&&te.hasOwnProperty("default")?te.default:te).registerPlugin||te.plugin)("vroll",function(e,t){this.ready(function(){!function(T,e,t){"use strict";var C,S,_=null,w=[],A=null,M=!1,q=!1,I=!0,N=!1,P=!1,L=!1,H=!1,E=!1,O="undefined",$=-1,z=0,B=T.$(".vjs-tech"),V=(te.isAd=!1,te.dom),Z=T.el(),o=te.browser,F=null,Q=[],R=null,U=null,D=null,G=null;function J(e){return"[object Array]"===Object.prototype.toString.call(e)}function K(e){return T.localize(e)}function W(e,t){e=document.createElement(e);return void 0!==t&&""!==t&&(e.className=t),e}function X(){return T.duration()===1/0||"8"===o.IOS_VERSION&&0===T.duration()}te.vrollplugin=!0,t&&(t.trackUrl&&(_=t.trackUrl),U=t);var r,t=!0;if(J(e)||(r=e).src&&5<r.src.length&&(r.offset?-1<r.offset.indexOf("%")&&X()&&(t=!1):r.offset=0,t)&&((e=[])[0]=r),J(e))for(var i=0;i<e.length;i++){var Y=e[i];Y.offset||(Y.offset=0),Y.src&&"undefined"!==Y.offset&&(Y.loaded=!1,w.push(Y))}function ee(){return 0<T.el_.className.indexOf("vjs-casting")}T.ready(function(){T.vroll.reset=function(){for(var e=0;e<w.length;e++)w[e].loaded=!1;0<w.length&&w.length<2&&(w=w[0]),T.vroll(w,U),T.play()},T.one("playing",function(){T.mediaStarted=!0}),T.vroll.request=function(e){w=[],T.vroll(e),T.play()},D=T.el_.querySelector(".vjs-loading-spinner");var i=T.el_.querySelector(".vjs-big-play-button");if(S=T.el_.querySelector(".vjs-replay-button"),0<w.length){(A=T.el_.querySelector(".vast-blocker"))&&T.el_.removeChild(A),A=W("a","vast-blocker vjs-hidden"),T.el_.insertBefore(A,T.controlBar.el_.nextSibling);const k=function(e){if(G)return G;e.el().querySelector(".vjs-tech");var t=e.textTracks?e.textTracks():[],r=[],i={ended:e.ended(),src:e.currentSrc(),currentTime:e.currentTime(),duration:e.duration(),currentSource:e.currentSource(),type:e.currentType(),playing:!e.paused(),live:!1,suppressedTracks:[]};i.duration&&i.duration-i.currentTime<1&&(i.ended=!0),i.ended&&(i.currentTime=e.duration()+1);for(let e=0;e<t.length;e++){var o=t[e];r.push({track:o,mode:o.mode}),o.mode="disabled"}return i.suppressedTracks=r,0<e.seekable().length&&X()&&(i.live=!0,i.currentTime=e.currentTime()-e.seekable().end(0)),i},x=function(o){o.snapshot=null;let n=G;var e,i,t;o.snapshot=n,o.src()===n.src?o.play():(e=o.el().querySelector(".vjs-tech")).hasAttribute("outstream")||(i=20,"style"in G&&e.setAttribute("style",n.style||""),o.src(n.currentSource),n.ended?(o.currentTime(n.duration),o.trigger("ended")):(o.one("playing",function(){var e=o.textTracks?o.textTracks():[];if(0<e.length)for(var t=0;t<e.length;t++){var r=e[t],i=n.suppressedTracks[t];r.mode=i.mode}}),o.one("canplay",function e(){var t,r=o.$(".vjs-tech");1<(t=o).readyState()||void 0===t.seekable()||0<t.seekable().length||!i--?(o.snapshot.live?(0<o.seekable().length?o.currentTime(o.seekable().end(0)+o.snapshot.currentTime):o.currentTime(o.snapshot.currentTime),o.play()):o.snapshot.ended?o.currentTime(o.snapshot.duration):(o.currentTime(o.snapshot.currentTime),(t=o.play())&&t.catch&&t.catch(function(e){te.log.warn("Play promise rejected in snapshot restore",e)})),r.setAttribute("style",G.style||"")):setTimeout(e,50)}),t=setTimeout(function(){o.trigger("canplay")},1e3),o.one("canplay",function(){clearTimeout(t)})))};for(var e,t,o,n,s,r=0;r<w.length;r++)w[r].offset||(w[0].offset=0);if(0===parseInt(w[0].offset,10)&&(T.offline?T.isPreroll=!1:((T.isPreroll=!0)!==E&&(E=!0,z=T.volume()),T.one("play",function(){var e;T.isPreroll&&(e=T.el_.querySelector(".vjs-poster"),(F=W("div","vjs-black-poster"))||Z.insertBefore(F,e),T.isPreroll=!1)}))),T.isOffline)H=!1;else if(!H){if(H=!0,T.$(".vjs-tech").hasAttribute("outstream")&&!B.hasAttribute("outstreamvisit")&&T.el_.classList.add("vjs-set-replay"),!0!==X()&&T.duration(),0<w.length&&!0!==L){T.isPreroll&&B.hasAttribute("outstreamvisit")&&(t=".video-js .vjs-tech{opacity:1!important}",(e=document.createElement("style")).textContent=t+=".vjs-visit-blocker{background:rgba(0, 0, 0, .77);bottom:auto;right:10px!important;left:auto!important;top:10px!important;display:table!important;width:auto!important;height:auto!important;color:#fff!important;padding:4px 6px!important;border-radius:8px;border:solid 2px rgba(255, 255, 255, .8)!important}.vjs-visit-blocker:hover{border:solid 2px rgba(255, 255, 255, 1)!important}.vjs-visit-block{position:absolute;transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);top:45%;left:50%;text-align:center;color:#fff}.btn-visit{cursor:pointer;font-size:16px;text-transform:uppercase;background:#383838;display:table;margin-bottom:10px;-webkit-border-radius:50%;border-radius:50%;width:60px;height:60px;line-height:60px;}.btn-visit:hover{background:#484848}.btn-visit-replay{cursor:pointer;display:table;padding:4px 6px;margin:0 auto;border:solid 1px #999}.video-js .vjs-bg-bar{height:0!important}",T.el_.insertBefore(e,B)),L=!0;for(var a=0;a<w.length;a++)w[a].method="","100%"!=w[a].offset&&"end"!==w[a].offset||(w[a].method="postroll",w[a].offset="end",Q.push(w[a]))}function l(e){if(T.$(".vjs-tech").hasAttribute("outstreamvisit"))p();else if(N)v();else if(M)T.trigger("vroll",{id:O.id,action:"completed"}),h("completed"),v();else{if(null!==Q){G=G||k(T),D.setAttribute("style","display:none !important");for(var t=0;t<Q.length;t++)if(!0!==Q[t].loaded)return T.trigger("vroll",{id:O.id,action:"completed"}),h("completed"),G=G||k(T),void d()}T.trigger("vroll",{id:O.id,action:"completed"}),h("completed"),f(),T.off("ended",l),v(),T.playlist&&0<T.playlist.length&&(T.pause(),T.playlist.next(!0))}}function d(){for(var e,t=0;t<Q.length;t++)if(!0!==Q[t].loaded)return Q[t].loaded=!0,(e=Q[t]).loaded=!0,O=e,N=!0,te.isAd=!0,V.addClass(Z,"vjs-ad-playing"),P=!0,T.on("error",b),e={src:e.src,type:e.type},T.src(e),D.setAttribute("style","display:none !important"),setTimeout(function(){T.play()},100),void T.one("playing",function(){j()});f(),x(T)}function f(){T.off("timeupdate",y),T.off("error",b),A.className="vast-blocker vjs-hidden",N=P=M=!1,m(".vast-skip-button"),setTimeout(function(){D.removeAttribute("style")},200),V.addClass(Z,"vjs-has-started"),B.poster="",V.removeClass(Z,"vjs-ad-playing"),te.isAd=!1}function c(e){if(M=N=!0,e.loaded=!0,T.adhref=null,!ee()){I=!(q=!(P=!0));var t={src:(O=e).src,type:e.type},r=e.offset,i=[];for(let e=0;e<w.length;e++)r===w[e].offset&&i.push(w[e]);1<i.length&&e!==i[i.length-1]&&(I=!1),G=G||k(T),D.setAttribute("style","display:none !important"),T.src(t),T.on("error",b),setTimeout(function(){T.play(),T.one("playing",function(){j()})},10)}}function u(e){var t=e;if(!N)for(var r=0;r<w.length;r++){var i,o=w[r];if(o.offset||(o.offset=0),"string"==typeof o.offset&&0<o.offset.indexOf("%")&&T.duration()&&(i=parseInt(Y.offset),w[r].offset=i/100*T.duration()),X()&&0<w[r].offset)return;t>=w[r].offset&&!0!==M&&!0!==w[r].loaded&&(!0!==ee()?c(o):w[r].loaded=!0)}}function p(){m(".vast-skip-button"),R=null,$=-1;var e,t,r,i=A.href,o=(T.isPreroll=!1,[]);o.push(w[0]),o[0].loaded=!1,w=o,T.el_.querySelector(".btn-visit")||(console.log("visit"),e=document.createElement("div"),T.el().appendChild(e),o=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),e.className="vjs-overlay",o.class="vjs-block",o.className="vjs-visit-block",t.className="btn-visit",r.className="btn-visit-replay",e.appendChild(o),t.innerHTML="VISIT",r.innerHTML="Replay",o.appendChild(t),o.appendChild(r),t.onclick=function(){window.open(i,"_blank")},r.onclick=function(){T.currentTime(0),T.play(),T.el().removeChild(e)})}function v(){if(m(".vast-skip-button"),R=null,$=-1,T.$(".vjs-tech").hasAttribute("outstreamvisit"))p(),T.trigger("ended");else if(T.$(".vjs-tech").hasAttribute("outstream"))w=[],R=null,$=-1,T.off("play",j),T.isPreroll=!1,T.off("error",b),T.off("timeupdate",y),T.off("ended",l),T.el_.classList.add("vjs-set-replay"),T.pause(),T.trigger("ended"),T.currentTime(0),T.el_.classList.add("vjs-ad-playing"),T.pause();else{var t=O.offset,r=(O.loaded=!0,T.isPreroll=!1);V.addClass(Z,"vjs-has-started");for(var i=0;i<w.length;i++){w[i].offset,w[i].offset||(w[i].offset=0);let e=w[i].offset;if("string"==typeof e&&0<e.indexOf("%")&&T.duration()&&(e=parseInt(w[i].offset)/100,w[i].offset=parseInt(e*T.duration())),X()&&0<w[i].offset)return;if(w[i].offset||(w[i].offset=0),w[i].offset===t&&!0!==w[i].loaded){T.off("timeupdate",y),T.off("error",b),N=M=!0,w[i].loaded=!0,te.isAd=!0,V.addClass(Z,"vjs-ad-playing"),P=!0,c(w[i]),r=!0;break}}if(!0!==r){for(i=0;i<w.length;i++)w[i].loaded;T.off("timeupdate",y),T.off("error",b),f(),x(T),G=null}}}function h(e){var t;_&&(t=new Image,e="?event="+e,O.id&&(e=e+"&id="+O.id),t.src=_+e)}function m(e){var t=T.el_.querySelectorAll(e);if(t)for(var r=0;r<t.length;r++)t[r].parentNode.removeChild(t[r])}function g(){}function b(){T.trigger("vroll",{id:O.id,action:"error"}),h("error");var e=T.el_.querySelector(".vjs-black-poster");e&&e.parentNode.remove(e),!0!==I&&(q=!0),("postroll"===O.method?d:v)(),P=!1}function y(){var e,t,r;T.paused()||(T.currentTime(),T.duration(),e=T.currentTime(),0<(r=T.duration())&&((r=((r=r.toFixed(0))/4).toFixed(0))<e&&!0!==o&&(h("fistQuartile"),o=!0),2*r<e&&!0!==n&&(h("midpoint"),n=!0),3*r<e&&!0!==s&&(h("thirdQuartile"),s=!0),-1<$)&&(r=Math.ceil($-e),V.removeClass(R,"vjs-hidden"),0<r?(e=K("Skip Ad in %%TIME%%"),R.innerHTML="",t=W("p","vast-skip-button-text"),R.appendChild(t),t.innerHTML=e.replace("%%TIME%%",r)):(R.className="vast-skip-button enabled",R.innerHTML=K("Skip Ad")+'<span class="vjs-vast-skip-icon"><svg viewBox="0 0 32 32"><path d="M7 24l12.75-9-12.75-9v18zM22 6v18h3v-18h-3z"></path></svg></span>')))}function j(){var e,t,r;q||(N=!0,setTimeout(function(){try{0<(e=J(e=T.textTracks?T.textTracks():[])?e:[]).length&&(t=[],e.forEach(function(e){t.push({track:e,mode:e.mode}),e.mode="disabled"}))}catch(e){}var t,e},100),ee())||O.cancelled||(T.$(".vjs-tech").hasAttribute("outstreamvisit")&&T.el_.classList.add("vjs-set-visit"),te.adinfo&&!(t=T.el_.querySelector(".vjs-ainfo"))&&((r=W("style")).innerHTML=".vjs-ad-playing .vjs-ainfo{position: absolute;top:10px;left:10px;display:inline-block;opacity:.8;cursor:pointer;height:18px;}.vjs-ad-playing .vjs-ainfo .vjs-ico-block {height:18px;width:18px;display:inline-block;float:left;filter:drop-shadow(1px 1px 1px #000);}.vjs-ad-playing .vjs-ainfo .vjs-label {line-height:18px;float:left;height:18px;transition:all .25s ease;filter:drop-shadow(1px 1px 1px #000);margin-left:5px;max-width:0;font-size:13px;overflow:hidden;display:inline-block;margin-right:5px;}.vjs-ad-playing .vjs-ainfo:hover .vjs-label {max-width:200px}.vjs-ad-playing .vjs-ainfo-right {right:10px;left:auto;top:auto;bottom:15px}.vjs-ad-playing .vjs-ainfo-right .vjs-ico-block {float:right}",T.el_.appendChild(r),t=W("div","vjs-ainfo"),(r=W("div","vjs-ico-block")).innerHTML='<svg fill="none" viewBox="0 0 24 24"><path fill-rule="evenodd" fill="white" d="M2 12C2 6.48 6.48 2 12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12ZM13 16V18H11V16H13ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM8 10C8 7.79 9.79 6 12 6C14.21 6 16 7.79 16 10C16 11.28 15.21 11.97 14.44 12.64C13.71 13.28 13 13.90 13 15H11C11 13.17 11.94 12.45 12.77 11.82C13.42 11.32 14 10.87 14 10C14 8.9 13.1 8 12 8C10.9 8 10 8.9 10 10H8Z"></path></svg>',(e=W("div","vjs-label")).innerHTML=T.localize("Information"),t.appendChild(r),t.appendChild(e),T.el_.appendChild(t),T.$(".vjs-tech").hasAttribute("outstreamvisit")&&t.classList.add("vjs-ainfo-right"),t.onclick=e=>{T.pause(),window.open(te.adinfo,"_blank")}),r=T.muted(),T.muted(r),(e=Z.querySelector(".vjs-black-poster"))&&e.parentNode.removeChild(e),T.currentTime(0),T.one("ended",g),T.on("timeupdate",y),0<O.offset&&V.addClass(i,"vjs-hidden"),-1<($=parseInt(O.skip,10))&&(m(".vast-skip-button"),(R=W("div","vast-skip-button vjs-hidden")).id="adSkipButton",R.ariaDisabled="false",R.tabIndex="0",C=W("p","vast-skip-button-text"),R.appendChild(C),T.el_.appendChild(R),R.onclick=function(e){e.stopPropagation(),0<=(" "+R.className+" ").indexOf(" enabled ")&&(T.trigger("vroll",{id:O.id,action:"skipped"}),h("skipped"),("postroll"===O.method?d:v)())}),V.addClass(Z,"vjs-ad-playing"),V.addClass(i,"vjs-hidden"),(t=T.el_.querySelector(".vjs-black-poster"))&&(T.el_.removeChild(t),F=null),z&&T.volume(z),(r=T.el_.querySelector(".vjs-poster"))&&r.removeAttribute("style"),A.className="vast-blocker",O.href?(T.$(".vjs-tech").hasAttribute("outstreamvisit")&&(A.className="vast-blocker vjs-visit-blocker",A.innerText=T.localize("VISIT")),A.removeAttribute("style"),A.href=O.href,T.adhref=O.href,O.target?A.target=O.target:A.target="_blank"):A.style.pointerEvents="none",P&&(T.trigger("vroll",{id:O.id,action:"start"}),h("adstart"),P=!1))}0<w.length&&(T.one("play",function(){0==w[0].offset&&!0!==w[0].loaded&&u(0)}),T.on("timeupdate",function e(){var t;T.el_.classList.contains("vjs-ad-playing")||(w[w.length-1].loaded&&T.off("timeupdate",e),t=te.dom.hasClass(Z,"vjs-has-started"),X(),t&&!0!==N&&!0!==T.isOffline&&u(T.currentTime()))}),T.on("ended",l),T.one("play",function(){V.addClass(S,"vjs-hidden")}),T.isPreroll&&(!0!==E&&(E=!0,z=T.volume(),T.volume(0)),X()),A.onclick=function(){T.trigger("vroll",{id:O.id,action:"clicked"}),h("click")},T.on("chromecastConnected",function(){T.isPreroll&&(w[0].cancelled=!0,m(".vast-skip-button"),R=null,$=-1,T.off("play",j),w[0].loaded=!0,T.isPreroll=!1,V.addClass(Z,"vjs-has-started"),V.removeClass(Z,"vjs-ad-playing"),T.off("timeupdate",y),T.off("error",b),x(T),G=null)}),s=!1)}}})}(this,e,t)})})});
